"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[5703],{75703:function(t,e,n){n.r(e),n.d(e,{loadGLTFMesh:function(){return $}});var r=n(47038),o=n(35680),s=n(43713),a=n(27092),i=n(68491),c=n(88250),u=n(42325),l=n(56144),f=n(30128),p=n(31967),g=n(66885),m=n(65649),d=n(16886),C=n(37589),x=n(90314),w=n(40748),h=n(8746),y=n(83394),v=n(64798),b=n(86114),A=n(52421),S=n(96773),B=n(45267),M=n(58691),T=n(81032);async function $(t,e,n){const r=new y.C(k(n)),o=(await(0,v.z)(r,e,n,!0)).model,s=o.lods.shift(),i=new Map,c=new Map;o.textures.forEach(((t,e)=>i.set(e,Z(t)))),o.materials.forEach(((t,e)=>c.set(e,R(t,i))));const u=W(s);for(const a of u.parts)_(u,a,c);const{position:l,normal:f,tangent:p,color:g,texCoord0:d}=u.vertexAttributes,C={position:l.typedBuffer,normal:(0,a.pC)(f)?f.typedBuffer:null,tangent:(0,a.pC)(p)?p.typedBuffer:null,uv:(0,a.pC)(d)?d.typedBuffer:null,color:(0,a.pC)(g)?g.typedBuffer:null},x=(0,h.w1)(C,t,n);return{transform:x.transform,components:u.components,spatialReference:t.spatialReference,vertexAttributes:new m.ZP({position:x.vertexAttributes.position,normal:x.vertexAttributes.normal,tangent:x.vertexAttributes.tangent,color:C.color,uv:C.uv})}}function k(t){return null!=t&&t.resolveFile?{busy:!1,request:async(e,n,r)=>{const s=t.resolveFile(e),i="image"===n?"image":"binary"===n?"array-buffer":"json";return(await(0,o["default"])(s,{responseType:i,signal:(0,a.pC)(r)?r.signal:null})).data}}:null}function F(t,e){if((0,a.Wi)(t))return"-";const n=t.typedBuffer;return`${(0,s.s1)(e,n.buffer,(()=>e.size))}/${n.byteOffset}/${n.byteLength}`}function E(t){return(0,a.pC)(t)?t.toString():"-"}function W(t){let e=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,a=[];for(const i of t.parts){const{attributes:{position:t,normal:c,color:u,tangent:l,texCoord0:f}}=i,p=`\n      ${F(t,r)}/\n      ${F(c,r)}/\n      ${F(u,r)}/\n      ${F(l,r)}/\n      ${F(f,r)}/\n      ${E(i.transform)}\n    `;let g=!1;const m=(0,s.s1)(o,p,(()=>(g=!0,{start:e,length:t.count})));g&&(e+=t.count),c&&(n.normal=!0),u&&(n.color=!0),l&&(n.tangent=!0),f&&(n.texCoord0=!0),a.push({gltf:i,writeVertices:g,region:m})}return{vertexAttributes:{position:(0,w.gS)(d.fP,e),normal:n.normal?(0,w.gS)(d.ct,e):null,tangent:n.tangent?(0,w.gS)(d.ek,e):null,color:n.color?(0,w.gS)(d.mc,e):null,texCoord0:n.texCoord0?(0,w.gS)(d.Eu,e):null},parts:a,components:[]}}function Z(t){return new g.Z({data:t.data,wrap:L(t.parameters.wrap)})}function R(t,e){const n=new r.Z(P(t.color,t.opacity)),o=t.emissiveFactor?new r.Z(j(t.emissiveFactor)):null;return new p.Z({color:n,colorTexture:(0,a.Wg)((0,a.yw)(t.textureColor,(t=>e.get(t)))),normalTexture:(0,a.Wg)((0,a.yw)(t.textureNormal,(t=>e.get(t)))),emissiveColor:o,emissiveTexture:(0,a.Wg)((0,a.yw)(t.textureEmissive,(t=>e.get(t)))),occlusionTexture:(0,a.Wg)((0,a.yw)(t.textureOcclusion,(t=>e.get(t)))),alphaMode:I(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:(0,a.Wg)((0,a.yw)(t.textureMetallicRoughness,(t=>e.get(t))))})}function _(t,e,n){e.writeVertices&&z(t,e);const r=e.gltf,o=D(r.indices||r.attributes.position.count,r.primitiveType),s=e.region.start;if(s)for(let a=0;a<o.length;a++)o[a]+=s;t.components.push(new f.Z({faces:o,material:n.get(r.material),trustSourceNormals:!0}))}function z(t,e){const{position:n,normal:r,tangent:o,color:s,texCoord0:u}=t.vertexAttributes,l=e.region.start,{attributes:f,transform:p}=e.gltf,g=f.position.count;if((0,C.t)(n.slice(l,g),f.position,p),(0,a.pC)(f.normal)&&(0,a.pC)(r)){const t=(0,i.a)((0,c.c)(),p);(0,C.a)(r.slice(l,g),f.normal,t)}else(0,a.pC)(r)&&(0,B.f)(r,0,0,1,{dstIndex:l,count:g});if((0,a.pC)(f.tangent)&&(0,a.pC)(o)){const t=(0,i.a)((0,c.c)(),p);(0,x.t)(o.slice(l,g),f.tangent,t)}else(0,a.pC)(o)&&(0,M.f)(o,0,0,1,1,{dstIndex:l,count:g});if((0,a.pC)(f.texCoord0)&&(0,a.pC)(u)?(0,T.n)(u.slice(l,g),f.texCoord0):(0,a.pC)(u)&&(0,T.f)(u,0,0,{dstIndex:l,count:g}),(0,a.pC)(f.color)&&(0,a.pC)(s)){const t=f.color,e=s.slice(l,g);if(4===t.elementCount)t instanceof d.ek?(0,x.s)(e,t,255):t instanceof d.mc?(0,M.c)(e,t):t instanceof d.v6&&(0,x.a)(e,t,8);else{(0,M.f)(e,255,255,255,255);const n=d.ne.fromTypedArray(e.typedBuffer,e.typedBufferStride);t instanceof d.ct?(0,C.s)(n,t,255):t instanceof d.ne?(0,B.c)(n,t):t instanceof d.mw&&(0,C.b)(n,t,8)}}else(0,a.pC)(s)&&(0,M.f)(s.slice(l,g),255,255,255,255)}function D(t,e){switch(e){case 4:return(0,b.nh)(t,A.DX);case 5:return(0,b.DA)(t);case 6:return(0,b.jX)(t)}}function I(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function L(t){return{horizontal:N(t.s),vertical:N(t.t)}}function N(t){switch(t){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}function O(t){return t**(1/S.K)*255}function P(t,e){return(0,l.f)(O(t[0]),O(t[1]),O(t[2]),e)}function j(t){return(0,u.f)(O(t[0]),O(t[1]),O(t[2]))}}}]);