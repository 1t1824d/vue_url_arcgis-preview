"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[9816],{58837:function(e,t,i){i.d(t,{Fp:function(){return a},RL:function(){return u},UV:function(){return m},bk:function(){return f}});i(48675),i(3462);var o=i(28802),r=i(64316),n=i(42027);function a(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":{const t=e.symbolLayers;return t&&1===t.length?a(t[0]):null}case"CIMVectorMarker":{var t;const i=e.markerGraphics;if(!i||1!==i.length)return null;const o=i[0];if(!o)return null;const r=o.geometry;if(!r)return null;const n=o.symbol;return!n||"CIMPolygonSymbol"!==n.type&&"CIMLineSymbol"!==n.type||null!=(t=n.symbolLayers)&&t.some((e=>!!e.effects))?null:{geom:r,asFill:"CIMPolygonSymbol"===n.type}}case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function l(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}function s(e){let t=1/0,i=-1/0,o=1/0,r=-1/0;for(const n of e)for(const e of n)e[0]<t&&(t=e[0]),e[0]>i&&(i=e[0]),e[1]<o&&(o=e[1]),e[1]>r&&(r=e[1]);return new n.Z(t,o,i-t,r-o)}function c(e){let t=1/0,i=-1/0,o=1/0,r=-1/0;for(const n of e)for(const e of n)e[0]<t&&(t=e[0]),e[0]>i&&(i=e[0]),e[1]<o&&(o=e[1]),e[1]>r&&(r=e[1]);return[t,o,i,r]}function f(e){return e?e.rings?c(e.rings):e.paths?c(e.paths):(0,r.YX)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function m(e,t,i,o,r){const[n,a,l,s]=e;if(l<n||s<a)return[0,0,0];const c=l-n,f=s-a,m=128,u=1,h=Math.floor(.5*(.5*m-u)),p=(m-2*(h+u))/Math.max(c,f),y=Math.round(c*p)+2*h,g=Math.round(f*p)+2*h;let d=1;t&&(d=g/p/(t.ymax-t.ymin));let S=0,N=0;if(o)if(r){if(t&&i&&t.ymax-t.ymin>0){const e=(t.xmax-t.xmin)/(t.ymax-t.ymin);S=o.x/(i*e),N=o.y/i}}else S=o.x,N=o.y;return S=.5*(t.xmax+t.xmin)+S*(t.xmax-t.xmin),N=.5*(t.ymax+t.ymin)+N*(t.ymax-t.ymin),S-=n,N-=a,S*=p,N*=p,S+=h,N+=h,[d,S/y-.5,-(N/g-.5)]}function u(e){const t=l(e.geom),i=s(t),o=128,r=1,n=Math.floor(.5*(.5*o-r)),a=(o-2*(n+r))/Math.max(i.width,i.height),c=Math.round(i.width*a)+2*n,f=Math.round(i.height*a)+2*n,m=[];for(const l of t)if(l&&l.length>1){const t=[];for(const o of l){let[r,l]=o;r-=i.x,l-=i.y,r*=a,l*=a,r+=n-.5,l+=n-.5,e.asFill?t.push([r,l]):t.push([Math.round(r),Math.round(l)])}if(e.asFill){const e=t.length-1;t[0][0]===t[e][0]&&t[0][1]===t[e][1]||t.push(t[0])}m.push(t)}const u=h(m,c,f,n);return e.asFill&&p(m,c,f,n,u),[y(u,n),c,f]}function h(e,t,i,o){const r=t*i,n=new Array(r),a=o*o+1;for(let l=0;l<r;++l)n[l]=a;for(const l of e){const e=l.length;for(let r=1;r<e;++r){const e=l[r-1],a=l[r];let s,c,f,m;e[0]<a[0]?(s=e[0],c=a[0]):(s=a[0],c=e[0]),e[1]<a[1]?(f=e[1],m=a[1]):(f=a[1],m=e[1]);let u=Math.floor(s)-o,h=Math.floor(c)+o,p=Math.floor(f)-o,y=Math.floor(m)+o;u<0&&(u=0),h>t&&(h=t),p<0&&(p=0),y>i&&(y=i);const g=a[0]-e[0],d=a[1]-e[1],S=g*g+d*d;for(let o=u;o<h;o++)for(let r=p;r<y;r++){let l,s,c=(o-e[0])*g+(r-e[1])*d;c<0?(l=e[0],s=e[1]):c>S?(l=a[0],s=a[1]):(c/=S,l=e[0]+c*g,s=e[1]+c*d);const f=(o-l)*(o-l)+(r-s)*(r-s),m=(i-r-1)*t+o;f<n[m]&&(n[m]=f)}}}for(let l=0;l<r;++l)n[l]=Math.sqrt(n[l]);return n}function p(e,t,i,o,r){for(const n of e){const e=n.length;for(let a=1;a<e;++a){const e=n[a-1],l=n[a];let s,c,f,m;e[0]<l[0]?(s=e[0],c=l[0]):(s=l[0],c=e[0]),e[1]<l[1]?(f=e[1],m=l[1]):(f=l[1],m=e[1]);let u=Math.floor(s),h=Math.floor(c)+1,p=Math.floor(f),y=Math.floor(m)+1;u<o&&(u=o),h>t-o&&(h=t-o),p<o&&(p=o),y>i-o&&(y=i-o);for(let n=p;n<y;++n){if(e[1]>n==l[1]>n)continue;const a=(i-n-1)*t;for(let t=u;t<h;++t)t<(l[0]-e[0])*(n-e[1])/(l[1]-e[1])+e[0]&&(r[a+t]=-r[a+t]);for(let e=o;e<u;++e)r[a+e]=-r[a+e]}}}}function y(e,t){const i=2*t,r=e.length,n=new Uint8Array(4*r);for(let a=0;a<r;++a){const t=.5-e[a]/i;(0,o.I)(t,n,4*a)}return n}},9816:function(e,t,i){i.d(t,{S:function(){return T},c:function(){return C}});var o=i(47038),r=i(87441),n=i(27092),a=i(597),l=i(98035),s=i(74887),c=i(32297),f=i(58837),m=i(64880),u=i(92262),h=i(81589);const p=r.Z.getLogger("esri.symbols.cim.cimAnalyzer");function y(e){switch(e){case"Butt":return 0;case"Square":return 2;default:return 1}}function g(e){switch(e){case"Bevel":return 0;case"Miter":return 2;default:return 1}}function d(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function S(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function N(e){let t="",i="";if(e){const o=e.toLowerCase();-1!==o.indexOf("italic")?t="italic":-1!==o.indexOf("oblique")&&(t="oblique"),-1!==o.indexOf("bold")?i="bold":-1!==o.indexOf("light")&&(i="lighter")}return{style:t,weight:i}}function v(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function b(e,t,i,o){let r;e[t]?r=e[t]:(r={},e[t]=r),r[i]=o}function k(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function C(e,t,i,o,r){const n=null!=o?o:[];if(!e)return n;let a,l;const c={};if("CIMSymbolReference"!==e.type)return p.error("Expect cim type to be 'CIMSymbolReference'"),n;if(a=e.symbol,l=e.primitiveOverrides,l){const e=[];for(const i of l){const o=i.valueExpressionInfo;if(o&&t){const r=o.expression,n=(0,s.Yi)(r,t.spatialReference,t.fields).then((e=>{e&&b(c,i.primitiveName,i.propertyName,e)}));e.push(n)}else null!=i.value&&b(c,i.primitiveName,i.propertyName,i.value)}e.length>0&&await Promise.all(e)}const f=[];switch(D(a,i,f),f.length>0&&await Promise.all(f),a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":O(a,l,c,t,n,i,r)}return n}function O(e,t,i,o,r,n,a){if(!e)return;const l=e.symbolLayers;if(!l)return;const s=e.effects;let f;const m=c.B$.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(f=1);let u=l.length;for(;u--;){const h=l[u];if(!h||!1===h.enable)continue;let y;s&&s.length&&(y=[...s]);const g=h.effects;g&&g.length&&(s?y.push(...g):y=[...g]);const d=[];switch(c.E0.findApplicableOverrides(h,t,d),h.type){case"CIMSolidFill":P(h,y,i,d,o,r);break;case"CIMPictureFill":M(h,y,i,d,o,n,r);break;case"CIMHatchFill":x(h,y,i,d,o,r);break;case"CIMGradientFill":w(h,y,i,d,o,r);break;case"CIMSolidStroke":I(h,y,i,d,o,r,"CIMPolygonSymbol"===e.type,m);break;case"CIMPictureStroke":L(h,y,i,d,o,r,"CIMPolygonSymbol"===e.type,m);break;case"CIMGradientStroke":A(h,y,i,d,o,r,"CIMPolygonSymbol"===e.type,m);break;case"CIMCharacterMarker":if(X(h,y,i,d,o,r))break;break;case"CIMPictureMarker":if(X(h,y,i,d,o,r))break;"CIMLineSymbol"===e.type&&(f=k(h)),z(h,y,i,d,o,n,r,f,m);break;case"CIMVectorMarker":if(X(h,y,i,d,o,r))break;"CIMLineSymbol"===e.type&&(f=k(h)),J(h,y,i,d,o,r,n,f,m,a);break;default:p.error("Cannot analyze CIM layer",h.type)}}}function P(e,t,i,o,r,n){const a=e.primitiveName,s=(0,m.NO)(e.color),[c,f]=U(o,a),u=(0,l.hP)(JSON.stringify(e)+f).toString();n.push({type:"fill",templateHash:u,materialHash:c?()=>u:u,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:E(a,i,"Color",r,s,B),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t})}function M(e,t,i,o,r,a,s){const c=e.primitiveName,f=e.tintColor?(0,m.NO)(e.tintColor):{r:255,g:255,b:255,a:1},[u,h]=U(o,c),p=(0,l.hP)(JSON.stringify(e)+h).toString(),y=(0,l.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();let g=(0,m.NA)(e.scaleX);if("width"in e){const t=e.width;let i=1;const o=a.getResource(e.url);(0,n.pC)(o)&&(i=o.width/o.height),g/=i*(e.height/t)}s.push({type:"fill",templateHash:p,materialHash:u?()=>y:y,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:E(c,i,"TintColor",r,f,B),height:E(c,i,"Height",r,e.height),scaleX:E(c,i,"ScaleX",r,g),angle:E(c,i,"Rotation",r,(0,m.NA)(e.rotation)),offsetX:E(c,i,"OffsetX",r,(0,m.NA)(e.offsetX)),offsetY:E(c,i,"OffsetY",r,(0,m.NA)(e.offsetY)),url:e.url})}function x(e,t,i,o,r,n){const a=["Rotation","OffsetX","OffsetY"],s=o.filter((t=>t.primitiveName!==e.primitiveName&&-1===a.indexOf(t.propertyName))),c=e.primitiveName,[f,u]=U(o,c),h=(0,l.hP)(JSON.stringify(e)+u).toString(),p=(0,l.hP)(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();n.push({type:"fill",templateHash:h,materialHash:f?W(p,i,s,r):p,cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:E(c,i,"Separation",r,e.separation),scaleX:1,angle:E(c,i,"Rotation",r,(0,m.NA)(e.rotation)),offsetX:E(c,i,"OffsetX",r,(0,m.NA)(e.offsetX)),offsetY:E(c,i,"OffsetY",r,(0,m.NA)(e.offsetY))})}function w(e,t,i,o,r,n){const a=e.primitiveName,[s,c]=U(o,a),f=(0,l.hP)(JSON.stringify(e)+c).toString();n.push({type:"fill",templateHash:f,materialHash:s?W(f,i,o,r):f,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function I(e,t,i,o,r,n,a,s){const c=e.primitiveName,f=(0,m.NO)(e.color),u=void 0!==e.width?e.width:4,h=y(e.capStyle),p=g(e.joinStyle),d=e.miterLimit,[S,N]=U(o,c),v=(0,l.hP)(JSON.stringify(e)+N).toString();let b,k;if(t&&t.length>0){const i=t[t.length-1];if("CIMGeometricEffectDashes"===i.type&&"NoConstraint"===i.lineDashEnding){const i=(t=[...e.effects]).pop();b=i.dashTemplate,k=i.scaleDash}}n.push({type:"line",templateHash:v,materialHash:S?()=>v:v,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:E(c,i,"Color",r,f,B),width:E(c,i,"Width",r,u),cap:E(c,i,"CapStyle",r,h),join:E(c,i,"JoinStyle",r,p),miterLimit:E(c,i,"MiterLimit",r,d),referenceWidth:s,zOrder:G(e.name),dashTemplate:b,scaleDash:k})}function L(e,t,i,o,r,n,a,s){const c=(0,l.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),f=e.primitiveName,u=(0,m.NO)(e.tintColor),h=void 0!==e.width?e.width:4,p=y(e.capStyle),d=g(e.joinStyle),S=e.miterLimit,[N,v]=U(o,f),b=(0,l.hP)(JSON.stringify(e)+v).toString();n.push({type:"line",templateHash:b,materialHash:N?()=>c:c,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:E(f,i,"TintColor",r,u,B),width:E(f,i,"Width",r,h),cap:E(f,i,"CapStyle",r,p),join:E(f,i,"JoinStyle",r,d),miterLimit:E(f,i,"MiterLimit",r,S),referenceWidth:s,zOrder:G(e.name),dashTemplate:null,scaleDash:!1,url:e.url})}function A(e,t,i,o,r,n,a,s){const c=e.primitiveName,f=void 0!==e.width?e.width:4,m=y(e.capStyle),u=g(e.joinStyle),h=e.miterLimit,[p,d]=U(o,c),S=(0,l.hP)(JSON.stringify(e)+d).toString();n.push({type:"line",templateHash:S,materialHash:p?W(S,i,o,r):S,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:E(c,i,"Width",r,f),cap:E(c,i,"CapStyle",r,m),join:E(c,i,"JoinStyle",r,u),miterLimit:E(c,i,"MiterLimit",r,h),referenceWidth:s,zOrder:G(e.name),dashTemplate:null,scaleDash:!1})}function X(e,t,i,o,r,n){const a=e.markerPlacement;if(!a||"CIMMarkerPlacementInsidePolygon"!==a.type)return!1;const s=a,c=["Rotation","OffsetX","OffsetY"],f=o.filter((t=>t.primitiveName!==e.primitiveName&&-1===c.indexOf(t.propertyName))),u="url"in e?e.url:null,[h,p]=U(o,s.primitiveName),y=(0,l.hP)(JSON.stringify(e)+p).toString();let g=s.stepY,d=null,S=1;return a.shiftOddRows&&(g*=2,d=function(e){return e?2*e:0},S=.5),n.push({type:"fill",templateHash:y,materialHash:h?W(y,i,f,r):y,cim:e,materialOverrides:f,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:E(s.primitiveName,i,"StepY",r,g,d),scaleX:S,angle:E(s.primitiveName,i,"GridAngle",r,s.gridAngle),offsetX:E(s.primitiveName,i,"OffsetX",r,(0,m.NA)(s.offsetX)),offsetY:E(s.primitiveName,i,"OffsetY",r,(0,m.NA)(s.offsetY)),url:u}),!0}function z(e,t,i,o,r,a,s,c,f){var u;const h=e.primitiveName,p=(0,m.NA)(e.size);let y=(0,m.NA)(e.scaleX);const g=(0,m.NA)(e.rotation),d=(0,m.NA)(e.offsetX),S=(0,m.NA)(e.offsetY),N=e.tintColor?(0,m.NO)(e.tintColor):{r:255,g:255,b:255,a:1},v=(0,l.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),[b,k]=U(o,h),C=(0,l.hP)(JSON.stringify(e)+k).toString(),O=null!=(u=e.anchorPoint)?u:{x:0,y:0};if("width"in e){const t=e.width;let i=1;const o=a.getResource(e.url);(0,n.pC)(o)&&(i=o.width/o.height),y/=i*(p/t)}s.push({type:"marker",templateHash:C,materialHash:b?()=>v:v,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:!1,alignment:c,size:E(h,i,"Size",r,p),scaleX:E(h,i,"ScaleX",r,y),rotation:E(h,i,"Rotation",r,g),offsetX:E(h,i,"OffsetX",r,d),offsetY:E(h,i,"OffsetY",r,S),color:E(h,i,"TintColor",r,N,B),anchorPoint:{x:O.x,y:-O.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:1,markerPlacement:e.markerPlacement,url:e.url})}function J(e,t,i,o,r,n,a,l,s,c){const f=e.markerGraphics;if(!f)return;let m=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(m=t.ymax-t.ymin)}for(const u of f)if(u){const f=u.symbol;if(!f)continue;switch(f.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":Y(e,t,u,o,i,r,n,a,l,s,m,c);break;case"CIMTextSymbol":$(e,t,u,i,o,r,n,l,s,m)}}}function $(e,t,i,o,r,n,a,s,f,u){const h=[];c.E0.findApplicableOverrides(i,r,h);const p=i.geometry;if(!("x"in p)||!("y"in p))return;const y=i.symbol,g=v(y),b=N(y.fontStyleName),k=(0,m.mA)(y.fontFamilyName);y.font={family:k,decoration:g,...b};const C=e.frame,O=p.x-.5*(C.xmin+C.xmax),P=p.y-.5*(C.ymin+C.ymax),M=e.size/u,x=e.primitiveName,w=(0,m.NA)(y.height)*M,I=(0,m.NA)(y.angle),L=((0,m.NA)(y.offsetX)+O)*M,A=((0,m.NA)(y.offsetY)+P)*M,X=(0,m.NO)(c.B$.getFillColor(y));let z=(0,m.NO)(c.B$.getStrokeColor(y)),J=c.B$.getStrokeWidth(y);J||(z=(0,m.NO)(c.B$.getFillColor(y.haloSymbol)),J=y.haloSize*M);const[$,Y]=U(r,x),H=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),F=(0,l.hP)(JSON.stringify(i)+H+Y).toString(),R=E(i.primitiveName,o,"TextString",n,i.textString,m.X3,y.textCase),{fontStyleName:G}=y,B=k+(G?"-"+G.toLowerCase():"-regular"),W=B;a.push({type:"text",templateHash:F,materialHash:$||"function"==typeof R||R.match(/\[(.*?)\]/)?(e,t,i)=>W+"-"+(0,m.hf)(R,e,t,i):W+"-"+(0,l.hP)(R),cim:y,materialOverrides:null,colorLocked:e.colorLocked,effects:t,alignment:s,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:B,decoration:g,weight:E(x,o,"Weight",n,b.weight),style:E(x,o,"Size",n,b.style),size:E(x,o,"Size",n,w),angle:E(x,o,"Rotation",n,I),offsetX:E(x,o,"OffsetX",n,L),offsetY:E(x,o,"OffsetY",n,A),horizontalAlignment:d(y.horizontalAlignment),verticalAlignment:S(y.verticalAlignment),text:R,color:X,outlineColor:z,outlineSize:J,referenceSize:f,sizeRatio:1,markerPlacement:e.markerPlacement})}function Y(e,t,i,o,r,n,a,s,h,p,y,g){const d=i.symbol,S=d.symbolLayers;if(!S)return;if(g)return void F(e,t,i,r,o,n,a,s,h,p,y);let N=S.length;if(j(S))return void H(e,i,S,o,r,n,a,h,p,y);const v=u.j.applyEffects(d.effects,i.geometry);if(v)for(;N--;){const g=S[N];if(g&&!1!==g.enable)switch(g.type){case"CIMSolidFill":case"CIMSolidStroke":{var b;const s=u.j.applyEffects(g.effects,v),d=(0,f.bk)(s);if(!d)continue;const[S,N,k]=(0,f.UV)(d,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),C="CIMSolidFill"===g.type,O={type:"sdf",geom:s,asFill:C},P=e.primitiveName,M=null!=(b=(0,m.NA)(e.size))?b:10,x=(0,m.NA)(e.rotation),w=(0,m.NA)(e.offsetX),I=(0,m.NA)(e.offsetY),L=g.path,A=g.primitiveName,X=(0,m.NO)(C?c.B$.getFillColor(g):c.B$.getStrokeColor(g)),z=C?{r:0,g:0,b:0,a:0}:(0,m.NO)(c.B$.getStrokeColor(g)),J=c.B$.getStrokeWidth(g);if(!C&&!J)break;let $=!1,Y="";for(const e of o)e.primitiveName!==A&&e.primitiveName!==P||(void 0!==e.value?Y+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&($=!0));const H=JSON.stringify({...e,markerGraphics:null}),F=(0,l.hP)(JSON.stringify(O)+L).toString(),R={type:"marker",templateHash:(0,l.hP)(JSON.stringify(i)+JSON.stringify(g)+H+Y).toString(),materialHash:$?()=>F:F,cim:O,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:h,anchorPoint:{x:N,y:k},isAbsoluteAnchorPoint:!1,size:E(e.primitiveName,r,"Size",n,M),rotation:E(e.primitiveName,r,"Rotation",n,x),offsetX:E(e.primitiveName,r,"OffsetX",n,w),offsetY:E(e.primitiveName,r,"OffsetY",n,I),scaleX:1,frameHeight:y,rotateClockwise:e.rotateClockwise,referenceSize:p,sizeRatio:S,color:E(A,r,"Color",n,X,B),outlineColor:E(A,r,"Color",n,z,B),outlineWidth:E(A,r,"Width",n,J),markerPlacement:e.markerPlacement,path:L};a.push(R);break}default:F(e,t,i,r,o,n,a,s,h,p,y)}}}function H(e,t,i,o,r,n,a,s,u,h){const p=t.geometry,y=i[0],g=i[1],d=(0,f.bk)(p);if(!d)return;const[S,N,v]=(0,f.UV)(d,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),b={type:"sdf",geom:p,asFill:!0},k=e.primitiveName,C=(0,m.NA)(e.size),O=(0,m.NA)(e.rotation),P=(0,m.NA)(e.offsetX),M=(0,m.NA)(e.offsetY),x=g.path,w=g.primitiveName,I=y.primitiveName,L=(0,m.NO)(c.B$.getFillColor(g)),A=(0,m.NO)(c.B$.getStrokeColor(y)),X=c.B$.getStrokeWidth(y);let z=!1,J="";for(const l of o)l.primitiveName!==w&&l.primitiveName!==I&&l.primitiveName!==k||(void 0!==l.value?J+=`-${l.primitiveName}-${l.propertyName}-${JSON.stringify(l.value)}`:l.valueExpressionInfo&&(z=!0));const $=JSON.stringify({...e,markerGraphics:null}),Y=(0,l.hP)(JSON.stringify(b)+x).toString(),H={type:"marker",templateHash:(0,l.hP)(JSON.stringify(t)+JSON.stringify(g)+JSON.stringify(y)+$+J).toString(),materialHash:z?()=>Y:Y,cim:b,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:N,y:v},isAbsoluteAnchorPoint:!1,size:E(e.primitiveName,r,"Size",n,C),rotation:E(e.primitiveName,r,"Rotation",n,O),offsetX:E(e.primitiveName,r,"OffsetX",n,P),offsetY:E(e.primitiveName,r,"OffsetY",n,M),scaleX:1,frameHeight:h,rotateClockwise:e.rotateClockwise,referenceSize:u,sizeRatio:S,color:E(w,r,"Color",n,L,B),outlineColor:E(I,r,"Color",n,A,B),outlineWidth:E(I,r,"Width",n,X),markerPlacement:e.markerPlacement,path:x};a.push(H)}function F(e,t,i,o,r,n,s,f,u,h,p){const y=R(e,i);let g=[];const d=["Rotation","OffsetX","OffsetY"];g=r.filter((t=>t.primitiveName!==e.primitiveName||-1===d.indexOf(t.propertyName)));let S="";for(const a of r)void 0!==a.value&&(S+=`-${a.primitiveName}-${a.propertyName}-${JSON.stringify(a.value)}`);const[N,v,b]=c.B$.getTextureAnchor(y,f),k=e.primitiveName,C=(0,m.NA)(e.rotation),O=(0,m.NA)(e.offsetX),P=(0,m.NA)(e.offsetY),M=(0,l.hP)(JSON.stringify(y)+S).toString(),x={type:"marker",templateHash:M,materialHash:0===g.length?M:W(M,o,g,n),cim:y,materialOverrides:g,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:u,anchorPoint:{x:N,y:v},isAbsoluteAnchorPoint:!1,size:e.size,rotation:E(k,o,"Rotation",n,C),offsetX:E(k,o,"OffsetX",n,O),offsetY:E(k,o,"OffsetY",n,P),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:p,rotateClockwise:e.rotateClockwise,referenceSize:h,sizeRatio:b/(0,a.F2)(e.size),markerPlacement:e.markerPlacement};s.push(x)}function R(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}function G(e){if(e&&0===e.indexOf("Level_")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function B(e){if(!e||0===e.length)return null;const t=new o.Z(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function E(e,t,i,o,r,n,a){const l=t[e];if(l){const e=l[i];if("string"==typeof e||"number"==typeof e||e instanceof Array)return n?n.call(null,e,a):e;if(null!=e&&e instanceof s.mz)return(t,i,l)=>{let s=(0,h.Z)(e,t,{$view:l},o.geometryType,i);return null!==s&&n&&(s=n.call(null,s,a)),null!==s?s:r}}return r}function W(e,t,i,o){for(const r of i)if(r.valueExpressionInfo){const e=t[r.primitiveName]&&t[r.primitiveName][r.propertyName];e instanceof s.mz&&(r.fn=(t,i,r)=>(0,h.Z)(e,t,{$view:r},o.geometryType,i))}return(t,o,r)=>{for(const e of i)e.fn&&(e.value=e.fn(t,o,r));return(0,l.hP)(e+c.E0.buildOverrideKey(i)).toString()}}function T(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return c.E0.applyOverrides(i,t),i}function U(e,t){let i=!1,o="";for(const r of e)r.primitiveName===t&&(void 0!==r.value?o+=`-${r.primitiveName}-${r.propertyName}-${JSON.stringify(r.value)}`:r.valueExpressionInfo&&(i=!0));return[i,o]}function D(e,t,i){if(e&&t)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const o=e.symbolLayers;if(!o)return;for(const e of o)switch(e.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in e&&e.url&&i.push(t.fetchResource(e.url,null));break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)continue;for(const e of o)if(e){const o=e.symbol;o&&D(o,t,i)}}}}}}const j=e=>e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&!e[0].effects&&!e[1].effects},92262:function(e,t,i){i.d(t,{j:function(){return s}});var o=i(64316),r=i(9954),n=i(23854),a=i(21032);const l=96/72;class s{static executeEffects(e,t){const i=(0,r.GP)(t),o=l;let s=new n.M(i);for(const r of e){const e=(0,a.h)(r);e&&(s=e.execute(s,r,o,!0))}return s}static next(e){const t=e.next();return(0,r.wp)(t),t}static applyEffects(e,t){if(!e)return t;let i=new n.M(t);for(const o of e){const e=(0,a.h)(o);e&&(i=e.execute(i,o,1,!1))}let r,l=null;for(;r=i.next();)l?(0,o.l9)(l)?(0,o.l9)(r)&&l.paths.push(...r.paths):(0,o.oU)(l)&&(0,o.oU)(r)&&l.rings.push(...r.rings):l=r;return l}}},81589:function(e,t,i){i.d(t,{Z:function(){return a}});var o=i(25585),r=i(87441),n=i(58798);function a(e,t,i,o,n){const a=e.referencesGeometry()&&n?s(t,o,n):t,l=e.repurposeFeature(a);try{return e.evaluate({...i,$feature:l})}catch(c){return r.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const l=new Map;function s(e,t,i){const{transform:o,hasZ:r,hasM:n}=i;l.has(t)||l.set(t,c(t));const a=l.get(t)(e.geometry,o,r,n);return{...e,geometry:a}}function c(e){const t={};switch(e){case"esriGeometryPoint":return(e,i,o,r)=>(0,n.U1)(i,t,e,o,r);case"esriGeometryPolygon":return(e,i,o,r)=>(0,n.Ie)(i,t,e,o,r);case"esriGeometryPolyline":return(e,i,o,r)=>(0,n.G6)(i,t,e,o,r);case"esriGeometryMultipoint":return(e,i,o,r)=>(0,n.J9)(i,t,e,o,r);default:return r.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new o.Z("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}}}]);