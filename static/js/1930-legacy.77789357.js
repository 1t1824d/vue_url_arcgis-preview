"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[1930],{5246:function(e,t,r){r.d(t,{XO:function(){return n},pJ:function(){return i}});r(35837),r(41539),r(74916),r(4723),r(15306),r(92222);function n(e){return e=e||globalThis.location.hostname,l.some((function(t){var r;return null!=(null==(r=e)?void 0:r.match(t))}))}function i(e,t){return e&&(t=t||globalThis.location.hostname)?null!=t.match(a)||null!=t.match(o)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(s)||null!=t.match(u)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}var a=/^devext.arcgis.com$/,s=/^qaext.arcgis.com$/,o=/^[\w-]*\.mapsdevext.arcgis.com$/,u=/^[\w-]*\.mapsqa.arcgis.com$/,l=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,a,s,/^jsapps.esri.com$/,o,u]},59040:function(e,t,r){r.d(t,{i:function(){return o}});var n=r(76133),i=r(92751),a=r(9954),s=r(21032),o=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"getPlacement",value:function(e,t,r){var n=(0,s.W)(t);if(!n)return null;var i=(0,a.GP)(e);return n.execute(i,t,r)}}]),e}()},34898:function(e,t,r){r.d(t,{_:function(){return I}});var n=r(23796),i=r(76133),a=r(92751),s=(r(51532),r(41539),r(78783),r(33948),r(54747),r(70189),r(58515),r(7014),r(12744)),o=(r(75046),r(89783),r(92963)),u=r(63235),l=r(49026),c=r(11047),h=(r(65125),r(48675),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(29135),r(44197),new Map);function f(e,t,r){var n=h.get(e),i=n.indicesPerRecord,a=n.multiplier,s=n.verticesPerRecord;return{recordBytes:r*o.XJ*Uint32Array.BYTES_PER_ELEMENT,indexBytes:a*i*r*Uint32Array.BYTES_PER_ELEMENT,vertexBytes:a*s*r*t}}h.set(l.LW.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4}),h.set(l.LW.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8}),h.set(l.LW.FILL,{multiplier:1,indicesPerRecord:10,verticesPerRecord:10}),h.set(l.LW.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4}),h.set(l.LW.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});var v=r(73761),d=function(){function e(t,r,n){(0,i.Z)(this,e),this._start={index:0,vertex:0};var a=f(t,r,n),s=r/4;this.geometryType=t,this._records=new v.Z(Int32Array,a.recordBytes),this._indices=new v.Z(Uint32Array,a.indexBytes),this._vertices=new v.Z(Uint32Array,a.vertexBytes),this._metrics=new v.Z(Float32Array,0),this._strideInt=s}return(0,a.Z)(e,[{key:"serialize",value:function(e){var t=this._records.buffer(),r=this._indices.buffer(),n=this._vertices.buffer(),i=this._metrics.length?this._metrics.buffer():null,a=4*this._strideInt;return e.push(t,r,n),{stride:a,records:t,indices:r,vertices:n,metrics:i}}},{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",get:function(){return this._records.length/o.XJ}},{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},{key:"vertexWriter",get:function(){return this._vertices}},{key:"metricWriter",get:function(){return this._metrics}},{key:"vertexEnsureSize",value:function(e){this._vertices.ensureSize(e)}},{key:"indexEnsureSize",value:function(e){this._indices.ensureSize(e)}},{key:"recordStart",value:function(){this._start.index=this._indices.length,this._start.vertex=this._vertices.length}},{key:"recordEnd",value:function(e,t,r,n,i,a,s,o){this._records.push(e),this._records.push(t),this._records.push(r),this._records.push(n),this._records.push(i),this._records.push(a),this._records.push(s),this._records.writeF32(o)}},{key:"writeIndex",value:function(e){this._indices.push(e)}},{key:"writeVertex",value:function(e){this._vertices.push(e)}},{key:"writeVertexF32",value:function(e){this._vertices.writeF32(e)}},{key:"copyLastFrom",value:function(e,t,r){for(var n=e._records.length-o.XJ,i=e._records.getValue(n),a=e._records.getValue(n+1),s=e._records.getValue(n+2),u=e._records.getValue(n+4),l=e._records.getValue(n+6),c=e._records.getValue(n+7),h=this._vertices.length,f=(e._start.vertex-this._vertices.length)/this._strideInt,v=this._indices.length,d=this.vertexCount,m=e._start.index;m!==e._indices.length;m++){var _=e._indices.getValue(m);this._indices.push(_-f)}for(var p=e._start.vertex;p!==e._vertices.length;p++){var y=e._vertices.getValue(p);this._vertices.push(y)}for(var x=h;x<=this._vertices.length;x+=this._strideInt)this._vertices.i1616Add(x,t,r);this._records.push(i),this._records.push(a),this._records.push(s),this._records.push(v),this._records.push(u),this._records.push(d),this._records.push(l),this._records.push(c)}}]),e}(),m=r(5250),_=1,p=2,y=4,x=8,g=16,k=32,w=64,M=128;function b(e){switch(e){case _:case x:case k:return-1;case p:case w:return 0;case y:case g:case M:return 1}}function Z(e){switch(e){case _:case p:case y:return-1;case x:case g:return 0;case k:case w:case M:return 1}}var L=_|x|k,S=y|g|M,W=_|p|y,z=k|w|M,I=function(){function e(t,r,n,a,s){(0,i.Z)(this,e),this._hasAggregate=!1,this.hasRecords=!1,this._data={self:new Map,neighbors:new Array},this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,sortKey:0,id:0,materialKey:0,indexStart:0,vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0},this.hint=r,this.tileKey=t,this._hasAggregate=a,this._pixelBufferEnabled=s,this._strideOptions=n}return(0,a.Z)(e,[{key:"hasAggregates",get:function(){return this._hasAggregate}},{key:"hasPixelBufferEnabled",get:function(){return this._pixelBufferEnabled}},{key:"serialize",value:function(e){var t=this,r=[];return r.push(this._serializeTileVertexData(this.tileKey,this.tileKey,this._data.self)),this._data.neighbors.forEach((function(n,i){var a=1<<i,o=b(a),u=Z(a),l=(0,m.M)(new s.Z(t.tileKey),o,u,e),c=t._serializeTileVertexData(t.tileKey,l.id,n.vertexData);c.message.bufferIds=n.displayIds,r.push(c)})),r}},{key:"_serializeTileVertexData",value:function(e,t,r){var i,a,s,o,u,c,h=new Array;return{message:{tileKeyOrigin:e,tileKey:t,data:(i={},(0,n.Z)(i,l.LW.MARKER,null==(a=r.get(l.LW.MARKER))?void 0:a.serialize(h)),(0,n.Z)(i,l.LW.FILL,null==(s=r.get(l.LW.FILL))?void 0:s.serialize(h)),(0,n.Z)(i,l.LW.LINE,null==(o=r.get(l.LW.LINE))?void 0:o.serialize(h)),(0,n.Z)(i,l.LW.TEXT,null==(u=r.get(l.LW.TEXT))?void 0:u.serialize(h)),(0,n.Z)(i,l.LW.LABEL,null==(c=r.get(l.LW.LABEL))?void 0:c.serialize(h)),i)},transferList:h}}},{key:"featureStart",value:function(e,t){this._current.insertAfter=e,this._current.sortKey=t}},{key:"featureEnd",value:function(){}},{key:"recordStart",value:function(e,t,r,n){this._current.writer=this._getVertexWriter(r),this._current.overlaps=0,this._current.indexStart=this._current.writer.indexCount,this._current.vertStart=this._current.writer.vertexCount,this._current.bufferingEnabled=n,this._current.id=e,this._current.materialKey=t,this._current.geometryType=r,this._current.isDotDensity=!1,this._current.writer.recordStart()}},{key:"recordCount",value:function(){return this._current.writer.recordCount}},{key:"vertexCount",value:function(){return this._current.writer.vertexCount}},{key:"indexCount",value:function(){return this._current.writer.indexCount}},{key:"vertexEnsureSize",value:function(e){this._current.writer.vertexEnsureSize(e)}},{key:"indexEnsureSize",value:function(e){this._current.writer.indexEnsureSize(e)}},{key:"vertexBounds",value:function(e,t,r,n){this._current.bufferingEnabled&&this._addOverlap(e,t,r,n)}},{key:"vertexWrite",value:function(e){this._current.writer.writeVertex(e)}},{key:"vertexWriteF32",value:function(e){this._current.writer.writeVertexF32(e)}},{key:"vertexEnd",value:function(){}},{key:"vertexWriter",value:function(){return this._current.writer.vertexWriter}},{key:"indexWrite",value:function(e){this._current.writer.writeIndex(e)}},{key:"indexWriter",value:function(){return this._current.writer.indexWriter}},{key:"metricWriter",value:function(){return this._current.writer.metricWriter}},{key:"metricStart",value:function(e,t,r,n,i,a,s,o){this._current.writer=this._getVertexWriter(l.LW.LABEL);var c=this._current.writer.metricWriter;c.push((0,u.jL)(e)),c.push(t),c.push(r),c.push(n),c.push(i),c.push(a),c.push(s),c.push(o),c.push(255),this._current.metricBoxLenPointer=c.push(0)}},{key:"metricEnd",value:function(){var e=this._current.writer.metricWriter;0===e.getValue(this._current.metricBoxLenPointer)&&e.seek(e.length-10)}},{key:"metricBoxWrite",value:function(e,t,r,n){var i=this._current.writer.metricWriter;i.incr(this._current.metricBoxLenPointer),i.push(0),i.push(0),i.push(e),i.push(t),i.push(r),i.push(n)}},{key:"recordEnd",value:function(){var e=this._current.indexStart,t=this._current.writer.indexCount;if(e===t)return!1;this.hasRecords=!0;var r=t-e,n=this._current.vertStart,i=this._current.writer.vertexCount-n;if(this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,e,r,n,i,this._current.sortKey),!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===l.LW.LABEL)return!0;for(var a=this._current.writer,s=0;s<8;s++){var u=1<<s;if(this._current.overlaps&u){this._data.neighbors[s]||(this._data.neighbors[s]={vertexData:new Map,displayIds:new Set});var h=this._data.neighbors[s],f=this._current.geometryType;if(!h.vertexData.has(f)){var v=(0,c.$_)(f,this._strideOptions).geometry,m=new d(f,v,o.Ip);h.vertexData.set(f,m)}var _=h.vertexData.get(this._current.geometryType),p=8,y=512*-b(u)*p,x=512*-Z(u)*p;_.copyLastFrom(a,y,x),h.displayIds.add(this._current.id)}}return!0}},{key:"_addOverlap",value:function(e,t,r,n){var i=255^((e<0+r?S:e>=o.I_-r?L:S|L)|(t<0+n?z:t>=o.I_-n?W:z|W));this._current.overlaps|=i}},{key:"_getVertexWriter",value:function(e){if(!this._data.self.has(e)){var t=this._data.self,r=(0,c.$_)(e,this._strideOptions).geometry;t.set(e,new d(e,r,this.hint.records))}return this._data.self.get(e)}}]),e}()},76883:function(e,t,r){r.d(t,{j:function(){return q}});var n=r(16198),i=r(62032),a=r(76133),s=r(92751),o=(r(78975),r(51532),r(41539),r(78783),r(33948),r(74916),r(4723),r(35425),r(27092)),u=r(24446),l=r(33223),c=r(63235),h=r(2394),f=r(99418),v=r(49161),d=(r(44914),r(25585)),m=r(87441),_=r(14937),p=r(597),y=r(52258),x=r(95195),g=r(92963),k=r(49026),w=r(14621),M=r(72239),b=r(55094),Z=r(57521);function L(e,t){return e[t+1]}function S(e){return e.length-1}function W(e){for(var t=0,r=0;r<S(e);r++)t+=z(e,r);return t}function z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=L(e,t),i=(0,h.Z)(n,2),a=i[0],s=i[1];return Math.sqrt(a*a+s*s)*r}var I=function(){function e(t,r,n,i,s){(0,a.Z)(this,e),this._segments=t,this._index=r,this._distance=n,this._xStart=i,this._yStart=s,this._done=!1}return(0,s.Z)(e,[{key:"clone",value:function(){return new e(this._segments,this._index,this._distance,this.xStart,this.yStart)}},{key:"equals",value:function(e){return this._index===e._index||e._index===this._index-1&&(0===this._distance||1===e._distance)||e._index===this._index+1&&(1===this._distance||0===e._distance)}},{key:"leq",value:function(e){return this._index<e._index||this._index===e._index&&this._distance<=e._distance}},{key:"geq",value:function(e){return this._index>e._index||this._index===e._index&&this._distance>=e._distance}},{key:"_segment",get:function(){return this._segments[this._index+1]}},{key:"angle",get:function(){var e=this.dy,t=(0*e+-1*-this.dx)/(1*this.length),r=Math.acos(t);return e>0&&(r=2*Math.PI-r),r}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+this.distance*this.dx}},{key:"y",get:function(){return this.yStart+this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},{key:"xMidpoint",get:function(){return this.xStart+.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){var e=this.dx,t=this.dy;return Math.sqrt(e*e+t*t)}},{key:"remainingLength",get:function(){return this.length*(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},{key:"done",get:function(){return this._done}},{key:"hasPrev",value:function(){return this._index-1>=0}},{key:"hasNext",value:function(){return this._index+1<S(this._segments)}},{key:"next",value:function(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}},{key:"prev",value:function(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}},{key:"_seekBackwards",value:function(e,t){var r=this.backwardLength;if(e<=r)return this._distance=(r-e)/this.length,this;for(var n=this.backwardLength;this.prev();){if(n+this.length>e)return this._seekBackwards(e-n);n+=this.length}return this._distance=0,t?this:null}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e<0)return this._seekBackwards(Math.abs(e),t);if(e<=this.remainingLength)return this._distance=(this.backwardLength+e)/this.length,this;for(var r=this.remainingLength;this.next();){if(r+this.length>e)return this.seek(e-r,t);r+=this.length}return this._distance=1,t?this:null}}],[{key:"create",value:function(t){return new e(t,0,0,t[0][0],t[0][1])}}]),e}();function T(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=W(e),a=I.create(e),s=i/2;if(!n)return a.seek(s),void r(a.clone(),0,s+0*t,i);var o=Math.max((i-t)/2,0),u=Math.floor(o/t),l=s-u*t;a.seek(l);for(var c=-u;c<=u;c++)a.x<512&&a.x>=0&&a.y<512&&a.y>=0&&r(a.clone(),c,s+c*t,i),a.seek(t)}function P(e,t){for(var r=t,n=0;n<e.length;n++){var i=e[n],a=[];a.push(i[0]);for(var s=1;s<i.length;s++){var o=(0,h.Z)(a[s-1],2),u=o[0],l=o[1];u+=i[s][0],l+=i[s][1],a.push([u,l])}R(a,r);var c=[];c.push(a[0]);for(var f=1;f<a.length;f++){var v=(0,h.Z)(a[f-1],2),d=v[0],m=v[1],_=(0,h.Z)(a[f],2),p=_[0],y=_[1],x=Math.round(p-d),g=Math.round(y-m);c.push([x,g])}e[n]=c,i=c}return e}function R(e,t){var r=1e-6;if(!(t<=0)){var n=e.length;if(!(n<3)){var i=[],a=0;i.push(0);for(var s=1;s<n;s++)a+=(0,Z.TK)(e[s],e[s-1]),i.push(a);t=Math.min(t,.2*a);var o=[];o.push(e[0][0]),o.push(e[0][1]);var u=e[n-1][0],l=e[n-1][1],c=(0,Z.lu)([0,0],e[0],e[1]);(0,Z.Fv)(c),e[0][0]+=t*c[0],e[0][1]+=t*c[1],(0,Z.lu)(c,e[n-1],e[n-2]),(0,Z.Fv)(c),e[n-1][0]+=t*c[0],e[n-1][1]+=t*c[1];for(var h=1;h<n;h++)i[h]+=t;i[n-1]+=t;for(var f=.5*t,v=1;v<n-1;v++){for(var d=0,m=0,_=0,p=v-1;p>=0&&!(i[p+1]<i[v]-f);p--){var y=f+i[p+1]-i[v],x=i[p+1]-i[p],g=i[v]-i[p]<f?1:y/x;if(Math.abs(g)<r)break;var k=g*g,w=g*y-.5*k*x,M=g*x/t,b=e[p+1],L=e[p][0]-b[0],S=e[p][1]-b[1];d+=M/w*(b[0]*g*y+.5*k*(y*L-x*b[0])-k*g*x*L/3),m+=M/w*(b[1]*g*y+.5*k*(y*S-x*b[1])-k*g*x*S/3),_+=M}for(var W=v+1;W<n&&!(i[W-1]>i[v]+f);W++){var z=f-i[W-1]+i[v],I=i[W]-i[W-1],T=i[W]-i[v]<f?1:z/I;if(Math.abs(T)<r)break;var P=T*T,R=T*z-.5*P*I,F=T*I/t,C=e[W-1],E=e[W][0]-C[0],A=e[W][1]-C[1];d+=F/R*(C[0]*T*z+.5*P*(z*E-I*C[0])-P*T*I*E/3),m+=F/R*(C[1]*T*z+.5*P*(z*A-I*C[1])-P*T*I*A/3),_+=F}o.push(d/_),o.push(m/_)}o.push(u),o.push(l);for(var B=0,V=0;B<n;B++)e[B][0]=o[V++],e[B][1]=o[V++]}}}var F=r(4611),C=m.Z.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mapview-labeling";return C.error(new d.Z(t,e))},A=1,B=0,V=4;function D(e,t){var r=!!e.minScale&&t.scaleToZoom(e.minScale)||0;return(0,_.uZ)(r,0,25.5)}function O(e,t){var r=!!e.maxScale&&t.scaleToZoom(e.maxScale)||255;return(0,_.uZ)(r,0,25.5)}function G(e){var t=new Map;return function(r){return t.has(r)||t.set(r,e(r)),t.get(r)}}var U=G((function(e){var t=0;if(0===e)return 1/0;for(;!(e%2);)t++,e/=2;return t})),K=function(e){return Math.floor(127*e+127)},J=function(e){return Math.floor(10*e)},X=function(e){return Math.round(e*(254/360))},N=function(e){(0,f.Z)(r,e);var t=(0,v.Z)(r);function r(e,n,i,s){var o,u,l,c;(0,a.Z)(this,r),o=t.call(this,e,i.font.size,i.haloSize||0,i.font.size,i.color&&(0,x.aH)(i.color)||0,i.haloColor&&(0,x.aH)(i.haloColor)||0,i.horizontalAlignment,i.verticalAlignment,(0,b.N)(n.labelPlacement)?1:0,i.font.decoration,!1,i.angle||0,i.xoffset,i.yoffset,i.lineWidth,i.lineHeight,null,null,null,null,null),o._outLineLabelAngle=0,o._refPlacementPadding=0,o._refPlacementDirX=0,o._refPlacementDirY=0,o._refOffsetX=0,o._refOffsetY=0,o._zoomLevel=0,o.geometryType=k.LW.LABEL,o._allowOverrun=null!=(u=n.allowOverrun)&&u,o._repeatLabel=null==(l=n.repeatLabel)||l,o._labelPosition=null!=(c=n.labelPosition)?c:"curved";var f=D(n,s),v=O(n,s),d=n.labelPlacement,m=(0,y.qv)(d),_=(0,h.Z)(m,2),w=_[0],Z=_[1];o._xAlignD=w,o._yAlignD=Z,o._minZoom=f,o._maxZoom=v,o._refPlacementPadding=(0,p.F2)(i.haloSize)+g.Iw,o._repeatLabelDistance=n.repeatLabelDistance?(0,p.F2)(n.repeatLabelDistance):128;var L=M.Gq.load(e);return L.sdf=!0,o._materialKey=L.data,o}return(0,s.Z)(r,[{key:"_shapedBox",get:function(){return(0,o.Wg)(this._shapingInfo).bounds}},{key:"setZoomLevel",value:function(e){this._zoomLevel=e}},{key:"bindReferenceTemplate",value:function(e){var t=(0,y.g)(this._xAlignD),r=(0,y.tf)(this._yAlignD);if(this._refOffsetX=0,this._refOffsetY=0,(0,o.Wi)(e))this._refSymbolAndPlacementOffset=(0,w.Jz)(0,0,K(t),K(r));else{if("circle"===e.boundsType&&(t||r)){var n=Math.sqrt(t*t+r*r);t/=n,r/=n}var i=Math.max(e.height,e.width),a=this._refPlacementPadding*V;this._refSymbolAndPlacementOffset=(0,w.Jz)(a,i,K(t),K(r)),this._referenceSize=i,this._refPlacementDirX=t,this._refPlacementDirY=r,this._refOffsetX=e.xOffset,this._refOffsetY=e.yOffset}}},{key:"_write",value:function(e,t){if(!(0,o.Wi)(this._shapingInfo)){var r=this._shapingInfo,n=t.getDisplayId(),i="esriGeometryPolygon"===t.geometryType?t.readLegacyCentroid():t.readLegacyGeometry();if(i)switch(this.current={out:e,inId:n,inShaping:r,zoomLevel:this._zoomLevel},t.geometryType){case"esriGeometryPolyline":this._placeLineLabels(i);break;case"esriGeometryPoint":case"esriGeometryPolygon":this._placePointLabels(i);break;default:E("mapview-labeling","Geometry of type ".concat(t.geometryType," is not supported"))}}}},{key:"_isVisible",value:function(e,t){var r=J(this.current.zoomLevel);return J(e)<=r&&r<=J(t)}},{key:"_placePointLabels",value:function(e){var t=this.current,r=t.out,n=t.inId,i=t.inShaping;this._writeGlyphs(r,n,e,i)}},{key:"_placeLineLabels",value:function(e){var t,r=P(e.paths,this.current.inShaping.bounds.width),n=this._placeSubdivGlyphs.bind(this),a=(this._shapedBox.width+this._repeatLabelDistance)/(1<<A),s=(0,i.Z)(r);try{for(s.s();!(t=s.n()).done;){var o=t.value;T(o,a,n,this._repeatLabel)}}catch(u){s.e(u)}finally{s.f()}}},{key:"_placeSubdivGlyphs",value:function(e,t,r,n){var i=U(t),a=this._shapedBox.width/(1<<A),s=Math.sqrt(this._repeatLabelDistance)/(1<<A),o=Math.min(r,n-r),u=Math.log2(o/(s+a/2)),l=0===t?u:Math.min(i,u),c=Math.max(this._minZoom,this.current.zoomLevel+A-l),h=this.current.zoomLevel-c,f=this._shapedBox.width/2*Math.pow(2,h);this.current.inShaping.isMultiline?0===t&&this._placeStraight(e,c):this._allowOverrun&&h<0?this._placeStraightAlong(e,this._minZoom):"parallel"===this._labelPosition?this._placeStraightAlong(e,c):"curved"===this._labelPosition&&this._placeCurved(e,c,f)}},{key:"_placeStraight",value:function(e,t){var r=this.current,n=r.out,i=r.inId,a=r.inShaping;this._writeGlyphs(n,i,e,a,t)}},{key:"_placeCurved",value:function(e,t,r){var n=this.current,i=n.out,a=n.inId;i.metricStart(a,t,e.x,e.y,0,0,0,0);var s=e.clone(),o=e.angle*(180/Math.PI)%360,u=(e.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=X(o),this._placeFirst(s,t,1),this._placeBack(e,s,t,r,1),this._placeForward(e,s,t,r,1),this._outLineLabelAngle=X(u),this._placeFirst(s,t,0),this._placeBack(e,s,t,r,0),this._placeForward(e,s,t,r,0),i.metricEnd()}},{key:"_placeStraightAlong",value:function(e,t){var r=this.current,n=r.out,i=r.inId;n.metricStart(i,t,e.x,e.y,0,0,0,0);var a=e.clone(),s=e.angle*(180/Math.PI)%360,o=(e.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=X(s),this._placeFirst(a,t,1,!0),this._outLineLabelAngle=X(o),this._placeFirst(a,t,0,!0),n.metricEnd()}},{key:"_placeBack",value:function(e,t,r,n,i){for(var a=e.clone(),s=e.backwardLength+B;a.prev()&&!(s>=n);)this._placeOnSegment(a,t,s,r,-1,i),s+=a.length+B}},{key:"_placeForward",value:function(e,t,r,n,i){for(var a=e.clone(),s=e.remainingLength+B;a.next()&&!(s>=n);)this._placeOnSegment(a,t,s,r,1,i),s+=a.length+B}},{key:"_placeFirst",value:function(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e,o=this.current.inShaping,u=o.glyphs,l=this.current.zoomLevel,c=this.current,h=c.out,f=c.inId,v=(0,i.Z)(u);try{for(v.s();!(n=v.n()).done;){var d=n.value,m=d.x>o.bounds.x?r:1-r,_=m*e.remainingLength+(1-m)*e.backwardLength,p=Math.abs(d.x+d.width/2-o.bounds.x),y=Math.max(0,l+Math.log2(p/(_+B))),x=Math.max(t,a?0:y);if(d.maxZoom=25,d.angle=e.angle+(1-r)*Math.PI,d.minZoom=x,this._writeGlyph(h,f,s.x,s.y,d),r&&this._isVisible(d.minZoom,d.maxZoom)){var g=d.bounds;h.metricBoxWrite(g.center[0],g.center[1],g.width,g.height)}}}catch(k){v.e(k)}finally{v.f()}}},{key:"_placeOnSegment",value:function(e,t,r,n,a,s){var o,u=this.current.inShaping.glyphs,l=this.current,c=l.out,h=l.inId,f=this.current.inShaping,v=this.current.zoomLevel,d=e.dx/e.length,m=e.dy/e.length,_={x:e.x+r*-a*d,y:e.y+r*-a*m},p=(0,i.Z)(u);try{for(p.s();!(o=p.n()).done;){var y=o.value,x=y.x>f.bounds.x?s:1-s;if(x&&1===a||!x&&-1===a){var g=Math.abs(y.x+y.width/2-f.bounds.x),k=Math.max(0,v+Math.log2(g/r)-.1),w=Math.max(n,v+Math.log2(g/(r+e.length+B)));if(0!==k&&(y.angle=e.angle+(1-s)*Math.PI,y.minZoom=w,y.maxZoom=k,this._writeGlyph(c,h,_.x,_.y,y),s&&this._isVisible(y.minZoom,y.maxZoom))){var M=y.bounds,b=e.x-t.x,Z=e.y-t.y;c.metricBoxWrite(M.center[0]+b,M.center[1]+Z,M.width,M.height)}}}}catch(L){p.e(L)}finally{p.f()}}},{key:"_writeGlyphs",value:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._minZoom;if(!(r.x<0||r.x>=512||r.y<0||r.y>=512)){var s,o=r.x+this._refOffsetX,u=r.y-this._refOffsetY,l=(0,i.Z)(n.glyphs);try{for(l.s();!(s=l.n()).done;){var c=s.value;c.minZoom=a,c.maxZoom=this._maxZoom,this._writeGlyph(e,t,o,u,c)}}catch(d){l.e(d)}finally{l.f()}var h=this._refPlacementDirX,f=this._refPlacementDirY,v=n.boundsT;e.metricStart(t,a,o,u,h,f,this._referenceSize,this._materialKey),e.metricBoxWrite(v.center[0],v.center[1],v.width,v.height),e.metricEnd()}}},{key:"_writeVertexCommon",value:function(e,t,r,n){var i=this._color,a=this._haloColor,s=(0,w.Jz)(0,0,this._size,this._haloSize),o=Math.max(n.minZoom,this._minZoom),u=Math.min(n.maxZoom,this._maxZoom),l=(0,w.Jz)(J(o),J(u),this._outLineLabelAngle,0);e.vertexWrite(r),e.vertexWrite(t),e.vertexWrite(i),e.vertexWrite(a),e.vertexWrite(s),e.vertexWrite(this._refSymbolAndPlacementOffset),e.vertexWrite(l)}}],[{key:"fromLabelClass",value:function(e,t){if("esriServerLinePlacementCenterAlong"===e.labelPlacement){var n=e.symbol;n.xoffset=0,n.yoffset=0,n.angle=0,n.font.decoration="none"}return new r(e.materialKey,e,e.symbol,t)}}]),r}(F.Z),H=r(19383),Y=r(16466),q=function(){function e(t,r,n){(0,a.Z)(this,e),this._loadPromise=(0,l.j)(),this._geometryType=t,this._idField=r,this._templateStore=n}return(0,s.Z)(e,[{key:"update",value:function(e,t){(0,o.pC)(e.mesh.labels)&&(this._labelTemplates=this._createLabelTemplates(e.mesh.labels,t)),this._schema=e}},{key:"_createLabelTemplates",value:function(e,t){var r=new Map;if("simple"===e.type){var n,a=(0,i.Z)(e.classes);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=N.fromLabelClass(s,t);r.set(s.index,o)}}catch(d){a.e(d)}finally{a.f()}return r}for(var u in e.classes){var l,c=e.classes[u],h=(0,i.Z)(c);try{for(h.s();!(l=h.n()).done;){var f=l.value,v=N.fromLabelClass(f,t);r.set(f.index,v)}}catch(d){h.e(d)}finally{h.f()}}return r}},{key:"templates",get:function(){return this._templateStore}},{key:"analyze",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r,n,a,s,l,h){var f,v,d,m,_,p,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(0,u.Hc)(h)){e.next=2;break}return e.abrupt("return");case 2:if(e.t0="dictionary"===n.type,!e.t0){e.next=7;break}return e.next=6,n.analyze(this._idField,t.copy(),r,s,l,h);case 6:f=e.sent;case 7:for(v=0;t.next();)if(d=void 0,d=f?f[v++]:(0,o.pC)(a)&&(0,c.nE)(t.getDisplayId())&&1!==t.readAttribute("cluster_count")?a.match(this._idField,t,this._geometryType,s,l):n.match(this._idField,t,this._geometryType,s,l),t.setGroupId(d),(0,Y.Sl)(d)){m=this._templateStore.getDynamicTemplateGroup(d),_=(0,i.Z)(m);try{for(_.s();!(p=_.n()).done;)y=p.value,y&&y.analyze&&y.analyze(this._templateStore,t,s,l)}catch(x){_.e(x)}finally{_.f()}}return e.next=11,this._loadPromise;case 11:return e.abrupt("return",this._templateStore.finalize(h));case 12:case"end":return e.stop()}}),e,this)})));function t(t,r,n,i,a,s,o){return e.apply(this,arguments)}return t}()},{key:"analyzeGraphics",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r,n,a,s,o){var l,c,h,f,v,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(0,u.Hc)(o)){e.next=2;break}return e.abrupt("return");case 2:if(l=t.getCursor(),e.t0=n,!e.t0){e.next=7;break}return e.next=7,n.analyze(this._idField,l.copy(),r,a,s,o);case 7:if(!l.next()){e.next=13;break}if(c=l.getGroupId(),null!=c&&-1!==c||(c=n.match(this._idField,l,l.geometryType,a,s),l.setGroupId(c)),(0,Y.Sl)(c)){h=this._templateStore.getDynamicTemplateGroup(c),f=(0,i.Z)(h);try{for(f.s();!(v=f.n()).done;)d=v.value,d&&d.analyze&&d.analyze(this._templateStore,l,a,s)}catch(m){f.e(m)}finally{f.f()}}l.setGroupId(c);case 11:e.next=7;break;case 13:return e.next=15,this._loadPromise;case 15:return e.abrupt("return",this._templateStore.finalize(o));case 16:case"end":return e.stop()}}),e,this)})));function t(t,r,n,i,a,s){return e.apply(this,arguments)}return t}()},{key:"writeGraphic",value:function(e,t,r){var n=t.getGroupId(),a=t.getDisplayId(),s=this._templateStore.getTemplateGroup(n);if(e.featureStart(t.insertAfter,0),null!=a){if((0,Y.Sl)(n)){var o,u=(0,i.Z)(s);try{for(u.s();!(o=u.n()).done;){var l=o.value;l&&l.bindFeature(t,null,null)}}catch(v){u.e(v)}finally{u.f()}}if(s){var c,h=(0,i.Z)(s);try{for(h.s();!(c=h.n()).done;){var f=c.value;f&&f.write(e,t,r)}}catch(v){h.e(v)}finally{h.f()}e.featureEnd()}}}},{key:"writeCursor",value:function(e,t,r,n,a,s){var u=t.getGroupId(),l=t.getDisplayId(),c=this._templateStore.getTemplateGroup(u),h=this._schema.mesh.sortKey,f=0;if((0,o.pC)(h)&&(f=null!=h.fieldIndex?t.getComputedNumericAtIndex(h.fieldIndex):null!=h.field?t.readAttribute(h.field):t.readAttribute(this._idField),f*="asc"===h.order?1:-1),e.featureStart(0,null==f||isNaN(f)?0:f),null!=l&&c){if((0,Y.Sl)(u)){var v,d=(0,i.Z)(c);try{for(d.s();!(v=d.n()).done;){var m=v.value;m.bindFeature(t,r,n)}}catch(g){d.e(g)}finally{d.f()}}var _,p=(0,i.Z)(c);try{for(p.s();!(_=p.n()).done;){var y=_.value;y.write(e,t,a)}}catch(g){p.e(g)}finally{p.f()}if((0,o.pC)(s)&&e.hasRecords){var x=s&&this._findLabelRef(c);this._writeLabels(e,t,s,x,a)}e.featureEnd()}}},{key:"_findLabelRef",value:function(e){var t,r=(0,i.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n instanceof H.Z)return n}}catch(a){r.e(a)}finally{r.f()}return null}},{key:"_writeLabels",value:function(e,t,r,n,a){var s,u=(0,i.Z)(r);try{for(u.s();!(s=u.n()).done;){var l=s.value;if((0,o.pC)(l)&&l){var c=l.glyphs,h=l.rtl,f=l.index,v=this._labelTemplates.get(f);v.setZoomLevel(a),v.bindReferenceTemplate(n),v.bindTextInfo(c,h),v.write(e,t,null)}}}catch(d){u.e(d)}finally{u.f()}}}]),e}()},39180:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(2394),i=r(76133),a=r(92751),s=r(99418),o=r(49161),u=(r(92222),r(27092)),l=r(597),c=r(55630),h=r(311),f=r(41666),v=r(38683),d=r(32503),m=r(59040),_=r(49026),p=r(14621),y=3.14159265359/180,x=8,g=function(e){return function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),e.angle=0,e.xOffset=0,e.yOffset=0,e.width=0,e.height=0,e.boundsType="square",e._anchorX=0,e._anchorY=0,e._computedWidth=0,e._computedHeight=0,e._vertexBoundsScaleX=1,e._vertexBoundsScaleY=1,e._offsets={xUpperLeft:0,yUpperLeft:0,xUpperRight:0,yUpperRight:0,xBottomLeft:0,yBottomLeft:0,xBottomRight:0,yBottomRight:0},e.geometryType=_.LW.MARKER,e}return(0,a.Z)(r,[{key:"_write",value:function(e,t,r){var n=t.getDisplayId();e.recordStart(n,this._materialKey,this.geometryType,!0),this._writeGeometry(e,t,n,r),e.recordEnd()}},{key:"_writeGeometry",value:function(e,t,r,i){var a=this;if((0,u.pC)(this._markerPlacement))return this._writePlacedMarkers(e,t,i);var s=i?(0,d.oB)((0,d.GH)(i),2):"esriGeometryPolygon"===t.geometryType?t.readCentroid():t.readGeometryForDisplay();if(!(0,u.Wi)(s)){if(s.isPoint){var o=(0,n.Z)(s.coords,2),l=o[0],c=o[1];if(!e.hasAggregates&&e.hasPixelBufferEnabled&&(l<0||l>=512||c<0||c>=512))return;return this._writeVertices(e,r,this._getPos(l,c),l,c)}s.forEachVertex((function(t,n){return a._writeVertices(e,r,a._getPos(t,n),t,n)}))}}},{key:"_writePlacedMarkers",value:function(e,t,r){var n=null!=r?r:t.readLegacyGeometryForDisplay(),i=m.i.getPlacement(n,(0,u.Wg)(this._markerPlacement),(0,l.F2)(1));if(i)for(var a=t.getDisplayId(),s=(0,v.c)(),o=(0,h.c)(),c=-128,f=640,d=i.next();null!=d;){var _=d,p=_.tx,x=_.ty;p>=c&&p<=f&&x>=c&&x<=f&&(this._applyTransformation(o,s,d.getAngle()/y),this._writeVertices(e,a,this._getPos(p,x),p,x)),d=i.next()}}},{key:"_writeVertices",value:function(e,t,r,n,i){var a=e.vertexCount();e.vertexBounds(n+this.xOffset,i-this.yOffset,this._computedWidth*this._vertexBoundsScaleX,this._computedHeight*this._vertexBoundsScaleY),e.vertexWrite(r),e.vertexWrite(this._offsetUpperLeft),e.vertexWrite(this._texUpperLeft),e.vertexWrite(this._bitestAndDistRatio),e.vertexWrite(t),e.vertexWrite(this._fillColor),e.vertexWrite(this._outlineColor),e.vertexWrite(this._sizeOutlineWidth),e.vertexWrite(this._minMaxZoom),e.vertexEnd(),e.vertexWrite(r),e.vertexWrite(this._offsetUpperRight),e.vertexWrite(this._texUpperRight),e.vertexWrite(this._bitestAndDistRatio),e.vertexWrite(t),e.vertexWrite(this._fillColor),e.vertexWrite(this._outlineColor),e.vertexWrite(this._sizeOutlineWidth),e.vertexWrite(this._minMaxZoom),e.vertexEnd(),e.vertexWrite(r),e.vertexWrite(this._offsetBottomLeft),e.vertexWrite(this._texBottomLeft),e.vertexWrite(this._bitestAndDistRatio),e.vertexWrite(t),e.vertexWrite(this._fillColor),e.vertexWrite(this._outlineColor),e.vertexWrite(this._sizeOutlineWidth),e.vertexWrite(this._minMaxZoom),e.vertexEnd(),e.vertexWrite(r),e.vertexWrite(this._offsetBottomRight),e.vertexWrite(this._texBottomRight),e.vertexWrite(this._bitestAndDistRatio),e.vertexWrite(t),e.vertexWrite(this._fillColor),e.vertexWrite(this._outlineColor),e.vertexWrite(this._sizeOutlineWidth),e.vertexWrite(this._minMaxZoom),e.vertexEnd(),e.indexWrite(a+0),e.indexWrite(a+1),e.indexWrite(a+2),e.indexWrite(a+1),e.indexWrite(a+3),e.indexWrite(a+2)}},{key:"_applyTransformation",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,c.i)(e),(0,c.t)(e,e,(0,v.f)(this.xOffset,-this.yOffset)),this.angle+r!==0&&(0,c.r)(e,e,y*(this.angle+r));var n=this._computedWidth,i=this._computedHeight,a=(this._anchorX-.5)*n,s=(this._anchorY-.5)*i;(0,f.s)(t,a,s),(0,f.t)(t,t,e),this._offsetUpperLeft=(0,p.UJ)(16*t[0],16*t[1]),this._offsets.xUpperLeft=t[0],this._offsets.yUpperLeft=t[1],(0,f.s)(t,a+n,s),(0,f.t)(t,t,e),this._offsetUpperRight=(0,p.UJ)(16*t[0],16*t[1]),this._offsets.xUpperRight=t[0],this._offsets.yUpperRight=t[1],(0,f.s)(t,a,s+i),(0,f.t)(t,t,e),this._offsetBottomLeft=(0,p.UJ)(16*t[0],16*t[1]),this._offsets.xBottomLeft=t[0],this._offsets.yBottomLeft=t[1],(0,f.s)(t,a+n,s+i),(0,f.t)(t,t,e),this._offsetBottomRight=(0,p.UJ)(16*t[0],16*t[1]),this._offsets.xBottomRight=t[0],this._offsets.yBottomRight=t[1]}},{key:"_getPos",value:function(e,t){return(0,p.UJ)(Math.round(x*e),Math.round(x*t))}}]),r}(e)}},94868:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(62032),i=r(2394),a=r(76133),s=r(92751),o=r(99418),u=r(49161),l=(r(92222),r(27092)),c=r(597),h=r(32503),f=r(59040),v=r(92963),d=r(49026),m=r(14621),_=r(72239),p=r(22910),y=8,x=function(e){return function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),e._isCIM=!1,e._vertexBoundsScale=1,e.geometryType=d.LW.TEXT,e._aux=(0,m.Jz)(0,0,e._referenceSize,e._bitset),e}return(0,s.Z)(r,[{key:"bindTextInfo",value:function(e,t){var r=this;e&&e.length?this._shapingInfo=(0,l.Po)(e,(function(e){return(0,p.Nr)(e,t,{scale:r._scale,angle:r._angle,xOffset:r._xOffset,yOffset:r._yOffset,hAlign:r._xAlignD,vAlign:r._yAlignD,maxLineWidth:Math.max(32,Math.min(r._lineWidth,512)),lineHeight:v.xm*Math.max(.25,Math.min(r._lineHeight,4)),decoration:r._decoration,isCIM:r._isCIM})})):this._shapingInfo=null}},{key:"_write",value:function(e,t,r){var n=t.getDisplayId();this._writeGeometry(e,t,n,r)}},{key:"_writeGeometry",value:function(e,t,r,n){var a=this,s=this._shapingInfo;if(!(0,l.Wi)(s)){if((0,l.pC)(this._textPlacement)){var o=null!=n?n:t.readLegacyGeometryForDisplay();return this._writePlacedText(e,r,o,s)}var u=n?(0,h.oB)((0,h.GH)(n),2):"esriGeometryPolygon"===t.geometryType?t.readCentroid():t.readGeometryForDisplay();if(!(0,l.Wi)(u)){if(u.isPoint){var c=(0,i.Z)(u.coords,2),f=c[0],v=c[1];if(!e.hasAggregates&&e.hasPixelBufferEnabled&&(f<0||f>=512||v<0||v>=512))return;return this._writeGlyphs(e,r,{x:f,y:v},s)}u.forEachVertex((function(t,n){return a._writeGlyphs(e,r,{x:t,y:n},s)}))}}}},{key:"_writePlacedText",value:function(e,t,r,n){var i=(0,l.Wg)(this._textPlacement),a=f.i.getPlacement(r,i,(0,c.F2)(1));if(a)for(var s=a.next();null!=s;){var o=s.getAngle();n.setRotation(o);var u=s.tx,h=s.ty;u<0||u>=512||h<0||h>=512||(this._writeGlyphs(e,t,{x:u,y:h},n),n.setRotation(-o)),s=a.next()}}},{key:"_writeGlyphs",value:function(e,t,r,i){var a,s=_.m2.load(this._materialKey),o=(0,m.UJ)(Math.round(y*r.x),Math.round(y*r.y)),u=this._vertexBoundsScale,l=i.bounds,c=2*Math.max(l.width,l.height),h=(0,n.Z)(i.glyphs);try{for(h.s();!(a=h.n()).done;){var f=a.value;s.textureBinding=f.textureBinding,e.recordStart(t,s.data,this.geometryType,!0),e.vertexBounds(r.x+l.x+this._xOffset,r.y+l.y-this._yOffset,c*u,c*u),this._writeVertices(e,t,o,f),e.recordEnd()}}catch(v){h.e(v)}finally{h.f()}}},{key:"_writeGlyph",value:function(e,t,r,n,i){var a=_.m2.load(this._materialKey),s=(0,m.UJ)(Math.round(y*r),Math.round(y*n));a.textureBinding=i.textureBinding,e.recordStart(t,a.data,this.geometryType,!0);var o=i.bounds,u=this._vertexBoundsScale;e.vertexBounds(r+o.x*u,n+o.y*u,o.width*u,o.height*u),this._writeVertices(e,t,s,i),e.recordEnd()}},{key:"_writeVertices",value:function(e,t,r,n){var i=e.vertexCount();this._writeVertexCommon(e,t,r,n),e.vertexWrite(n.offsets.upperLeft),e.vertexWrite(n.texcoords.upperLeft),e.vertexEnd(),this._writeVertexCommon(e,t,r,n),e.vertexWrite(n.offsets.upperRight),e.vertexWrite(n.texcoords.upperRight),e.vertexEnd(),this._writeVertexCommon(e,t,r,n),e.vertexWrite(n.offsets.lowerLeft),e.vertexWrite(n.texcoords.lowerLeft),e.vertexEnd(),this._writeVertexCommon(e,t,r,n),e.vertexWrite(n.offsets.lowerRight),e.vertexWrite(n.texcoords.lowerRight),e.vertexEnd(),e.indexWrite(i+0),e.indexWrite(i+1),e.indexWrite(i+2),e.indexWrite(i+1),e.indexWrite(i+3),e.indexWrite(i+2)}},{key:"_writeVertexCommon",value:function(e,t,r,n){var i=this._color,a=this._haloColor,s=(0,m.Jz)(0,0,this._referenceSize,this._bitset),o=(0,m.Jz)(0,0,this._size,this._haloSize);e.vertexWrite(r),e.vertexWrite(t),e.vertexWrite(i),e.vertexWrite(a),e.vertexWrite(o),e.vertexWrite(s),e.vertexWrite(this._minMaxZoom)}}]),r}(e)}},19383:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(2394),i=r(76133),a=r(92751),s=r(99418),o=r(49161),u=r(27092),l=r(597),c=r(311),h=r(38683),f=r(95195),v=r(92963),d=r(14621),m=r(72239),_=r(57521),p=r(39180),y=r(80506),x=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,a,s,o,u,l,f,_,p,y,x,g,k,w,M,b,Z,L,S,W,z,I){var T;(0,i.Z)(this,r),T=t.call(this),T.angle=s,T.height=l,T.width=u,T.xOffset=n*L,T.yOffset=a*L,T._markerPlacement=S,T._effects=W,T._anchorX=.5-(.5+M)*w.width/w.width,T._anchorY=.5-(.5+b)*w.height/w.height,T._minMaxZoom=(0,d.UJ)(Math.round(z*v.MI),Math.round(I*v.MI));var P=(1===k?v.Tz:v.CQ)|(y?v.Uh:0)|(g?v.oK:0)|(x?v.e0:0),R=w&&w.sdf,F=m.mE.load(e);F.sdf=R,F.pattern=!0,F.textureBinding=w.textureBinding,T._materialKey=F.data,T._fillColor=o,T._outlineColor=_,T._sizeOutlineWidth=(0,d.Jz)(Math.round(Math.min(Math.sqrt(128*u),255)),Math.round(Math.min(Math.sqrt(128*l),255)),Math.round(Math.min(Math.sqrt(128*p),255)),Math.round(Math.min(Math.sqrt(128*f),255)));var C=w.rect.x+v.fL,E=w.rect.y+v.fL,A=C+w.width,B=E+w.height;T._offsets.xUpperLeft=C,T._offsets.yUpperLeft=E,T._offsets.xUpperRight=A,T._offsets.yUpperRight=E,T._offsets.xBottomLeft=C,T._offsets.yBottomLeft=B,T._offsets.xBottomRight=A,T._offsets.yBottomRight=B,T._texUpperLeft=(0,d.UJ)(C,E),T._texUpperRight=(0,d.UJ)(A,E),T._texBottomLeft=(0,d.UJ)(C,B),T._texBottomRight=(0,d.UJ)(A,B),u*=Z,l*=Z,u*=L,l*=L;var V=Math.round(64*Z);T._bitestAndDistRatio=(0,d.UJ)(P,V),T._computedWidth=u,T._computedHeight=l;var D=(0,h.c)(),O=(0,c.c)();return T._applyTransformation(O,D),T}return(0,a.Z)(r,null,[{key:"fromCIMMarker",value:function(e,t,i){var a=t&&t.width||1,s=t&&t.height||1,o=e.size,c=a/s*e.scaleX,h=e.scaleSymbolsProportionally&&e.frameHeight?o/e.frameHeight:1,v=(0,f.t2)(e.color),d=(0,f.t2)(e.outlineColor),m=(0,l.F2)(o),p=m*c,y=(0,l.F2)(e.offsetX||0),x=(0,l.F2)(e.offsetY||0),g=(0,l.F2)(e.outlineWidth||0)*h,k=e.alignment||0,w=(0,l.F2)(e.referenceSize),M=(0,_._f)(e.scaleInfo,i),b=(0,n.Z)(M,2),Z=b[0],L=b[1];t.sdf||0!==v||(v=-1);var S=e.rotation||0;e.rotateClockwise||(S=-S);var W=0,z=0,I=e.anchorPoint;I&&(e.isAbsoluteAnchorPoint?o&&(W=-I.x/(o*c),z=I.y/o):(W=I.x,z=I.y));var T=new r(e.materialKey,y,x,S,v,p,m,w,d,g,e.colorLocked,e.scaleSymbolsProportionally,!1,k,t,W,z,e.sizeRatio,(0,u.Pt)(e.scaleFactor,1),e.markerPlacement,e.effects,Z,L);return T._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/p:1,T._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/m:1,T}},{key:"fromPictureMarker",value:function(e,t){var n=Math.round((0,l.F2)(e.width)),i=Math.round((0,l.F2)(e.height)),a=v.ru,s=Math.round((0,l.F2)(e.xoffset||0)),o=Math.round((0,l.F2)(e.yoffset||0)),u=new r(e.materialKey,s,o,e.angle,a,n,i,i,0,0,!1,!1,!1,0,t,0,0,1,1,null,null,_.Xe,_.eW);return u._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/e.width:1,u._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/e.height:1,u}},{key:"fromSimpleMarker",value:function(e,t){var n=(0,f.aH)(e.color),i=Math.round((0,l.F2)(e.size)),a=i,s=Math.round((0,l.F2)(e.xoffset||0)),o=Math.round((0,l.F2)(e.yoffset||0)),u=e.style,c=e.outline,h=0|(c&&c.color&&(0,f.aH)(c.color)),v=0|(c&&c.width&&Math.round((0,l.F2)(c.width))),d=new r(e.materialKey,s,o,e.angle,n,i,a,a,h,v,!1,!1,"esriSMSCross"===u||"esriSMSX"===u,0,t,0,0,126/64,1,null,null,_.Xe,_.eW);return d.boundsType="esriSMSCircle"===u?"circle":"square",d._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/e.size:1,d._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/e.size:1,d}},{key:"fromLineSymbolMarker",value:function(e,t){var n,i=(0,f.aH)(e.color),a=6,s=Math.round((0,l.F2)(a*e.lineWidth)),o=s,u="cross"===e.style||"x"===e.style;switch(e.placement){case"begin-end":n="Both";break;case"begin":n="JustBegin";break;case"end":n="JustEnd";break;default:n="None"}var c={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:n,offsetAlongLine:0},h=new r(e.materialKey,0,0,0,i,s,o,o/a,i,u?Math.round((0,l.F2)(e.lineWidth)):0,!1,!1,u,1,t,0,0,126/64,1,c,null,_.Xe,_.eW);return h.boundsType="circle"===e.style?"circle":"square",h}}]),r}((0,p.Z)(y.Z))},80506:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(76133),i=r(92751),a=r(27092),s=r(92262),o=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,[{key:"bindFeature",value:function(e,t,r){}},{key:"write",value:function(e,t,r){var n;if((0,a.Wi)(this._effects)||0===(null==(n=this._effects)?void 0:n.length))return this._write(e,t);for(var i=s.j.executeEffects(this._effects,t.readLegacyGeometryForDisplay()),o=s.j.next(i);o;)this._write(e,t,o),o=s.j.next(i)}},{key:"_write",value:function(e,t,r){}}]),e}()},16466:function(e,t,r){r.d(t,{Wr:function(){return xt},Sl:function(){return pt}});var n=r(16198),i=r(62032),a=r(76133),s=r(92751),o=r(4367),u=(r(78975),r(38862),r(68309),r(51532),r(41539),r(78783),r(33948),r(43290),r(92222),r(25585)),l=r(87441),c=r(24446),h=r(12190),f=r(49026),v=r(72239),d=r(2394),m=r(34175),_=r(99418),p=r(49161),y=(r(54747),r(597)),x=r(95195),g=r(92963),k=r(95466),w=r(14621),M=r(57521),b=r(27092),Z=r(32503),L=(r(47042),r(57327),r(6598),r(33223)),S=r(82409),W=r(74043);r(2707);function z(e,t,r,n,i,a,s){se=0;var o,u,l,c,h,f=(n-r)*a,v=i&&i.length,d=v?(i[0]-r)*a:f,m=I(t,r,n,0,d,a,!0);if(m&&m.next!==m.prev){if(v&&(m=B(t,r,n,i,m,a)),f>80*a){o=l=t[0+r*a],u=c=t[1+r*a];for(var _=a;_<d;_+=a){var p=t[_+r*a],y=t[_+1+r*a];o=Math.min(o,p),u=Math.min(u,y),l=Math.max(l,p),c=Math.max(c,y)}h=Math.max(l-o,c-u),h=0!==h?1/h:0}P(m,e,a,o,u,h,s,0)}}function I(e,t,r,n,i,a,s){var o;if(s===X(e,t,r,n,i,a)>0)for(var u=n;u<i;u+=a)o=C(u+t*a,e[u+t*a],e[u+1+t*a],o);else for(var l=i-a;l>=n;l-=a)o=C(l+t*a,e[l+t*a],e[l+1+t*a],o);return o&&q(o,o.next)&&(E(o),o=o.next),o}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(!e)return e;var r,n=e;do{if(r=!1,n.steiner||!q(n,n.next)&&0!==U(n.prev,n,n.next))n=n.next;else{if(E(n),n=t=n.prev,n===n.next)break;r=!0}}while(r||n!==t);return t}function P(e,t,r,n,i,a,s,o){if(e){!o&&a&&(e=O(e,n,i,a));for(var u=e;e.prev!==e.next;){var l=e.prev,c=e.next;if(a?F(e,n,i,a):R(e))t.push(l.index/r+s),t.push(e.index/r+s),t.push(c.index/r+s),E(e),e=c.next,u=c.next;else if((e=c)===u){o?1===o?P(e=Q(e,t,r,s),t,r,n,i,a,s,2):2===o&&$(e,t,r,n,i,a,s):P(T(e),t,r,n,i,a,s,1);break}}}}function R(e){var t=e.prev,r=e,n=e.next;if(U(t,r,n)>=0)return!1;for(var i=e.next.next,a=i,s=0;i!==e.prev&&(0===s||i!==a);){if(s++,N(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&U(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function F(e,t,r,n){var i=e.prev,a=e,s=e.next;if(U(i,a,s)>=0)return!1;for(var o=i.x<a.x?i.x<s.x?i.x:s.x:a.x<s.x?a.x:s.x,u=i.y<a.y?i.y<s.y?i.y:s.y:a.y<s.y?a.y:s.y,l=i.x>a.x?i.x>s.x?i.x:s.x:a.x>s.x?a.x:s.x,c=i.y>a.y?i.y>s.y?i.y:s.y:a.y>s.y?a.y:s.y,h=Y(o,u,t,r,n),f=Y(l,c,t,r,n),v=e.prevZ,d=e.nextZ;v&&v.z>=h&&d&&d.z<=f;){if(v!==e.prev&&v!==e.next&&N(i.x,i.y,a.x,a.y,s.x,s.y,v.x,v.y)&&U(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,d!==e.prev&&d!==e.next&&N(i.x,i.y,a.x,a.y,s.x,s.y,d.x,d.y)&&U(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;v&&v.z>=h;){if(v!==e.prev&&v!==e.next&&N(i.x,i.y,a.x,a.y,s.x,s.y,v.x,v.y)&&U(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&N(i.x,i.y,a.x,a.y,s.x,s.y,d.x,d.y)&&U(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function C(e,t,r,n){var i=ne.create(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function B(e,t,r,n,i,a){for(var s=new Array,o=0,u=n.length;o<u;o++){var l=I(e,t,r,n[o]*a,o<u-1?n[o+1]*a:r*a,a,!1);l===l.next&&(l.steiner=!0),s.push(A(l))}s.sort(j);for(var c=0,h=s;c<h.length;c++){var f=h[c];V(f,i),i=T(i,i.next)}return i}function V(e,t){if(t=D(e,t)){var r=re(t,e);T(r,r.next)}}function D(e,t){var r,n=t,i=e.x,a=e.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var o=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>s){if(s=o,o===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===s)return r.prev;var u,l=r,c=r.x,h=r.y,f=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=c&&i!==n.x&&N(a<h?i:s,a,c,h,a<h?s:i,a,n.x,n.y)&&(u=Math.abs(a-n.y)/(i-n.x),(u<f||u===f&&n.x>r.x)&&H(n,e)&&(r=n,f=u)),n=n.next;return r}function O(e,t,r,n){for(var i;i!==e;i=i.next){if(i=i||e,null===i.z&&(i.z=Y(i.x,i.y,t,r,n)),i.prev.next!==i||i.next.prev!==i)return i.prev.next=i,i.next.prev=i,O(e,t,r,n);i.prevZ=i.prev,i.nextZ=i.next}return e.prevZ.nextZ=null,e.prevZ=null,G(e)}function G(e){for(var t,r=1;;){var n=void 0,i=e;e=null,t=null;for(var a=0;i;){a++,n=i;for(var s=0;s<r&&n;s++)n=n.nextZ;for(var o=r;s>0||o>0&&n;){var u=void 0;0===s?(u=n,n=n.nextZ,o--):0!==o&&n?i.z<=n.z?(u=i,i=i.nextZ,s--):(u=n,n=n.nextZ,o--):(u=i,i=i.nextZ,s--),t?t.nextZ=u:e=u,u.prevZ=t,t=u}i=n}if(t.nextZ=null,r*=2,a<2)return e}}function U(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function K(e,t,r,n){return!!(q(e,t)&&q(r,n)||q(e,n)&&q(r,t))||U(e,t,r)>0!=U(e,t,n)>0&&U(r,n,e)>0!=U(r,n,t)>0}function J(e,t){var r=e;do{if(r.index!==e.index&&r.next.index!==e.index&&r.index!==t.index&&r.next.index!==t.index&&K(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function X(e,t,r,n,i,a){for(var s=0,o=n,u=i-a;o<i;o+=a)s+=(e[u+t*a]-e[o+t*a])*(e[o+1+t*a]+e[u+1+t*a]),u=o;return s}function N(e,t,r,n,i,a,s,o){return(i-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(n-o)-(r-s)*(t-o)>=0&&(r-s)*(a-o)-(i-s)*(n-o)>=0}function H(e,t){return U(e.prev,e,e.next)<0?U(e,t,e.next)>=0&&U(e,e.prev,t)>=0:U(e,t,e.prev)<0||U(e,e.next,t)<0}function Y(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function q(e,t){return e.x===t.x&&e.y===t.y}function j(e,t){return e.x-t.x}function Q(e,t,r,n){var i=e;do{var a=i.prev,s=i.next.next;!q(a,s)&&K(a,i,i.next,s)&&H(a,s)&&H(s,a)&&(t.push(a.index/r+n),t.push(i.index/r+n),t.push(s.index/r+n),E(i),E(i.next),i=e=s),i=i.next}while(i!==e);return i}function $(e,t,r,n,i,a,s){var o=e;do{for(var u=o.next.next;u!==o.prev;){if(o.index!==u.index&&ee(o,u)){var l=re(o,u);return o=T(o,o.next),l=T(l,l.next),P(o,t,r,n,i,a,s,0),void P(l,t,r,n,i,a,s,0)}u=u.next}o=o.next}while(o!==e)}function ee(e,t){return e.next.index!==t.index&&e.prev.index!==t.index&&!J(e,t)&&H(e,t)&&H(t,e)&&te(e,t)}function te(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function re(e,t){var r=ne.create(e.index,e.x,e.y),n=ne.create(t.index,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}for(var ne=function(){function e(){(0,a.Z)(this,e),this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return(0,s.Z)(e,null,[{key:"create",value:function(t,r,n){var i=se<ie.length?ie[se++]:new e;return i.index=t,i.x=r,i.y=n,i.prev=null,i.next=null,i.z=null,i.prevZ=null,i.nextZ=null,i.steiner=!1,i}}]),e}(),ie=new Array,ae=8096,se=0,oe=0;oe<ae;oe++)ie.push(new ne);var ue=1e-5,le=new W.b(0,0,0,1,0),ce=new W.b(0,0,0,1,0);function he(e,t,r){for(var n=0,i=1;i<r;i++){var a=e[2*(t+i-1)],s=e[2*(t+i-1)+1];n+=(e[2*(t+i)]-a)*(e[2*(t+i)+1]+s)}return n}function fe(e,t,r,n,i){for(var a=0,s=2,o=r;o<n;o+=3){var u=(e.getValue(o)-i)*s,l=(e.getValue(o+1)-i)*s,c=(e.getValue(o+2)-i)*s;a+=Math.abs((t[u]-t[c])*(t[l+1]-t[u+1])-(t[u]-t[l])*(t[c+1]-t[u+1]))}return a}function ve(e,t){var r=t.coords,n=t.lengths,i=t.hasIndeterminateRingOrder,a=e.indexWriter(),s=e.vertexCount();if(i)return!1;for(var o=a.length,u=0,l=0;l<n.length;){for(var c=l,h=n[l],f=he(r,u,h),v=[];++c<n.length;){var d=n[c],m=he(r,u+h,d);if(!(m>0))break;f+=m,v.push(u+h),h+=d}var _=a.length;z(a,r,u,u+h,v,2,s);var p=fe(a,r,_,a.length,s),y=Math.abs(f);if(Math.abs((p-y)/Math.max(1e-7,y))>ue)return a.seek(o),!1;l=c,u+=h}return!0}function de(e,t){var r=e.indexWriter(),n=e.vertexCount(),i=t.coords,a=t.lengths,s=(0,L.b)(i,a),o=s.buffer,u=s.vertexCount;r.ensureSize(u);for(var l=0;l<u;l++)r.push(l+n);return o}function me(e,t,r){for(var n=0,i=0;i<e.lengths.length;i++){for(var a=e.lengths[i],s=0;s<a;s++){var o=e.coords[2*(s+n)],u=e.coords[2*(s+n)+1];if(o<t||o>r||u<t||u>r)return!0}n+=a}return!1}function _e(e,t){if((0,b.Wi)(e))return null;if(!me(e,-128,g.I_+128))return e;le.setPixelMargin(t),le.reset(3);for(var r=0,n=0;n<e.lengths.length;n++){var a=e.lengths[n],s=e.coords[2*(0+r)],o=e.coords[2*(0+r)+1];le.moveTo(s,o);for(var u=1;u<a;u++)s=e.coords[2*(u+r)],o=e.coords[2*(u+r)+1],le.lineTo(s,o);le.close(),r+=a}var l=le.result(!1);if(!l)return null;var c,h=[],f=[],v=(0,i.Z)(l);try{for(v.s();!(c=v.n()).done;){var d,m=c.value,_=0,p=(0,i.Z)(m);try{for(p.s();!(d=p.n()).done;){var y=d.value;f.push(y.x),f.push(y.y),_++}}catch(x){p.e(x)}finally{p.f()}h.push(_)}}catch(x){v.e(x)}finally{v.f()}return new S.Z(h,f)}function pe(e,t){ce.setPixelMargin(t);for(var r=ce,n=-t,a=g.I_+t,s=[],o=!1,u=0;u<e.length;){var l=[],c=e[u];if(!c)return null;r.reset(2);var h=(0,d.Z)(c[0],2),f=h[0],v=h[1];if(o)r.moveTo(f,v);else{if(f<n||f>a||v<n||v>a){o=!0;continue}l.push({x:f,y:v})}for(var m=!1,_=c.length,p=1;p<_;++p)if(f+=c[p][0],v+=c[p][1],o)r.lineTo(f,v);else{if(f<n||f>a||v<n||v>a){m=!0;break}l.push({x:f,y:v})}if(m)o=!0;else{if(o){var y=r.resultWithStarts();if(y){var x,k=(0,i.Z)(y);try{for(k.s();!(x=k.n()).done;){var w=x.value;s.push(w)}}catch(M){k.e(M)}finally{k.f()}}}else s.push({line:l,start:0});u++,o=!1}}return s=s.filter((function(e){return e.line.length>1})),0===s.length?null:s}le.setExtent(g.I_),ce.setExtent(g.I_);r(69600);var ye=r(11047),xe=r(60955),ge=8,ke=16,we=65535,Me=function(e){return function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),e.tessellationProperties={},e._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0},e.geometryType=f.LW.LINE,e}return(0,s.Z)(r,[{key:"writeGeometry",value:function(e,t,r,n){this._writeGeometry(e,t,r,n)}},{key:"_initializeTessellator",value:function(e){var t=v.a.load(this._materialKey),r=v.dk.load(this._materialKey),n=this._tessellationOptions,i=t.vvSizeFieldStops||t.vvSizeMinMaxValue||t.vvSizeScaleStops||t.vvSizeUnitValue,a=this.tessellationProperties._halfWidth<g.tQ&&!e&&!i;this.tessellationProperties.minMaxZoom=this._minMaxZoom,n.wrapDistance=we,n.textured=this._isDashed||this._hasPattern,n.offset=this.tessellationProperties.offset,n.halfWidth=this.tessellationProperties._halfWidth;var s=a?0:1,o=r.outlinedFill?Ze:be;this._lineTessellator=new xe.z(o(this.tessellationProperties,s,s),Le(this.tessellationProperties),a)}},{key:"_write",value:function(e,t,r){var n="esriGeometryPoint"===t.geometryType;e.recordStart(t.getDisplayId(),this._materialKey,this.geometryType,n),this._writeGeometry(e,t,r,n),e.recordEnd()}},{key:"_writeGeometry",value:function(e,t,r,n){var i=null!=r?r:t.readLegacyGeometryForDisplay(),a=this._getLines(i,n);(0,b.Wi)(a)||this._writeVertices(e,t,a)}},{key:"_getLines",value:function(e,t){if((0,b.Wi)(e))return null;var r=e.paths||e.rings;return(0,b.Wi)(r)?null:pe(r,t?256:16)}},{key:"_writeVertices",value:function(e,t,r){var n=t.getDisplayId(),a=e.vertexCount(),s=this.tessellationProperties,o=this._tessellationOptions;s.out=e,s.id=n,s.indexCount=0,s.vertexCount=0,s.offset=a,o.capType=this._capType,o.joinType=this._joinType;var u=v.dk.load(this._materialKey);this.tessellationProperties.key=u.outlinedFill?u:v.a.load(this._materialKey);var l,c=(0,i.Z)(r);try{for(c.s();!(l=c.n()).done;){var h=l.value,f=h.line,d=h.start;o.initialDistance=d%we,this._lineTessellator.tessellate(f,o)}}catch(m){c.e(m)}finally{c.f()}}}]),r}(e)},be=function(e,t,r){return function(n,i,a,s,o,u,l,c,h,f,v){var d=(0,w.UJ)(v,Math.ceil(ke*e._halfWidth)),m=(0,w.Jz)(Math.round(ke*l),Math.round(ke*c),Math.round(ke*h),Math.round(ke*f)),_=(0,w.Jz)(ke*o,ke*u,0,e._bitset),p=e.out;return p.vertexBounds(n,i,t,r),p.vertexWrite((0,w.UJ)(ge*n,ge*i)),p.vertexWrite(e.id),p.vertexWrite(e._fillColor),p.vertexWrite(m),p.vertexWrite(d),p.vertexWrite(e._tl),p.vertexWrite(e._br),p.vertexWrite(_),p.vertexWrite((0,w.UJ)(Math.ceil(ke*e._halfReferenceWidth),0)),p.vertexWrite(e.minMaxZoom),p.vertexEnd(),e.offset+e.vertexCount++}},Ze=function(e,t,r){return function(n,i,a,s,o,u,l,c,h,f,v){var d=(0,w.Jz)(0,0,ke*e._halfWidth,ke*e._halfReferenceWidth),m=(0,w.Jz)(ke*l+128,ke*c+128,ke*h+128,ke*f+128),_=e.out,p=e._bitset<<24|e.id;return _.vertexBounds(n,i,t,r),_.vertexWrite((0,w.UJ)(ge*n,ge*i)),_.vertexWrite(p),_.vertexWrite(e._fillColor),e.key.simple||(_.vertexWrite(0),_.vertexWrite(0)),_.vertexWrite(d),_.vertexWrite(m),e.key.simple||_.vertexWrite(e.minMaxZoom),_.vertexEnd(),e.offset+e.vertexCount++}},Le=function(e){return function(t,r,n){var i=e.out;i.indexWrite(t),i.indexWrite(r),i.indexWrite(n),e.indexCount+=3}},Se=r(80506),We=l.Z.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),ze=function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(e,n,i,s,o,u,l,c,h,f,d,m,_,p,y,x,k,b,Z){var L;(0,a.Z)(this,r),L=t.call(this);var S=v.a.load(e);n&&(S.sdf=n.sdf,S.pattern=!0,S.textureBinding=n.textureBinding),L._capType=s,L._joinType=o,L._miterLimitCosine=(0,M.NW)(u),L.tessellationProperties._fillColor=l,L.tessellationProperties._tl=c,L.tessellationProperties._br=h,L._hasPattern=f,L._isDashed=d,L._zOrder=x,L._effects=k,L._minMaxZoom=(0,w.UJ)(Math.round(b*g.MI),Math.round(Z*g.MI)),L._materialKey=S.data;var W=(_?g.Uh:0)|(p?g.SD:0)|(m?g._6:0);return L.tessellationProperties._bitset=W,L.tessellationProperties._halfWidth=.5*i,L.tessellationProperties._halfReferenceWidth=.5*y,L.tessellationProperties.offset=0,L._initializeTessellator(!1),L}return(0,s.Z)(r,null,[{key:"fromCIMLine",value:function(e,t,n){var i=e.color,a=e.scaleFactor||1,s=!!e.dashTemplate,o=e.cap;s&&1===o&&(o=2);var u=e.join,l=(0,y.F2)(e.width)*a,c=(0,y.F2)(e.referenceWidth),h=(0,y.F2)(e.miterLimit),f=i&&(0,x.t2)(i)||0,v=(0,M._f)(e.scaleInfo,n),m=(0,d.Z)(v,2),_=m[0],p=m[1],k=!1;if(!t)return new r(e.materialKey,t,l,o,u,h,f,0,0,!1,s,e.scaleDash,e.colorLocked,k,c,e.zOrder,e.effects,_,p);var b=t.rect,Z=t.width,L=t.height,S=b.x+g.fL,W=b.y+g.fL,z=S+Z,I=W+L,T=(0,w.UJ)(S,W),P=(0,w.UJ)(z,I),R=!1;return new r(e.materialKey,t,l,o,u,h,f,T,P,!0,s,e.scaleDash,e.colorLocked,R,c,e.zOrder,e.effects,_,p)}},{key:"fromFillOutline",value:function(e){var t;return e.isOutlinedFill&&e.outline&&"esriSLSSolid"===(null==(t=e.outline)?void 0:t.style)?r.fromSimpleLine((0,o.Z)({hash:"",materialKey:e.materialKey},e.outline),null,!0):null}},{key:"fromSimpleLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.color,a="esriSLSSolid"!==e.style&&"esriSLSNull"!==e.style,s=(0,ye.ws)(e.cap||"round"),o=(0,ye.xV)(e.join||"round"),u=i&&"esriSLSNull"!==e.style&&(0,x.aH)(i)||0;"esriSLSNull"===e.style&&(u=0);var l=(0,y.F2)(e.width),c=e.miterLimit;if(!t)return new r(e.materialKey,t,l,s,o,c,u,0,0,!1,a,!0,!1,n,l,0,null,M.Xe,M.eW);var h=t.rect,f=t.width,v=t.height,d=h.x+g.fL,m=h.y+g.fL,_=d+f,p=m+v,k=(0,w.UJ)(d,m),b=(0,w.UJ)(_,p);return new r(e.materialKey,t,l,s,o,c,u,k,b,!0,a,!0,!1,n,l,0,null,M.Xe,M.eW)}},{key:"fromPictureLineSymbol",value:function(e,t,r,n){return We.error("PictureLineSymbol support does not exist!"),null}}]),r}(Me(Se.Z)),Ie=100,Te=1,Pe=function(e){return function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),e.forceLibtess=!1,e._bitset=0,e._lineTemplate=null,e.geometryType=f.LW.FILL,e}return(0,s.Z)(r,[{key:"_maybeAddLineTemplate",value:function(e){this._lineTemplate=ze.fromFillOutline(e)}},{key:"_write",value:function(e,t,r){var n="esriGeometryPoint"===t.geometryType,i=v.dk.load(this._materialKey);e.recordStart(t.getDisplayId(),this._materialKey,this.geometryType,n),this._writeGeometry(e,t,i,r,n),i.outlinedFill&&(0,b.pC)(this._lineTemplate)&&this._lineTemplate.writeGeometry(e,t,r,n),e.recordEnd()}},{key:"_writeGeometry",value:function(e,t,r,n,i){var a=this._getGeometry(t,n,i);if(!(0,b.Wi)(a)){var s=e.indexCount();if(a.maxLength>Ie||this.forceLibtess||!ve(e,a)){var o=de(e,a);s!==e.indexCount()&&this._writeVertices(e,t,o,[o.length/2],r)}else!(s===e.indexCount())&&this._writeVertices(e,t,a.coords,a.lengths,r)}}},{key:"_writeVertices",value:function(e,t,r,n,a){var s=t.getDisplayId(),o=this._bitset<<24|s,u=0,l=n.reduce((function(e,t){return e+t})),c=a.dotDensity?4:10;e.vertexEnsureSize(c*l);var h,f=(0,i.Z)(n);try{for(f.s();!(h=f.n()).done;){for(var v=h.value,d=v+u,m=u;m<d;m++){var _=r[2*m],p=r[2*m+1],y=(0,w.UJ)(Te*_,Te*p);e.vertexBounds(_,p,0,0),e.vertexWrite(y),e.vertexWrite(o),a.dotDensity?e.vertexWriteF32(1/Math.abs(t.readGeometryArea())):(e.vertexWrite(this.fillColor),a.simple||(e.vertexWrite(this.tl),e.vertexWrite(this.br)),e.vertexWrite(this.aux2),e.vertexWrite(this.aux3),a.simple||e.vertexWrite(this._minMaxZoom))}u+=v}}catch(x){f.e(x)}finally{f.f()}}},{key:"_getGeometry",value:function(e,t,r){var n=t?(0,Z.oB)((0,Z.GH)(t),2):e.readGeometryForDisplay();return n?_e(n,r?256:8):null}}]),r}(e)},Re=r(9816),Fe=r(64880),Ce=l.Z.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate"),Ee=function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(e){var n;return(0,a.Z)(this,r),n=t.call(this),n._ongoingMaterialRequestMap=new Map,n._materialCache=new Map,n._dynamicPropertyMap=new Map,n._cimLayer=e,n}return(0,s.Z)(r,[{key:"analyze",value:function(e,t,r,n,i){var a=this;if(i&&0===i.length)return null;var s=i&&i.length>0,o=t.readLegacyFeature(),u=this._materialCache,l=this._cimLayer.materialHash;if(!l)return Ce.error("A Dynamic mesh template must have a material hash value or function!"),Promise.reject(null);var c="function"==typeof l?l(o,r,n):l;if(u.has(c)){var h=u.get(c);return Promise.resolve(h)}var f=this._ongoingMaterialRequestMap.get(c);if(f)return f;var v=this._cimLayer,d=(0,Re.S)(v.cim,this._cimLayer.materialOverrides);d.mosaicHash=c;var m=v.type,_=v.url,p={cim:d,type:m,mosaicHash:c,url:_,size:null,dashTemplate:null,text:null,fontName:null};switch(m){case"marker":p.size=(0,Fe.hf)(v.size,o,r,n);break;case"line":p.dashTemplate=v.dashTemplate;break;case"text":p.text=(0,Fe.hf)(v.text,o,r,n),p.fontName=(0,Fe.hf)(v.fontName,o,r,n)}var y=e.getMosaicItem(p,i).then((function(e){return s||(a._ongoingMaterialRequestMap.delete(c),u.set(c,e)),e})).catch((function(e){return a._ongoingMaterialRequestMap.delete(c),Ce.error(".analyze()",e.message),null}));return s||this._ongoingMaterialRequestMap.set(c,y),y}}]),r}(Se.Z),Ae=r(56663),Be=128,Ve=function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(e,n,i){var s,o;if((0,a.Z)(this,r),s=t.call(this,e),s._minMaxZoom=(0,w.UJ)(Math.round(n*g.MI),Math.round(i*g.MI)),(0,M.mf)(e.color)){var u=function(t,r,n){var i=e.color(t,r,n);return i&&(0,x.t2)(i)||0};s._dynamicPropertyMap.set("fillColor",u)}else{var l=e.color;s.fillColor=l&&(0,x.t2)(l)||0}var c=0;(0,M.mf)(e.height)||(c=e.height||0);var h="CIMMarkerPlacementInsidePolygon"===(null==(o=e.cim.placement)?void 0:o.type)&&e.cim.placement.shiftOddRows?2:1,f=function(t,r,n){return(0,M.mf)(e.height)?e.height(t,r,n)*h:c*h};s._dynamicPropertyMap.set("_height",f);var d=0;(0,M.mf)(e.offsetX)||(d=(0,y.F2)(e.offsetX||0)+Be,d>255&&(d=255));var _=function(t,r,n){if((0,M.mf)(e.offsetX)){var i=(0,y.F2)(e.offsetX(t,r,n))+Be;return i>255&&(i=255),i}return d};s._dynamicPropertyMap.set("_offsetX",_);var p=1;(0,M.mf)(e.scaleX)||(p=e.scaleX||1);var b=function(t,r,n){return(0,M.mf)(e.scaleX)?e.scaleX(t,r,n):p};s._dynamicPropertyMap.set("_scaleX",b);var Z=0;(0,M.mf)(e.offsetY)||(Z=(0,y.F2)(-e.offsetY||0)+Be,Z>255&&(Z=255));var L=function(t,r,n){if((0,M.mf)(e.offsetY)){var i=(0,y.F2)(-e.offsetY(t,r,n))+Be;return i>255&&(i=255),i}return Z};s._dynamicPropertyMap.set("_offsetY",L);var S=0;(0,M.mf)(e.angle)||(S=(0,k.Or)(e.angle)||0);var W=function(t,r,n){return(0,M.mf)(e.angle)?(0,k.Or)(e.angle(t,r,n)):S};return s._dynamicPropertyMap.set("_angle",W),s._effects=e.effects,s._cimFillLayer=e,s._fillMaterialKey=v.dk.load(e.materialKey),(0,m.Z)(s)}return(0,s.Z)(r,[{key:"bindFeature",value:function(e,t,r){var n=this,i=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,a){n[a]=e(i,t,r)}));var a=this._fillMaterialKey,s=this._materialCache,o=(0,this._cimFillLayer.materialHash)(i,t,r),u=s.get(o),l=null;if(u&&(0,Ae.ok)(u.spriteMosaicItem)&&(l=u.spriteMosaicItem),l){var c=l,h=c.rect,f=c.width,v=c.height,d=h.x+g.fL,m=h.y+g.fL,_=d+f,p=m+v,x=Math.round((0,y.F2)(this._height));x>255?x=255:x<=0&&(x=p-m);var k=Math.round((0,y.F2)(this._height/v*f||0));k>255?k=255:k<=0&&(k=_-d);var M=this._scaleX,b=1;this.tl=(0,w.UJ)(d,m),this.br=(0,w.UJ)(_,p),this.aux2=(0,w.Jz)(k,x,this._offsetX,this._offsetY),this.aux3=(0,w.Jz)(M,b,this._angle,0),a.sdf=l.sdf,a.pattern=!0,a.textureBinding=l.textureBinding}else this.tl=0,this.br=0,this.aux2=0,this.aux3=0,a.sdf=!1,a.pattern=!1,a.textureBinding=0;this._materialKey=a.data}}],[{key:"fromCIMFill",value:function(e,t){var n=(0,M._f)(e.scaleInfo,t),i=(0,d.Z)(n,2),a=i[0],s=i[1];return new r(e,a,s)}}]),r}(Pe(Ee)),De=function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(e,n,i){var s;(0,a.Z)(this,r),s=t.call(this,e),s._minMaxZoom=(0,w.UJ)(Math.round(n*g.MI),Math.round(i*g.MI)),s._cimLineLayer=e;var o=0;(0,M.mf)(e.width)||(o=.5*(0,y.F2)(e.width));var u=function(t,r,n){return(0,M.mf)(e.width)?.5*(0,y.F2)(e.width(t,r,n)):o};if(s._dynamicPropertyMap.set("_halfWidth",u),(0,M.mf)(e.cap)?s._dynamicPropertyMap.set("_capType",e.cap):s._capType=e.cap,(0,M.mf)(e.join)?s._dynamicPropertyMap.set("_joinType",e.join):s._joinType=e.join,(0,M.mf)(e.color)){var l=function(t,r,n){var i=e.color(t,r,n);return i&&(0,x.t2)(i)||0};s._dynamicPropertyMap.set("_fillColor",l)}else{var c=e.color;s._fillColor=c&&(0,x.t2)(c)||0}if((0,M.mf)(e.miterLimit)){var h=function(t,r,n){return(0,M.NW)(e.miterLimit(t,r,n))};s._dynamicPropertyMap.set("_miterLimitCosine",h)}else s._miterLimitCosine=(0,M.NW)(e.miterLimit);return s._scaleFactor=e.scaleFactor||1,s._isDashed=null!=e.dashTemplate,s._effects=e.effects,s.tessellationProperties._bitset=(e.colorLocked?1:0)|(e.scaleDash?1:0)<<1,s._materialKey=e.materialKey,s._initializeTessellator(!0),s}return(0,s.Z)(r,[{key:"bindFeature",value:function(e,t,r){var n=this,i=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,a){n[a]=e(i,t,r)})),this._halfWidth*=this._scaleFactor;var a=this._materialCache,s=(0,this._cimLineLayer.materialHash)(i,t,r),o=a.get(s),u=null;if(o&&(0,Ae.ok)(o.spriteMosaicItem)&&(u=o.spriteMosaicItem),u){this._hasPattern=!0;var l=u,c=l.rect,h=l.width,f=l.height,d=c.x+g.fL,m=c.y+g.fL,_=d+h,p=m+f;this.tessellationProperties._tl=(0,w.UJ)(d,m),this.tessellationProperties._br=(0,w.UJ)(_,p)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor,this.tessellationProperties._halfWidth=this._halfWidth,this.tessellationProperties.offset=0,this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;var y=v.a.load(this._materialKey);u&&(y.sdf=u.sdf,y.pattern=!0,y.textureBinding=u.textureBinding),this._materialKey=y.data}}],[{key:"fromCIMLine",value:function(e,t){var n=(0,M._f)(e.scaleInfo,t),i=(0,d.Z)(n,2),a=i[0],s=i[1];return new r(e,a,s)}}]),r}(Me(Ee)),Oe=r(311),Ge=r(38683),Ue=r(39180),Ke=(0,Ge.c)(),Je=(0,Oe.c)(),Xe=l.Z.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate"),Ne=function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(e,n,i){var s;if((0,a.Z)(this,r),s=t.call(this,e),s._cimMarkerLayer=e,s._minMaxZoom=(0,w.UJ)(Math.round(n*g.MI),Math.round(i*g.MI)),(0,M.mf)(e.color)){var o=function(t,r,n){return(0,x.t2)(e.color(t,r,n))};s._dynamicPropertyMap.set("_fillColor",o)}else s._fillColor=(0,x.t2)(e.color);if((0,M.mf)(e.outlineColor)){var u=function(t,r,n){return(0,x.t2)(e.outlineColor(t,r,n))};s._dynamicPropertyMap.set("_outlineColor",u)}else s._outlineColor=(0,x.t2)(e.outlineColor);if((0,M.mf)(e.size)){var l=function(t,r,n){return(0,y.F2)(e.size(t,r,n))};s._dynamicPropertyMap.set("_size",l)}else s._size=(0,y.F2)(e.size)||0;if((0,M.mf)(e.scaleX)?s._dynamicPropertyMap.set("_scaleX",e.scaleX):s._scaleX=e.scaleX||1,(0,M.mf)(e.offsetX)){var c=function(t,r,n){return(0,y.F2)(e.offsetX(t,r,n))};s._dynamicPropertyMap.set("xOffset",c)}else s.xOffset=(0,y.F2)(e.offsetX)||0;if((0,M.mf)(e.offsetY)){var h=function(t,r,n){return(0,y.F2)(e.offsetY(t,r,n))};s._dynamicPropertyMap.set("yOffset",h)}else s.yOffset=(0,y.F2)(e.offsetY)||0;if((0,M.mf)(e.outlineWidth)){var f=function(t,r,n){return(0,y.F2)(e.outlineWidth(t,r,n))};s._dynamicPropertyMap.set("_outlineWidth",f)}else s._outlineWidth=(0,y.F2)(e.outlineWidth)||0;return(0,M.mf)(e.rotation)?s._dynamicPropertyMap.set("_angle",e.rotation):s._angle=e.rotation||0,s._scaleFactor=(0,b.Pt)(e.scaleFactor,1),s._markerPlacement=e.markerPlacement,s._effects=e.effects,s._bitSet=(1===e.alignment?1:0)|(e.colorLocked?1:0)<<1|(e.scaleSymbolsProportionally?1:0)<<3,s._materialKey=e.materialKey,(0,m.Z)(s)}return(0,s.Z)(r,[{key:"bindFeature",value:function(e,t,r){var n=this,i=e.readLegacyFeature();this._dynamicPropertyMap.forEach((function(e,a){n[a]=e(i,t,r)}));var a=this._cimMarkerLayer.materialHash,s="function"==typeof a?a(i,t,r):a,o=this._materialCache.get(s);if(o&&(0,Ae.ok)(o.spriteMosaicItem)&&o.spriteMosaicItem){var l=o.spriteMosaicItem,c=this._cimMarkerLayer.sizeRatio,h=l.width/l.height*this._scaleX,f=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,d=this._size,m=d*h,_=this.xOffset,p=this.yOffset;this.xOffset*=this._scaleFactor,this.yOffset*=this._scaleFactor;var x=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/(0,y.F2)(this._cimMarkerLayer.frameHeight):1,k=this._outlineWidth*x,M=(0,y.F2)(this._cimMarkerLayer.referenceSize),b=0,Z=0,L=this._cimMarkerLayer.anchorPoint;L&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(b=-L.x/(this._size*h),Z=L.y/this._size):(b=L.x,Z=L.y)),this._sizeOutlineWidth=(0,w.Jz)(Math.round(Math.min(Math.sqrt(128*m),255)),Math.round(Math.min(Math.sqrt(128*d),255)),Math.round(Math.min(Math.sqrt(128*k),255)),Math.round(Math.min(Math.sqrt(128*M),255))),this.angle=f;var S=Math.round(64*c);this._bitestAndDistRatio=(0,w.UJ)(this._bitSet,S);var W=l.rect.x+g.fL,z=l.rect.y+g.fL,I=W+l.width,T=z+l.height;this._texUpperLeft=(0,w.UJ)(W,z),this._texUpperRight=(0,w.UJ)(I,z),this._texBottomLeft=(0,w.UJ)(W,T),this._texBottomRight=(0,w.UJ)(I,T);var P=v.mE.load(this._materialKey);P.sdf=l.sdf,P.pattern=!0,P.textureBinding=l.textureBinding,this._materialKey=P.data,this._anchorX=.5-(.5+b)*l.width/l.width,this._anchorY=.5-(.5+Z)*l.height/l.height,m*=c,d*=c,m*=this._scaleFactor,d*=this._scaleFactor,m*=l.rect.width/l.width,d*=l.rect.height/l.height,this._computedWidth=m,this._computedHeight=d,this._applyTransformation(Je,Ke),this.xOffset=_,this.yOffset=p}else Xe.error(new u.Z("mapview-cim","Encountered an error when binding feature"))}}],[{key:"fromCIMMarker",value:function(e,t){var n=(0,M._f)(e.scaleInfo,t),i=(0,d.Z)(n,2),a=i[0],s=i[1];return new r(e,a,s)}}]),r}((0,Ue.Z)(Ee)),He=r(50460),Ye=r(87349),qe=r(52258),je=r(94868),Qe=r(64161),$e=5;function et(e,t,r,n){return"string"==typeof e.text?e.text:"function"==typeof e.text?e.text(t,r,n):""}var tt=function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(e,n,i){var s;(0,a.Z)(this,r),s=t.call(this,e),s._horizontalAlignment="center",s._verticalAlignment="middle",s._textToGlyphs=new Map,s._minMaxZoom=(0,w.UJ)(Math.round(n*g.MI),Math.round(i*g.MI));var o,u=e.scaleFactor||1;if(s._cimTextLayer=e,(0,M.mf)(e.color)){var l=function(t,r,n){return(0,x.t2)(e.color(t,r,n))};s._dynamicPropertyMap.set("_color",l)}else s._color=(0,x.t2)(e.color);if((0,M.mf)(e.color)){var c=function(t,r,n){return(0,x.t2)(e.outlineColor(t,r,n))};s._dynamicPropertyMap.set("_haloColor",c)}else s._haloColor=(0,x.t2)(e.outlineColor);(0,M.mf)(e.size)||(o=Math.min(Math.round((0,y.F2)(e.size*e.sizeRatio)),127));var h,f=function(t,r,n){return(0,M.mf)(e.size)?Math.min(Math.round((0,y.F2)(e.size(t,r,n)*e.sizeRatio)),127):o};if(s._dynamicPropertyMap.set("_size",f),(0,M.mf)(e.outlineSize)){var d=function(t,r,n){return Math.min(Math.floor($e*(0,y.F2)(e.outlineSize(t,r,n)*e.sizeRatio)),127)};s._dynamicPropertyMap.set("_haloSize",d)}else s._haloSize=Math.min(Math.floor($e*(0,y.F2)(e.outlineSize*e.sizeRatio)),127);(0,M.mf)(e.offsetX)||(h=Math.round((0,y.F2)(e.offsetX*e.sizeRatio)));var m,_=function(t,r,n){return(0,M.mf)(e.offsetX)?Math.round((0,y.F2)(e.offsetX(t,r,n)*e.sizeRatio)):h};s._dynamicPropertyMap.set("_xOffset",_),(0,M.mf)(e.offsetY)||(m=Math.round((0,y.F2)(e.offsetY*e.sizeRatio)));var p=function(t,r,n){return(0,M.mf)(e.offsetY)?Math.round((0,y.F2)(e.offsetY(t,r,n)*e.sizeRatio)):m};s._dynamicPropertyMap.set("_yOffset",p),(0,M.mf)(e.angle)?s._dynamicPropertyMap.set("_angle",e.angle):s._angle=e.angle,(0,M.mf)(e.horizontalAlignment)?s._dynamicPropertyMap.set("_horizontalAlignment",e.horizontalAlignment):s._horizontalAlignment=e.horizontalAlignment,(0,M.mf)(e.verticalAlignment)?s._dynamicPropertyMap.set("_verticalAlignment",e.verticalAlignment):s._verticalAlignment=e.verticalAlignment,s._scaleFactor=u,(0,M.mf)(e.text)?s._dynamicPropertyMap.set("_text",e.text):s._text=e.text;var k=Math.min(Math.round((0,y.F2)(e.referenceSize*e.sizeRatio)),127);s._referenceSize=Math.round(Math.sqrt(256*k)),s._materialKey=e.materialKey;var b=v.qr.load(s._materialKey);return b.sdf=!0,s._bitset=(1===e.alignment?1:0)|(e.colorLocked?1:0)<<1,s._materialKey=b.data,s._decoration="none",s._lineHeight=1,s._lineWidth=512,s._textPlacement=e.markerPlacement,s._effects=e.effects,s._isCIM=!0,s}return(0,s.Z)(r,[{key:"analyze",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,n,i,a){var s,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=n.readLegacyFeature(),o=et(this._cimTextLayer,s,i,a),e.next=4,(0,He.Z)((0,Ye.Z)(r.prototype),"analyze",this).call(this,t,n,i,a,(0,Qe._)(o));case 4:return u=e.sent,e.abrupt("return",(u&&u.glyphMosaicItems&&this._textToGlyphs.set(o,u.glyphMosaicItems),u));case 6:case"end":return e.stop()}}),e,this)})));function t(t,r,n,i){return e.apply(this,arguments)}return t}()},{key:"bindFeature",value:function(e,t,r){var n=this,i=e.readLegacyFeature();if(this._dynamicPropertyMap.forEach((function(e,a){n[a]=e(i,t,r)})),this._text&&0!==this._text.length){this._size*=this._scaleFactor,this._scale=this._size/g.Ex,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=(0,qe.kH)(this._horizontalAlignment||"center"),this._yAlignD=(0,qe.b7)(this._verticalAlignment||"baseline");var a=this._textToGlyphs.get(this._text);this.bindTextInfo(a,!1)}else this._shapingInfo=null}}],[{key:"fromCIMText",value:function(e,t){var n=(0,M._f)(e.scaleInfo,t),i=(0,d.Z)(n,2),a=i[0],s=i[1];return new r(e,a,s)}}]),r}((0,je.Z)(Ee)),rt=128,nt=function(e){(0,_.Z)(r,e);var t=(0,p.Z)(r);function r(e,n,i,s,o,u,l,c,h,f,d,m,_,p,y,x){var k;(0,a.Z)(this,r),k=t.call(this),k._effects=p;var M=v.dk.load(e);return n&&(M.sdf=n.sdf,M.pattern=!0,M.textureBinding=n.textureBinding),k.fillColor=i,k.tl=s,k.br=o,k.aux2=(0,w.Jz)(u,l,c,h),k.aux3=(0,w.Jz)(f,d,m,0),k._bitset=_,k._minMaxZoom=(0,w.UJ)(Math.round(y*g.MI),Math.round(x*g.MI)),k._materialKey=M.data,k}return(0,s.Z)(r,null,[{key:"fromCIMFill",value:function(e,t,n){var i=e.color,a=i&&(0,x.t2)(i)||0,s=e.materialKey,o=(0,M._f)(e.scaleInfo,n),u=(0,d.Z)(o,2),l=u[0],c=u[1];if(!t)return new r(s,null,a,0,0,0,0,0,0,0,0,0,e.colorLocked?1:0,e.effects,l,c);var h=t.rect,f=t.width,v=t.height,m=e.scaleX||1,_=h.x+g.fL,p=h.y+g.fL,b=_+f,Z=p+v,L=e.height,S=m*L,W=Math.round(L);W>255?W=255:W<=0&&(W=Z-p);var z=Math.round(S);z>255?z=255:z<=0&&(z=b-_);var I=(0,y.F2)(e.offsetX||0)+rt;I>255&&(I=255);var T=(0,y.F2)(-e.offsetY||0)+rt;T>255&&(T=255);var P=(0,w.UJ)(_,p),R=(0,w.UJ)(b,Z);return new r(s,t,a,P,R,z,W,I,T,rt,rt,(0,k.s5)(e.angle),e.colorLocked?1:0,e.effects,l,c)}},{key:"fromSimpleFill",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.color,s=a&&"esriSFSNull"!==e.style&&(0,x.aH)(a)||0,o=i?g.Uh:0,u=e.materialKey;if(t){var l=t.rect,c=t.width,h=t.height,f=l.x+g.fL,v=l.y+g.fL,d=f+c,m=v+h,_=(0,w.UJ)(f,v),p=(0,w.UJ)(d,m);n=new r(u,t,s,_,p,c,h,0,0,rt,rt,0,o,null,M.Xe,M.eW)}else n=new r(u,null,s,0,0,0,0,0,0,0,0,0,o,null,M.Xe,M.eW);return n._maybeAddLineTemplate(e),n}},{key:"fromPictureFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=g.ru,a=t.rect,s=t.width,o=t.height,u=a.x+g.fL,l=a.y+g.fL,c=u+s,h=l+o,f=(0,w.UJ)(u,l),v=(0,w.UJ)(c,h),d=Math.round((0,y.F2)(e.width));d>255&&(d=255);var m=Math.round((0,y.F2)(e.height));m>255&&(m=255);var _=(0,y.F2)(e.xoffset)+rt;_>255&&(_=255);var p=(0,y.F2)(-e.yoffset)+rt;p>255&&(p=255);var x=e.materialKey,k=n?g.Uh:0,b=new r(x,t,i,f,v,d,m,_,p,rt*e.xscale,rt*e.yscale,0,k,null,M.Xe,M.eW);return b._maybeAddLineTemplate(e),b}}]),r}(Pe(Se.Z)),it=r(19383),at=r(4611),st=function(){function e(){(0,a.Z)(this,e),this._resolver=null}return(0,s.Z)(e,[{key:"isHeld",value:function(){return!!this._resolver}},{key:"acquire",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._resolver){e.next=2;break}return e.abrupt("return",(this._resolver=(0,c.hh)(),Promise.resolve()));case 2:return e.next=4,this._resolver.promise;case 4:return e.next=6,this.acquire();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"release",value:function(){var e=this._resolver;this._resolver=null,e.resolve()}}]),e}();function ot(e,t,r){return ut.apply(this,arguments)}function ut(){return ut=(0,n.Z)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.acquire();case 3:return e.next=5,r(n);case 5:t.release(),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),t.release(),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),ut.apply(this,arguments)}var lt=r(31567),ct=l.Z.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),ht=new Array,ft={isOutline:!1,isOutlinedFill:!1,placement:null,stride:{fill:"default"},vvFlags:0},vt=(0,o.Z)((0,o.Z)({},h.eG),{},{hash:JSON.stringify(h.eG),materialKey:(0,v.jj)(f.LW.MARKER,ft)}),dt=(0,o.Z)((0,o.Z)({},h.wW),{},{hash:JSON.stringify(h.wW),materialKey:(0,v.jj)(f.LW.LINE,ft)}),mt=(0,o.Z)((0,o.Z)({},h.lj),{},{hash:JSON.stringify(h.lj),materialKey:(0,v.jj)(f.LW.FILL,ft)});function _t(e,t){var r=e.length;return e.push(null),t.then((function(t){return e[r]=t})),e}function pt(e){return!!(1&e)}function yt(e){return"worker:port-closed"===e.name}var xt=function(){function e(t,r){(0,a.Z)(this,e),this._idCounter=1,this._templateIdCounter=1,this._idToTemplateGroup=new Map,this._symbolToTemplate=new Map,this._fetchQueue=[],this._idToResolver=new Map,this._cimTemplateCache=new Map,this._cimAnalyses=[],this._lock=new st,this._fetchResource=t,this._tileInfo=r}return(0,s.Z)(e,[{key:"_markerError",get:function(){return this._errorTemplates.marker[0]}},{key:"_fillError",get:function(){return this._errorTemplates.fill[0]}},{key:"_lineError",get:function(){return this._errorTemplates.line[0]}},{key:"_textError",get:function(){return this._errorTemplates.line[0]}},{key:"createTemplateGroup",value:function(e,t){this._initErrorTemplates();var r=e.hash;if(this._symbolToTemplate.has(r))return this._symbolToTemplate.get(r);var n=new Array;t&&this._createMeshTemplates(n,t,!0),this._createMeshTemplates(n,e,!1);var i=this._createGroupId("expanded-cim"===e.type&&gt(e));return this._idToTemplateGroup.set(i,n),this._symbolToTemplate.set(r,i),i}},{key:"getTemplateGroup",value:function(e){return this._idToTemplateGroup.has(e)?this._idToTemplateGroup.get(e):ht}},{key:"getDynamicTemplateGroup",value:function(e){return this._idToTemplateGroup.has(e)?(pt(e)||ct.error("mapview-template-store","Id ".concat(e," does not refer to a dynamic template")),this._idToTemplateGroup.get(e)):ht}},{key:"getMosaicItem",value:function(e,t){var r=this,n=this._createTemplateId(),i=new Promise((function(e){return r._idToResolver.set(n,e)}));return this._fetchQueue.push({symbol:e,id:n,glyphIds:t}),i}},{key:"finalize",value:function(e){return this._fetchQueue.length||this._lock.isHeld()?ot(this._lock,this._fetchAllQueuedResources.bind(this),e):Promise.resolve()}},{key:"_initErrorTemplates",value:function(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],mt,!1),marker:this._createMeshTemplates([],vt,!1),line:this._createMeshTemplates([],dt,!1)})}},{key:"_fetchAllQueuedResources",value:function(e){var t=this;if(!this._fetchQueue.length)return Promise.resolve();var r=this._fetchQueue,n=this._cimAnalyses;return this._fetchQueue=[],this._cimAnalyses=[],Promise.all(n).then((function(){return t._fetchResource(r,e).then((function(e){var r,n=(0,i.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=r.value,s=a.id,o=a.mosaicItem;t._idToResolver.get(s)(o),t._idToResolver.delete(s)}}catch(u){n.e(u)}finally{n.f()}}))})).catch((function(e){(0,c.D_)(e)?t._fetchQueue=t._fetchQueue.concat(r):yt(e)||ct.error(new u.Z("mapview-template-store","Unable to fetch requested texture resources",e))}))}},{key:"_createGroupId",value:function(e){return this._idCounter++<<1|(e?1:0)}},{key:"_createTemplateId",value:function(){return this._templateIdCounter++}},{key:"_createSMS",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(n,ct)?it.Z.fromSimpleMarker(t,n):this._markerError);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createPMS",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(n,ct)?it.Z.fromPictureMarker(t,n):this._markerError);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createSFS",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return n=e.sent,i=n.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(i,ct)?nt.fromSimpleFill(t,i,r):this._fillError);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_createPFS",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return n=e.sent,i=n.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(i,ct)?nt.fromPictureFill(t,i,r):this._fillError);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_createSLS",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return n=e.sent,i=n.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(i,ct)?ze.fromSimpleLine(t,i):this._lineError);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_createLMS",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(n,ct)?it.Z.fromLineSymbolMarker(t,n):this._markerError);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createTS",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem(t);case 2:return r=e.sent,n=r.glyphMosaicItems,e.abrupt("return",at.Z.fromText(t,n));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createCIMText",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem((0,lt.xS)(t),(0,Qe._)(t.text));case 2:return r=e.sent,n=r.glyphMosaicItems,e.abrupt("return",(0,Ae.ok)(n,ct)?at.Z.fromCIMText(t,n,this._tileInfo):this._textError);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createCIMFill",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem((0,lt.xS)(t));case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(n,ct)?nt.fromCIMFill(t,n,this._tileInfo):this._fillError);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createCIMLine",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem((0,lt.xS)(t));case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(n,ct)?ze.fromCIMLine(t,n,this._tileInfo):this._lineError);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createCIMMarker",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMosaicItem((0,lt.xS)(t));case 2:return r=e.sent,n=r.spriteMosaicItem,e.abrupt("return",(0,Ae.ok)(n,ct)?it.Z.fromCIMMarker(t,n,this._tileInfo):this._markerError);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createCIM",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.templateHash,!this._cimTemplateCache.has(r)){e.next=3;break}return e.abrupt("return",this._cimTemplateCache.get(r));case 3:e.t0=t.type,e.next="marker"===e.t0?6:"line"===e.t0?8:"fill"===e.t0?10:"text"===e.t0?12:13;break;case 6:return n=this._createCIMMarker(t),e.abrupt("break",13);case 8:return n=this._createCIMLine(t),e.abrupt("break",13);case 10:return n=this._createCIMFill(t),e.abrupt("break",13);case 12:n=this._createCIMText(t);case 13:return e.abrupt("return",(n.then((function(e){return i._cimTemplateCache.set(r,e)})),n));case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createDynamicCIM",value:function(e){var t,r=e.templateHash;if(this._cimTemplateCache.has(r))return this._cimTemplateCache.get(r);switch(e.type){case"marker":t=Ne.fromCIMMarker(e,this._tileInfo);break;case"line":t=De.fromCIMLine(e,this._tileInfo);break;case"fill":t=Ve.fromCIMFill(e,this._tileInfo);break;case"text":t=tt.fromCIMText(e,this._tileInfo)}return this._cimTemplateCache.set(r,t),t}},{key:"_createPrimitiveMeshTemplates",value:function(e,t,r){switch(t.type){case"esriSMS":return _t(e,this._createSMS(t));case"esriPMS":return _t(e,this._createPMS(t));case"esriSFS":return _t(e,this._createSFS(t,r));case"line-marker":return _t(e,this._createLMS(t));case"esriPFS":return _t(e,this._createPFS(t,r));case"esriSLS":return _t(e,this._createSLS(t,!1));case"esriTS":return _t(e,this._createTS(t));default:return ct.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),e}}},{key:"_createMeshTemplates",value:function(e,t,r){if(-1!==t.type.indexOf("3d"))return ct.error("3D symbols are not supported with MapView"),e;if("expanded-cim"===t.type){var n,a=(0,i.Z)(t.layers);try{for(a.s();!(n=a.n()).done;){var s=n.value;"function"==typeof s.materialHash?e.push(this._createDynamicCIM(s)):_t(e,this._createCIM(s))}}catch(c){a.e(c)}finally{a.f()}return e}if("composite-symbol"===t.type){var o,u=(0,i.Z)(t.layers);try{for(u.s();!(o=u.n()).done;){var l=o.value;this._createPrimitiveMeshTemplates(e,l,r)}}catch(c){u.e(c)}finally{u.f()}return e}return"cim"===t.type||"label"===t.type||"web-style"===t.type?e:this._createPrimitiveMeshTemplates(e,t,r)}}]),e}(),gt=function(e){if(!e.layers)return!1;var t,r=(0,i.Z)(e.layers);try{for(r.s();!(t=r.n()).done;){var n=t.value;if("function"==typeof n.materialHash)return!0}}catch(a){r.e(a)}finally{r.f()}return!1}},4611:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(2394),i=r(76133),a=r(92751),s=r(99418),o=r(49161),u=r(49081),l=r(597),c=r(52258),h=r(95195),f=r(92963),v=r(14621),d=r(72239),m=r(57521),_=r(94868),p=r(80506),y=5,x=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e,n,a,s,o,u,h,m,_,p,x,g,k,w,M,b,Z,L){var S,W=arguments.length>18&&void 0!==arguments[18]&&arguments[18],z=arguments.length>19?arguments[19]:void 0,I=arguments.length>20?arguments[20]:void 0;(0,i.Z)(this,r),S=t.call(this),S._xOffset=(0,l.F2)(k),S._yOffset=(0,l.F2)(w),S._decoration=p||"none",S._color=o,S._haloColor=u,S._haloSize=Math.min(Math.floor(y*(0,l.F2)((0,l.t_)(a))),127),S._size=Math.min(Math.round((0,l.F2)(n)),127);var T=Math.min(Math.round((0,l.F2)(s||n)),127);S._referenceSize=Math.round(Math.sqrt(256*T)),S._scale=S._size/f.Ex,S._angle=g,S._justify=(0,c.Hd)(h||"center"),S._xAlignD=(0,c.kH)(h||"center"),S._yAlignD=(0,c.b7)(m||"baseline"),S._baseline="baseline"===(m||"baseline"),S._bitset=(1===_?1:0)|(x?1:0)<<1;var P=d.m2.load(e);return P.sdf=!0,S._materialKey=P.data,S._lineWidth=(0,l.F2)(M)||512,S._lineHeight=b||1,S._textPlacement=Z,S._effects=L,S._isCIM=W,S._minMaxZoom=(0,v.UJ)(Math.round(z*f.MI),Math.round(I*f.MI)),S}return(0,a.Z)(r,null,[{key:"fromText",value:function(e,t){var i=new r(e.materialKey,e.font.size,e.haloSize||0,e.font.size,e.color&&(0,h.aH)(e.color)||0,e.haloColor&&(0,h.aH)(e.haloColor)||0,e.horizontalAlignment,e.verticalAlignment,0,e.font.decoration,!1,e.angle||0,e.xoffset,e.yoffset,e.lineWidth,e.lineHeight,null,null,!1,m.Xe,m.eW),a=(0,u.E)(e.text),s=(0,n.Z)(a,2),o=s[1];return i.bindTextInfo(t,o),i._vertexBoundsScale=e.maxVVSize?e.maxVVSize/e.font.size:1,i}},{key:"fromCIMText",value:function(e,t,i){var a=e.scaleFactor||1,s=e.size*e.sizeRatio*a,o=(0,m._f)(e.scaleInfo,i),l=(0,n.Z)(o,2),c=l[0],f=l[1],v=new r(e.materialKey,s,e.outlineSize*e.sizeRatio,e.referenceSize,(0,h.t2)(e.color),(0,h.t2)(e.outlineColor),e.horizontalAlignment,e.verticalAlignment,e.alignment,e.decoration,e.colorLocked,e.angle,e.offsetX*e.sizeRatio*a,e.offsetY*e.sizeRatio*a,512,1,e.markerPlacement,e.effects,!0,c,f),d=(0,u.E)(e.text),_=(0,n.Z)(d,2),p=_[1];return v.bindTextInfo(t,p),v._vertexBoundsScale=e.maxVVSize?e.maxVVSize/s:1,v}}]),r}((0,_.Z)(p.Z))},57521:function(e,t,r){r.d(t,{Fv:function(){return o},NW:function(){return c},TK:function(){return u},Xe:function(){return n},_f:function(){return h},eW:function(){return i},lu:function(){return a},mf:function(){return l}});var n=0,i=100;function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function s(e,t){return Math.sqrt(e*e+t*t)}function o(e){var t=s(e[0],e[1]);e[0]/=t,e[1]/=t}function u(e,t){return s(e[0]-t[0],e[1]-t[1])}function l(e){return"function"==typeof e}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return 1/Math.max(e,1)}function h(e,t){return[!!e.minScale&&t.scaleToZoom(e.minScale)||n,!!e.maxScale&&t.scaleToZoom(e.maxScale)||i]}},40304:function(e,t,r){r.d(t,{fL:function(){return k}});var n=r(2394),i=r(4367),a=r(62032),s=r(50460),o=r(87349),u=r(99418),l=r(49161),c=r(76133),h=r(92751),f=r(16198),v=(r(74916),r(4723),r(51532),r(41539),r(78783),r(33948),r(2707),r(21249),r(39714),r(69600),r(78975),r(25585)),d=r(87441),m=r(26847),_=r(74887),p=r(64880),y=r(81589),x=r(31567),g=d.Z.getLogger("esri/views/2d/engine/webgl/util/Matcher");function k(e,t,r,n){return w.apply(this,arguments)}function w(){return w=(0,f.Z)(regeneratorRuntime.mark((function e(t,r,n,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="simple"===e.t0?3:"map"===e.t0?4:"interval"===e.t0?5:"dictionary"===e.t0?6:"subtype"===e.t0?7:8;break;case 3:return e.abrupt("return",b.fromBasicRenderer(t,r,n,i));case 4:return e.abrupt("return",S.fromUVRenderer(t,r,n,i));case 5:return e.abrupt("return",L.fromCBRenderer(t,r,n,i));case 6:return e.abrupt("return",P.fromDictionaryRenderer(t,r,n,i));case 7:return e.abrupt("return",Z.fromSubtypes(t,r,n,i));case 8:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}var M,b=function(){function e(){(0,c.Z)(this,e),this.type="feature",this._defaultResult=null}return(0,h.Z)(e,[{key:"size",value:function(){return 1}},{key:"getDefault",value:function(){return this._defaultResult}},{key:"setDefault",value:function(e){this._defaultResult=e}},{key:"match",value:function(e,t,r,n,i){return this.getDefault()}},{key:"analyze",value:function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t,r,n,i,a,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));function t(t,r,n,i,a,s){return e.apply(this,arguments)}return t}()}],[{key:"fromBasicRenderer",value:function(){var t=(0,f.Z)(regeneratorRuntime.mark((function t(r,n,i,a){var s,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=new e,!r.symbol){t.next=7;break}return t.next=4,(0,x.B3)(r.symbol,i,a);case 4:o=t.sent,u=n.createTemplateGroup(o,null),s.setDefault(u);case 7:return t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})));function r(e,r,n,i){return t.apply(this,arguments)}return r}()}]),e}(),Z=function(e){(0,u.Z)(r,e);var t=(0,l.Z)(r);function r(e,n){var i;return(0,c.Z)(this,r),i=t.call(this),i._subMatchers=e,i._subtypeField=n,i}return(0,h.Z)(r,[{key:"match",value:function(e,t,r,n,i){var a=t.readAttribute(this._subtypeField),s=this._subMatchers.get(a);return s?s.match(e,t,r,n,i):null}}],[{key:"fromSubtypes",value:function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t,n,i,a){var s,o,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(l in s=new Map,o=[],u=function(e){var r=parseInt(e,10),u=k(t.renderers[e],n,i,a).then((function(e){return s.set(r,e)}));o.push(u)},t.renderers)u(l);return e.next=5,Promise.all(o);case 5:return e.abrupt("return",new r(s,t.subtypeField));case 6:case"end":return e.stop()}}),e)})));function t(t,r,n,i){return e.apply(this,arguments)}return t}()}]),r}(b),L=function(e){(0,u.Z)(r,e);var t=(0,l.Z)(r);function r(e,n,i,a){var s;return(0,c.Z)(this,r),s=t.call(this),s.type="interval",s._intervals=[],s._isMaxInclusive=n,s._fieldIndex=a,s._field=e,s._normalizationInfo=i,s}return(0,h.Z)(r,[{key:"add",value:function(e,t){this._intervals.push({interval:e,result:t}),this._intervals.sort((function(e,t){return e.interval.min-t.interval.min}))}},{key:"size",value:function(){return(0,s.Z)((0,o.Z)(r.prototype),"size",this).call(this)+this._intervals.length}},{key:"match",value:function(e,t,r,n,i){if(null==this._fieldIndex&&!this._field)return this.getDefault();var a=null!=this._fieldIndex?t.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(t);if(!a&&(null==a||isNaN(a)))return this.getDefault();for(var s=0;s<this._intervals.length;s++){var o=this._intervals[s],u=o.interval,l=o.result,c=a>=u.min,h=this._isMaxInclusive?a<=u.max:a<u.max;if(c&&h)return l}return this.getDefault()}},{key:"_needsNormalization",value:function(){var e=this._normalizationInfo;return e&&(e.normalizationField||e.normalizationTotal||e.normalizationType)}},{key:"_getValueFromField",value:function(e){var t=e.readAttribute(this._field);if(!this._needsNormalization()||null==t)return t;var r=this._normalizationInfo,n=r.normalizationField,i=r.normalizationTotal,a=r.normalizationType,s=!!n&&e.readAttribute(n);if(a)switch(a){case"esriNormalizeByField":return s?t/s:void 0;case"esriNormalizeByLog":return Math.log(t)*Math.LOG10E;case"esriNormalizeByPercentOfTotal":return t/i*100;default:return void g.error("Found unknown normalization type: ".concat(a))}else g.error("Normalization is required, but no type was set!")}}],[{key:"fromCBRenderer",value:function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t,n,i,a){var s,o,u,l,c,h,v,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.isMaxInclusive,o=t.normalizationField,u=t.normalizationTotal,l=t.normalizationType,c=t.field,h=new r(c,s,{normalizationField:o,normalizationTotal:u,normalizationType:l},t.fieldIndex),e.next=8,(0,x.B3)(t.backgroundFillSymbol,i,a);case 8:return v=e.sent,e.next=11,Promise.all(t.intervals.map(function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t){var r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x.B3)(t.symbol,i,a);case 2:return r=e.sent,e.next=5,n.createTemplateGroup(r,v);case 5:s=e.sent,o={min:t.min,max:t.max},h.add(o,s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return e.next=13,(0,x.B3)(t.defaultSymbol,i,a);case 13:if(d=e.sent,!d){e.next=19;break}return e.next=17,n.createTemplateGroup(d,v);case 17:m=e.sent,h.setDefault(m);case 19:return e.abrupt("return",h);case 20:case"end":return e.stop()}}),e)})));function t(t,r,n,i){return e.apply(this,arguments)}return t}()}]),r}(b),S=function(e){(0,u.Z)(r,e);var t=(0,l.Z)(r);function r(e,n,i){var a;return(0,c.Z)(this,r),a=t.call(this),a.type="map",a._nullResult=null,a._resultsMap=new Map,a._fieldsIndex=i,a._fields=e,a._seperator=n||"",a}return(0,h.Z)(r,[{key:"setNullResult",value:function(e){this._nullResult=e}},{key:"add",value:function(e,t){this._resultsMap.set(e.toString(),t)}},{key:"size",value:function(){return(0,s.Z)((0,o.Z)(r.prototype),"size",this).call(this)+this._resultsMap.size}},{key:"match",value:function(e,t,r,n,i){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();var a=null!=this._fieldsIndex?t.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(t);if(null!==this._nullResult&&(null==a||""===a||"<Null>"===a))return this._nullResult;if(!a&&null==a)return this.getDefault();var s=a.toString();return this._resultsMap.has(s)?this._resultsMap.get(s):this.getDefault()}},{key:"_getValueFromFields",value:function(e){var t,r=[],n=(0,a.Z)(this._fields);try{for(n.s();!(t=n.n()).done;){var i=t.value,s=e.readAttribute(i);null==s||""===s?r.push("<Null>"):r.push(s)}}catch(o){n.e(o)}finally{n.f()}return r.join(this._seperator)}}],[{key:"fromUVRenderer",value:function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t,n,i,a){var s,o,u,l,c,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.fieldDelimiter,o=[t.field],t.field2&&o.push(t.field2),t.field3&&o.push(t.field3),e.next=4,(0,x.B3)(t.backgroundFillSymbol,i,a);case 4:return u=e.sent,l=new r(o,s,t.fieldIndex),e.next=8,Promise.all(t.map.map(function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,x.B3)(t.symbol,i,a);case 2:return r=e.sent,e.next=5,n.createTemplateGroup(r,u);case 5:s=e.sent,"<Null>"===t.value?l.setNullResult(s):l.add(t.value,s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.next=10,(0,x.B3)(t.defaultSymbol,i,a);case 10:if(c=e.sent,!c){e.next=16;break}return e.next=14,n.createTemplateGroup(c,u);case 14:h=e.sent,l.setDefault(h);case 16:return e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)})));function t(t,r,n,i){return e.apply(this,arguments)}return t}()}]),r}(b);function W(e,t){return z.apply(this,arguments)}function z(){return z=(0,f.Z)(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t||1,"number"!=typeof n){e.next=3;break}return e.abrupt("return",(function(e,t,r){return n}));case 3:return e.next=5,(0,_.Yi)(n,r.spatialReference,r.fields);case 5:return i=e.sent,e.abrupt("return",(function(e,t,n){return(0,y.Z)(i,e,{$view:n},r.geometryType,t)||1}));case 7:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return T=(0,f.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(M||(M=r.e(1112).then(r.bind(r,61112))),M));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}var P=function(e){(0,u.Z)(s,e);var t=(0,l.Z)(s);function s(e,r,n,i,a){var o;return(0,c.Z)(this,s),o=t.call(this),o.type="dictionary",o._groupIdCache=new m.Z(100),o._renderer=e,o._fieldMap=e.fieldMap,o._symbolFields=e.getSymbolFields(),o._templates=r,o._info=n,o._scaleFn=i,o._schemaUtilsModule=a,o}return(0,h.Z)(s,[{key:"_analyzeFeature",value:function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t,r,n,s,o){var u,l,c,h,f,d,m,_,y=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=t.readLegacyFeature(),l=this._scaleFn(u,n,s),c=this._attributeHash(u)+"-"+l,h=this._groupIdCache.get(c),!h){e.next=3;break}return e.abrupt("return",h);case 3:return f=(0,i.Z)((0,i.Z)({},s),{},{spatialReference:this._info.spatialReference,abortOptions:o,fields:this._info.fields}),e.next=6,this._renderer.getSymbolAsync(u,f);case 6:return d=e.sent,m=this._schemaUtilsModule.createSymbolSchema(d,this._renderer),_=(0,x.B3)(m,this._info,r,o).then((function(e){if("expanded-cim"!==e.type)return g.error(new v.Z("mapview-bad-type","Found unexpected type ".concat(e.type," in dictionary response"))),null;e.hash+="-"+l;var t,r=(0,a.Z)(e.layers);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.scaleFactor=l,n.templateHash+="-"+l,"text"===n.type&&"string"==typeof n.text&&n.text.indexOf("[")>-1&&(n.text=(0,p.Qs)(y._fieldMap,n.text,n.cim.textCase))}}catch(i){r.e(i)}finally{r.f()}return y._templates.createTemplateGroup(e,null)})),e.abrupt("return",(this._groupIdCache.put(c,_,1),_));case 10:case"end":return e.stop()}}),e,this)})));function t(t,r,n,i,a){return e.apply(this,arguments)}return t}()},{key:"analyze",value:function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t,r,n,i,a,s){var o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(o=r.getCursor(),u=[];o.next();)u.push(this._analyzeFeature(o,n,i,a,s));return e.abrupt("return",Promise.all(u));case 3:case"end":return e.stop()}}),e,this)})));function t(t,r,n,i,a,s){return e.apply(this,arguments)}return t}()},{key:"match",value:function(e,t,r,n,i){return null}},{key:"_attributeHash",value:function(e){var t,r="",n=(0,a.Z)(this._symbolFields);try{for(n.s();!(t=n.n()).done;){var i=t.value,s=this._fieldMap[i];s&&(r+=e.attributes[s]+"-")}}catch(o){n.e(o)}finally{n.f()}return r}}],[{key:"fromDictionaryRenderer",value:function(){var e=(0,f.Z)(regeneratorRuntime.mark((function e(t,i,a,o){var u,l,c,h,f,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Promise.resolve().then(r.bind(r,76143)),I()]);case 2:return u=e.sent,l=(0,n.Z)(u,2),c=l[0].default,h=l[1],f=c.fromJSON(t.renderer),e.next=9,f.fetchResources({spatialReference:a.spatialReference,fields:a.fields});case 9:return e.next=11,W(f.scaleExpression,a);case 11:return v=e.sent,e.abrupt("return",new s(f,i,a,v,h));case 13:case"end":return e.stop()}}),e)})));function t(t,r,n,i){return e.apply(this,arguments)}return t}()}]),s}(b)},56663:function(e,t,r){r.d(t,{ok:function(){return i}});r(68309);var n=r(25585);function i(e,t){if(e&&"name"in e){var r=e;return t&&t.error(new n.Z(r.name,r.message,r.details)),!1}return!0}},73761:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(76133),i=r(92751),a=(r(18264),r(41539),r(35109),r(48675),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(44197),r(21703),r(47042),1.25),s=function(){function e(t,r){(0,n.Z)(this,e),this._pos=0;var i=r?this._roundToNearest(r,t.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(i),this._buffer=new t(this._array),this._ctor=t,this._i16View=new Int16Array(this._array)}return(0,i.Z)(e,[{key:"length",get:function(){return this._pos}},{key:"_roundToNearest",value:function(e,t){var r=Math.round(e);return r+(t-r%t)}},{key:"_ensureSize",value:function(e){if(this._pos+e>=this._buffer.length){var t=this._roundToNearest((this._array.byteLength+e*this._buffer.BYTES_PER_ELEMENT)*a,this._buffer.BYTES_PER_ELEMENT),r=new ArrayBuffer(t),n=new this._ctor(r);n.set(this._buffer,0),this._array=r,this._buffer=n,this._i16View=new Int16Array(this._array)}}},{key:"ensureSize",value:function(e){this._ensureSize(e)}},{key:"writeF32",value:function(e){this._ensureSize(1);var t=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=e,this._pos++,t}},{key:"push",value:function(e){this._ensureSize(1);var t=this._pos;return this._buffer[this._pos++]=e,t}},{key:"writeFixed",value:function(e){this._buffer[this._pos++]=e}},{key:"setValue",value:function(e,t){this._buffer[e]=t}},{key:"i1616Add",value:function(e,t,r){this._i16View[2*e]+=t,this._i16View[2*e+1]+=r}},{key:"getValue",value:function(e){return this._buffer[e]}},{key:"incr",value:function(e){if(this._buffer.length<e)throw new Error("Increment index overflows the target buffer");this._buffer[e]++}},{key:"decr",value:function(e){this._buffer[e]--}},{key:"writeRegion",value:function(e){this._ensureSize(e.length);var t=this._pos;return this._buffer.set(e,this._pos),this._pos+=e.length,t}},{key:"writeManyFrom",value:function(e,t,r){this._ensureSize(r-t);for(var n=t;n!==r;n++)this.writeFixed(e._buffer[n])}},{key:"buffer",value:function(){var e=this._array.slice(0,4*this._pos);return this.destroy(),e}},{key:"toArray",value:function(){for(var e=this._array,t=[],r=0;r<e.byteLength/4;r++)t.push(e[r]);return t}},{key:"seek",value:function(e){this._pos=e}},{key:"destroy",value:function(){this._array=null,this._buffer=null}}]),e}()},5250:function(e,t,r){r.d(t,{M:function(){return n}});r(40405);function n(e,t,r,n){var i=e.clone(),a=1<<i.level,s=i.col+t,o=i.row+r;return n&&s<0?(i.col=s+a,i.world-=1):s>=a?(i.col=s-a,i.world+=1):i.col=s,i.row=o,i}},64161:function(e,t,r){function n(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}r.d(t,{_:function(){return n}})},31567:function(e,t,r){r.d(t,{xS:function(){return W},B3:function(){return S}});var n=r(16198),i=(r(78975),r(41539),r(78783),r(33948),r(21249),r(9816)),a=r(62032),s=r(76133),o=r(92751),u=r(49026),l=r(72239),c={marker:u.LW.MARKER,fill:u.LW.FILL,line:u.LW.LINE,text:u.LW.TEXT},h=function(){function e(t,r,n,i){(0,s.Z)(this,e);var o={minScale:null==r?void 0:r.minScale,maxScale:null==r?void 0:r.maxScale},u=f(o);this.layers=t,this.data=r,this.hash=this._createHash()+u,this.rendererKey=n;var h,v={isOutline:!1,isOutlinedFill:!1,placement:null,stride:{fill:"default"},vvFlags:n},d=(0,a.Z)(t);try{for(d.s();!(h=d.n()).done;){var m=h.value,_=c[m.type];m.materialKey=(0,l.jj)(_,v),m.maxVVSize=i,m.scaleInfo=o,m.templateHash+=u}}catch(p){d.e(p)}finally{d.f()}}return(0,o.Z)(e,[{key:"type",get:function(){return"expanded-cim"}},{key:"_createHash",value:function(){var e,t="",r=(0,a.Z)(this.layers);try{for(r.s();!(e=r.n()).done;){var n=e.value;t+=n.templateHash}}catch(i){r.e(i)}finally{r.f()}return t}}]),e}();function f(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}r(68309),r(74916),r(15306),r(69826);var v=r(5246),d=r(25585),m=r(24446),_=r(58476),p=r(88096),y=r(93554),x=r(66328);function g(e,t,r){return k.apply(this,arguments)}function k(){return k=(0,n.Z)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.name){e.next=2;break}return e.abrupt("return",Promise.reject(new d.Z("style-symbol-reference-name-missing","Missing name in style symbol reference")));case 2:if(!t.styleName||"Esri2DPointSymbolsStyle"!==t.styleName){e.next=4;break}return e.abrupt("return",w(t,n));case 4:return e.prev=4,e.t0=b,e.next=8,(0,x.n2)(t,r,n);case 8:return e.t1=e.sent,e.t2=t.name,e.t3=r,e.t4=n,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 15:return e.prev=15,e.t5=e["catch"](4),e.abrupt("return",((0,m.k_)(e.t5),null));case 18:case"end":return e.stop()}}),e,null,[[4,15]])}))),k.apply(this,arguments)}function w(e,t){return M.apply(this,arguments)}function M(){return M=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=x.wm.replace(/\{SymbolName\}/gi,t.name),e.prev=1,e.next=4,(0,x.EJ)(n,r);case 4:return i=e.sent,e.abrupt("return",(0,x.KV)(i.data));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",((0,m.k_)(e.t0),null));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),M.apply(this,arguments)}function b(e,t,r,n){return Z.apply(this,arguments)}function Z(){return Z=(0,n.Z)(regeneratorRuntime.mark((function e(t,r,n,i){var a,s,o,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.data,s={portal:n&&n.portal||p.Z.getDefault(),url:(0,_.mN)(t.baseUrl),origin:"portal-item"},o=a.items.find((function(e){return e.name===r})),o){e.next=3;break}throw new d.Z("symbolstyleutils:symbol-name-not-found","The symbol name '".concat(r,"' could not be found"),{symbolName:r});case 3:return u=(0,y.f)((0,x.v9)(o,"cimRef"),s),(0,v.XO)()&&(u=(0,v.pJ)(u)),e.prev=5,e.next=8,(0,x.EJ)(u,i);case 8:return l=e.sent,e.abrupt("return",(0,x.KV)(l.data));case 12:return e.prev=12,e.t0=e["catch"](5),e.abrupt("return",((0,m.k_)(e.t0),null));case 15:case"end":return e.stop()}}),e,null,[[5,12]])}))),Z.apply(this,arguments)}var L=function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,(0,i.c)(t.data,r,n);case 3:return e.t1=e.sent,e.t2=t.data,e.t3=t.rendererKey,e.t4=t.maxVVSize,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r,n,i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if("cim"!==t.type){e.next=4;break}return e.abrupt("return",L(t,r,n));case 4:if("web-style"!==t.type){e.next=12;break}return e.next=7,g(t,null,i);case 7:return e.t0=e.sent,e.t1=t.rendererKey,e.t2=t.maxVVSize,a={type:"cim",data:e.t0,rendererKey:e.t1,maxVVSize:e.t2},e.abrupt("return",L(a,r,n));case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n,i){return e.apply(this,arguments)}}();function W(e){if(!e)return null;var t=e.type,r=e.cim,n=e.url,i=e.materialHash,a={cim:r,type:t,mosaicHash:i,url:n,size:null,dashTemplate:null,path:null,text:null,fontName:null};switch(t){case"marker":a.size=e.size,a.path=e.path;break;case"line":a.dashTemplate=e.dashTemplate;break;case"text":a.text=e.text,a.fontName=e.fontName}return a}}}]);