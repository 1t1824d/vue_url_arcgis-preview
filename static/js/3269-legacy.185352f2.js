"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[3269],{33269:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var n=r(4367),i=r(62032),a=r(16198),s=r(76133),u=r(92751),o=(r(69826),r(41539),r(68309),r(40561),r(26699),r(32023),r(78783),r(33948),r(39714),r(9653),r(78975),r(35680)),l=r(25585),c=r(87441),p=r(27092),d=r(24446),f=r(64316),h=r(71563),y=r(32503),g=r(125),m=r(76400),v=r(62415),b=r(66826),w=r(94288),x=r(14685),k=r(83683),_=r(36549),Z=r(63390),I={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},F=function(){function e(){var t=this;(0,s.Z)(this,e),this._queryEngine=null,this._snapshotFeatures=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._fetch(r);case 2:return n=e.sent,e.abrupt("return",t._createFeatures(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return(0,u.Z)(e,[{key:"destroy",value:function(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}},{key:"load",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var r,a,s,u,o,c,p,d,f,y,m,x,F,E,R,S,T,j,q,P,O,G,C,D,M,A,Q,N=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=N.length>1&&void 0!==N[1]?N[1]:{},this.loadOptions={url:t.url,customParameters:t.customParameters},a=[],e.next=5,this._checkProjection(t.spatialReference);case 5:if(s=null,e.t0=t.url,!e.t0){e.next=11;break}return e.next=10,this._fetch(null==r?void 0:r.signal);case 10:s=e.sent;case 11:u=(0,b.my)(s,{geometryType:t.geometryType}),o=t.fields||u.fields||[],c=null!=t.hasZ?t.hasZ:u.hasZ,p=u.geometryType,d=t.objectIdField||u.objectIdFieldName||"__OBJECTID",f=t.spatialReference||h.Zn,y=t.timeInfo,o===u.fields&&u.unknownFields.length>0&&a.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:u.unknownFields}}),m=o.find((function(e){return e.name===d})),m?("esriFieldTypeString"!==m.type&&(m.type="esriFieldTypeOID"),m.editable=!1,m.nullable=!1):(m={alias:d,name:d,type:"string"===u.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},o.unshift(m)),x={},F=(0,i.Z)(o),e.prev=18,F.s();case 20:if((E=F.n()).done){e.next=29;break}if(R=E.value,null==R.name&&(R.name=R.alias),null==R.alias&&(R.alias=R.name),R.name){e.next=24;break}throw new l.Z("geojson-layer:invalid-field-name","field name is missing",{field:R});case 24:if(_.v.jsonValues.includes(R.type)){e.next=26;break}throw new l.Z("geojson-layer:invalid-field-type",'invalid type for field "'.concat(R.name,'"'),{field:R});case 26:R.name!==m.name&&(S=(0,Z.os)(R),void 0!==S&&(x[R.name]=S));case 27:e.next=20;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e["catch"](18),F.e(e.t1);case 34:return e.prev=34,F.f(),e.finish(34);case 37:return this._fieldsIndex=new k.Z(o),T=this._fieldsIndex.requiredFields.indexOf(m),T>-1&&this._fieldsIndex.requiredFields.splice(T,1),y&&(y.startTimeField&&(j=this._fieldsIndex.get(y.startTimeField),j?(y.startTimeField=j.name,j.type="esriFieldTypeDate"):y.startTimeField=null),y.endTimeField&&(q=this._fieldsIndex.get(y.endTimeField),q?(y.endTimeField=q.name,q.type="esriFieldTypeDate"):y.endTimeField=null),y.trackIdField&&(P=this._fieldsIndex.get(y.trackIdField),P?y.trackIdField=P.name:(y.trackIdField=null,a.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:y}}))),y.startTimeField||y.endTimeField||(a.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:y}}),y=null)),O=p?(0,w.bU)(p):null,G={warnings:a,featureErrors:[],layerDefinition:(0,n.Z)((0,n.Z)({},I),{},{drawingInfo:O,templates:(0,w.Hq)(x),extent:null,geometryType:p,objectIdField:d,fields:o,hasZ:!!c,timeInfo:y})},this._queryEngine=new v.Z({fields:o,geometryType:p,hasM:!1,hasZ:c,objectIdField:d,spatialReference:f,timeInfo:y,featureStore:new g.Z({geometryType:p,hasM:!1,hasZ:c}),cacheSpatialQueries:!0}),this._createDefaultAttributes=(0,w.Dm)(x,d),e.next=44,this._createFeatures(s);case 44:return C=e.sent,this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,C),D=this._normalizeFeatures(C,G.warnings,G.featureErrors),this._queryEngine.featureStore.addMany(D),G.layerDefinition.extent=this._queryEngine.fullExtent,G.layerDefinition.timeInfo&&(M=this._queryEngine.timeExtent,A=M.start,Q=M.end,G.layerDefinition.timeInfo.timeExtent=[A,Q]),e.abrupt("return",G);case 49:case"end":return e.stop()}}),e,this,[[18,31,34,37]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"applyEdits",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this._queryEngine,n=r.spatialReference,i=r.geometryType,e.next=3,Promise.all([(0,x.b)(n,i),(0,m._W)(t.adds,n),(0,m._W)(t.updates,n)]);case 3:return e.next=5,this._waitSnapshotComplete();case 5:return e.abrupt("return",this._applyEdits(t));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"queryFeatures",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQuery(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryFeatureCount",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForCount(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryObjectIds",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForIds(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryExtent",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForExtent(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"querySnapping",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this._waitSnapshotComplete();case 3:return e.abrupt("return",this._queryEngine.executeQueryForSnapping(t,r.signal));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"refresh",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadOptions.customParameters=t,null==(r=this._snapshotTask)||r.abort(),this._snapshotTask=(0,d.vr)(this._snapshotFeatures),this._snapshotTask.promise.then((function(e){n._queryEngine.featureStore.clear(),n._objectIdGenerator=n._createObjectIdGenerator(n._queryEngine,e);var t=n._normalizeFeatures(e);t&&n._queryEngine.featureStore.addMany(t)}),(function(e){n._queryEngine.featureStore.clear(),(0,d.D_)(e)||c.Z.getLogger("esri.layers.GeoJSONLayer").error(new l.Z("geojson-layer:refresh","An error occurred during refresh",{error:e}))})),e.next=6,this._waitSnapshotComplete();case 6:return e.abrupt("return",{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent});case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createFeatures",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var r,n,a,s,u,o,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this._queryEngine,n=r.geometryType,a=r.hasZ,s=r.objectIdField,u=(0,b.lG)(t,{geometryType:n,hasZ:a,objectIdField:s}),!(0,h.fS)(this._queryEngine.spatialReference,h.Zn)){o=(0,i.Z)(u);try{for(o.s();!(l=o.n()).done;)c=l.value,(0,p.pC)(c.geometry)&&(c.geometry=(0,y.GH)((0,m.iV)((0,y.di)(c.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),h.Zn,this._queryEngine.spatialReference)))}catch(d){o.e(d)}finally{o.f()}}return e.abrupt("return",u);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_waitSnapshotComplete",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._snapshotTask||this._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,this._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return e.abrupt("return",this._waitSnapshotComplete());case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_fetch",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.loadOptions,i=r.url,a=r.customParameters,e.next=5,(0,o["default"])(i,{responseType:"json",query:(0,n.Z)({},a),signal:t});case 5:return s=e.sent.data,e.next=8,(0,b.O3)(s);case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_normalizeFeatures",value:function(e,t,r){var n,a=this._queryEngine.objectIdField,s=[],u=(0,i.Z)(e);try{for(u.s();!(n=u.n()).done;){var o=n.value,l=this._createDefaultAttributes(),c=(0,x.O0)(this._fieldsIndex,l,o.attributes,!0,t);c?null==r||r.push(c):(this._assignObjectId(l,o.attributes,!0),o.attributes=l,o.objectId=l[a],s.push(o))}}catch(p){u.e(p)}finally{u.f()}return s}},{key:"_applyEdits",value:function(e){var t=e.adds,r=e.updates,n=e.deletes,a={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(a,t),r&&r.length&&this._applyUpdateEdits(a,r),n&&n.length){var s,u=(0,i.Z)(n);try{for(u.s();!(s=u.n()).done;){var o=s.value;a.deleteResults.push((0,x.d1)(o))}}catch(l){u.e(l)}finally{u.f()}this._queryEngine.featureStore.removeManyById(n)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:a}}},{key:"_applyAddEdits",value:function(e,t){var r,n=e.addResults,a=this._queryEngine,s=a.geometryType,u=a.hasM,o=a.hasZ,l=a.objectIdField,c=a.spatialReference,d=a.featureStore,h=[],g=(0,i.Z)(t);try{for(g.s();!(r=g.n()).done;){var v=r.value;if(v.geometry&&s!==(0,f.Ji)(v.geometry))n.push((0,x.av)("Incorrect geometry type."));else{var b=this._createDefaultAttributes(),w=(0,x.O0)(this._fieldsIndex,b,v.attributes);if(w)n.push(w);else{if(this._assignObjectId(b,v.attributes),v.attributes=b,null!=v.uid){var k=v.attributes[l];e.uidToObjectId[v.uid]=k}(0,p.pC)(v.geometry)&&(v.geometry=(0,m.iV)((0,x.og)(v.geometry,c),v.geometry.spatialReference,c)),h.push(v),n.push((0,x.d1)(v.attributes[l]))}}}}catch(_){g.e(_)}finally{g.f()}d.addMany((0,y.Yn)([],h,s,o,u,l))}},{key:"_applyUpdateEdits",value:function(e,t){var r,n=e.updateResults,a=this._queryEngine,s=a.geometryType,u=a.hasM,o=a.hasZ,l=a.objectIdField,c=a.spatialReference,d=a.featureStore,h=(0,i.Z)(t);try{for(h.s();!(r=h.n()).done;){var g=r.value,v=g.attributes,b=g.geometry,w=v&&v[l];if(null!=w)if(d.has(w)){var k=(0,y.EI)(d.getFeature(w),s,o,u);if((0,p.pC)(b)){if(s!==(0,f.Ji)(b)){n.push((0,x.av)("Incorrect geometry type."));continue}k.geometry=(0,m.iV)((0,x.og)(b,c),b.spatialReference,c)}if(v){var _=(0,x.O0)(this._fieldsIndex,k.attributes,v);if(_){n.push(_);continue}}d.add((0,y.XA)(k,s,o,u,l)),n.push((0,x.d1)(w))}else n.push((0,x.av)("Feature with object id ".concat(w," missing")));else n.push((0,x.av)("Identifier field ".concat(l," missing")))}}catch(Z){h.e(Z)}finally{h.f()}}},{key:"_createObjectIdGenerator",value:function(e,t){var r=e.fieldsIndex.get(e.objectIdField);if("esriFieldTypeString"===r.type)return function(){return r.name+"-"+Date.now().toString(16)};var n,a=Number.NEGATIVE_INFINITY,s=(0,i.Z)(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;u.objectId&&(a=Math.max(a,u.objectId))}}catch(o){s.e(o)}finally{s.f()}return a=Math.max(0,a)+1,function(){return a++}}},{key:"_assignObjectId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._queryEngine.objectIdField;e[n]=r&&n in t?t[n]:this._objectIdGenerator()}},{key:"_checkProjection",value:function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m._W)(h.Zn,t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new l.Z("geojson-layer","Projection not supported");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()},66826:function(e,t,r){r.d(t,{O3:function(){return C},lG:function(){return M},my:function(){return D},q9:function(){return h}});var n=r(9726),i=r(2394),a=r(62032),s=(r(78783),r(33948),r(68309),r(24603),r(28450),r(74916),r(88386),r(39714),r(77601),r(41539),r(70189),r(91038),r(57327),r(47941),r(78975),r(25585)),u=r(39423),o=r(82409),l=r(63390),c=regeneratorRuntime.mark(y),p=regeneratorRuntime.mark(g),d=regeneratorRuntime.mark(m),f={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function h(e){return f[e]}function y(e){var t,r,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:i.t0=e.type,i.next="Feature"===i.t0?3:"FeatureCollection"===i.t0?6:25;break;case 3:return i.next=5,e;case 5:return i.abrupt("break",25);case 6:t=(0,a.Z)(e.features),i.prev=7,t.s();case 9:if((r=t.n()).done){i.next=17;break}if(n=r.value,i.t1=n,!i.t1){i.next=15;break}return i.next=15,n;case 15:i.next=9;break;case 17:i.next=22;break;case 19:i.prev=19,i.t2=i["catch"](7),t.e(i.t2);case 22:return i.prev=22,t.f(),i.finish(22);case 25:case"end":return i.stop()}}),c,null,[[7,19,22,25]])}function g(e){var t,r,n,i,s,u,o,l,c;return regeneratorRuntime.wrap((function(p){while(1)switch(p.prev=p.next){case 0:if(e){p.next=2;break}return p.abrupt("return",null);case 2:p.t0=e.type,p.next="Point"===p.t0?5:"LineString"===p.t0||"MultiPoint"===p.t0?8:"MultiLineString"===p.t0||"Polygon"===p.t0?10:"MultiPolygon"===p.t0?27:58;break;case 5:return p.next=7,e.coordinates;case 7:return p.abrupt("break",58);case 8:return p.delegateYield(e.coordinates,"t1",9);case 9:return p.abrupt("break",58);case 10:t=(0,a.Z)(e.coordinates),p.prev=11,t.s();case 13:if((r=t.n()).done){p.next=18;break}return n=r.value,p.delegateYield(n,"t2",16);case 16:p.next=13;break;case 18:p.next=23;break;case 20:p.prev=20,p.t3=p["catch"](11),t.e(p.t3);case 23:return p.prev=23,t.f(),p.finish(23);case 26:return p.abrupt("break",58);case 27:i=(0,a.Z)(e.coordinates),p.prev=28,i.s();case 30:if((s=i.n()).done){p.next=50;break}u=s.value,o=(0,a.Z)(u),p.prev=33,o.s();case 35:if((l=o.n()).done){p.next=40;break}return c=l.value,p.delegateYield(c,"t4",38);case 38:p.next=35;break;case 40:p.next=45;break;case 42:p.prev=42,p.t5=p["catch"](33),o.e(p.t5);case 45:return p.prev=45,o.f(),p.finish(45);case 48:p.next=30;break;case 50:p.next=55;break;case 52:p.prev=52,p.t6=p["catch"](28),i.e(p.t6);case 55:return p.prev=55,i.f(),p.finish(55);case 58:case"end":return p.stop()}}),p,null,[[11,20,23,26],[28,52,55,58],[33,42,45,48]])}function m(e){var t,r,n,i,s,l,c,p,f,y,g,m,v,b=arguments;return regeneratorRuntime.wrap((function(d){while(1)switch(d.prev=d.next){case 0:t=b.length>1&&void 0!==b[1]?b[1]:{},r=t.geometryType,n=t.objectIdField,i=(0,a.Z)(e),d.prev=3,i.s();case 5:if((s=i.n()).done){d.next=18;break}if(l=s.value,p=l.geometry,f=l.properties,y=l.id,!p||h(p.type)===r){d.next=10;break}return d.abrupt("continue",16);case 10:return g=f||{},m=null!=(c=g[n])?c:null,n&&null!=y&&!g[n]&&(g[n]=m=y),v=new u.ZP(p?_(new o.Z,p,t):null,g,null,m),d.next=16,v;case 16:d.next=5;break;case 18:d.next=23;break;case 20:d.prev=20,d.t0=d["catch"](3),i.e(d.t0);case 23:return d.prev=23,i.f(),d.finish(23);case 26:case"end":return d.stop()}}),d,null,[[3,20,23,26]])}function v(e){var t,r=(0,a.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.length>2)return!0}}catch(i){r.e(i)}finally{r.f()}return!1}function b(e){return!x(e)}function w(e){return x(e)}function x(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],i=e[(r+1)%e.length];t+=n[0]*i[1]-i[0]*n[1]}return t<=0}function k(e){var t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function _(e,t,r){switch(t.type){case"LineString":return Z(e,t,r);case"MultiLineString":return I(e,t,r);case"MultiPoint":return F(e,t,r);case"MultiPolygon":return E(e,t,r);case"Point":return R(e,t,r);case"Polygon":return S(e,t,r)}}function Z(e,t,r){return q(e,t.coordinates,r),e}function I(e,t,r){var n,i=(0,a.Z)(t.coordinates);try{for(i.s();!(n=i.n()).done;){var s=n.value;q(e,s,r)}}catch(u){i.e(u)}finally{i.f()}return e}function F(e,t,r){return q(e,t.coordinates,r),e}function E(e,t,r){var n,i=(0,a.Z)(t.coordinates);try{for(i.s();!(n=i.n()).done;){var s=n.value;T(e,s[0],r);for(var u=1;u<s.length;u++)j(e,s[u],r)}}catch(o){i.e(o)}finally{i.f()}return e}function R(e,t,r){return O(e,t.coordinates,r),e}function S(e,t,r){var n=t.coordinates;T(e,n[0],r);for(var i=1;i<n.length;i++)j(e,n[i],r);return e}function T(e,t,r){var n=k(t);b(n)?P(e,n,r):q(e,n,r)}function j(e,t,r){var n=k(t);w(n)?P(e,n,r):q(e,n,r)}function q(e,t,r){var n,i=(0,a.Z)(t);try{for(i.s();!(n=i.n()).done;){var s=n.value;O(e,s,r)}}catch(u){i.e(u)}finally{i.f()}e.lengths.push(t.length)}function P(e,t,r){for(var n=t.length-1;n>=0;n--)O(e,t[n],r);e.lengths.push(t.length)}function O(e,t,r){var n=(0,i.Z)(t,3),a=n[0],s=n[1],u=n[2];e.coords.push(a,s),r.hasZ&&e.coords.push(u||0)}function G(e){switch((0,n.Z)(e)){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function C(e){if(!e)throw new s.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new s.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});var t=e.crs;if(t){var r="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,n=new RegExp(".*(CRS84H?|4326)$","i");if(!r||!n.test(r))throw new s.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}}function D(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=[],u=new Set,o=new Set,c=!1,p=null,d=!1,f=i.geometryType,m=void 0===f?null:f,b=!1,w=(0,a.Z)(y(e));try{var x=function(){var e=r.value,i=e.geometry,a=e.properties,l=e.id;if((!i||(m||(m=h(i.type)),h(i.type)===m))&&(c||(c=v(g(i))),d||(d=null!=l,d&&(t=(0,n.Z)(l),p=Object.keys(a).filter((function(e){return a[e]===l})))),d&&null!=l&&(p.length>1?p=p.filter((function(e){return a[e]===l})):1===p.length&&(p=a[p[0]]===l?p:[])),!b&&a)){var f=!0;for(var y in a)if(!u.has(y)){var w=a[y];if(null!=w){var x=G(w);"unknown"!==x?(o.delete(y),u.add(y),s.push({name:y,alias:y,type:x})):o.add(y)}else f=!1,o.add(y)}b=f}};for(w.s();!(r=w.n()).done;)x()}catch(F){w.e(F)}finally{w.f()}var k=p&&1===p.length&&p[0]||null;if(k){var _,Z=(0,a.Z)(s);try{for(Z.s();!(_=Z.n()).done;){var I=_.value;if(I.name===k&&(0,l.H7)(I)){I.type="esriFieldTypeOID";break}}}catch(F){Z.e(F)}finally{Z.f()}}return{fields:s,geometryType:m,hasZ:c,objectIdFieldName:k,objectIdFieldType:t,unknownFields:Array.from(o)}}function M(e,t){return Array.from(m(y(e),t))}},94288:function(e,t,r){r.d(t,{Dm:function(){return c},Hq:function(){return p},MS:function(){return d},bU:function(){return l}});var n=r(23796),i=r(4367),a=(r(92222),r(26699),r(32023),r(38862),r(35425)),s=r(40199),u=r(24305),o=r(12190);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.I4:"esriGeometryPolyline"===e?o.ET:o.lF}}}function c(e,t){if((0,a.Z)("esri-csp-restrictions"))return function(){return(0,i.Z)((0,n.Z)({},t,null),e)};try{var r="this.".concat(t," = null;");for(var s in e)r+="this".concat(s.includes(".")?'["'.concat(s,'"]'):".".concat(s)," = ").concat(JSON.stringify(e[s]),";");var u=new Function(r);return function(){return new u}}catch(o){return function(){return(0,i.Z)((0,n.Z)({},t,null),e)}}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,s.d9)(e)}}]}function d(e,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:u.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},14685:function(e,t,r){r.d(t,{O0:function(){return g},av:function(){return p},b:function(){return x},d1:function(){return f},og:function(){return v}});var n=r(16198),i=r(62032),a=r(92751),s=r(76133),u=(r(78975),r(82526),r(41817),r(41539),r(70189),r(78783),r(33948),r(68309),r(21703),r(71563)),o=r(63390),l=(0,a.Z)((function e(){(0,s.Z)(this,e),this.code=null,this.description=null})),c=(0,a.Z)((function e(t){(0,s.Z)(this,e),this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}));function p(e){return new c(e)}var d=(0,a.Z)((function e(t){(0,s.Z)(this,e),this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}));function f(e){return new d(e)}var h,y=new Set;function g(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;for(var s in y.clear(),r){var u=e.get(s);if(u){var l=r[s],c=m(u,l);if(c!==l&&a&&a.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:u,originalValue:l,sanitizedValue:c}}),y.add(u.name),u&&(n||u.editable)){var d=(0,o.Qc)(u,c);if(d)return p((0,o.vP)(d,u,c));t[u.name]=c}}}var f,h=(0,i.Z)(e.requiredFields);try{for(h.s();!(f=h.n()).done;){var g=f.value;if(!y.has(g.name))return p('missing required field "'.concat(g.name,'"'))}}catch(v){h.e(v)}finally{h.f()}return null}function m(e,t){var r=t;return"string"==typeof t&&(0,o.H7)(e)?r=parseFloat(t):null!=t&&(0,o.qN)(e)&&"string"!=typeof t&&(r=String(t)),(0,o.Pz)(r)}function v(e,t){if(!e||!(0,u.JY)(t))return e;if("rings"in e||"paths"in e){if(!h)throw new TypeError("geometry engine not loaded");return h.simplify(t,e)}return e}function b(){return w.apply(this,arguments)}function w(){return w=(0,n.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=h,e.t0){e.next=6;break}return e.next=4,Promise.all([r.e(7419),r.e(5070)]).then(r.bind(r,45070));case 4:h=e.sent,e.t0=h;case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function x(e,t){return k.apply(this,arguments)}function k(){return k=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=!(0,u.JY)(t)||"esriGeometryPolygon"!==r&&"esriGeometryPolyline"!==r,e.t0){e.next=4;break}return e.next=4,b();case 4:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}}}]);