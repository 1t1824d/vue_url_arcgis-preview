"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[50],{50050:function(e,t,r){r.r(t),r.d(t,{default:function(){return U}});var n,i=r(62032),l=r(16198),a=r(1936),o=r(4367),s=r(76133),u=r(92751),y=r(50460),f=r(87349),p=r(99418),c=r(49161),v=(r(78975),r(92222),r(41539),r(54747),r(63825)),d=(r(75065),r(54643)),h=r(1723),b=r(27092),m=r(3266),g=r(24446),S=r(58476),_=r(2553),k=(r(57787),r(35425),r(90202)),C=r(66667),w=r(92236),Z=r(78386),x=r(7730),E=r(49471),I=r(63759),O=r(47359),G=r(61761),P=r(34481),L=r(93692),F=r(15387),M=(r(82526),r(41817),r(78534)),j=r(71741),R=r(31073),T=r(98035),N=r(44621),J=r(43532),K=r(93641),z=r(7230),A=n=function(e){(0,p.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;return(0,s.Z)(this,r),e=t.apply(this,arguments),e._sublayersHandles=null,e.description=null,e.id=null,e.networkLink=null,e.title=null,e.sourceJSON=null,e.fullExtent=null,e}return(0,u.Z)(r,[{key:"initialize",value:function(){var e=this;(0,N.N1)(this,"networkLink").then((function(){return(0,N.LR)(e,"visible")})).then((function(){return e.load()}))}},{key:"load",value:function(e){var t=this;if(this.networkLink&&!this.networkLink.viewFormat){var r=(0,b.pC)(e)?e.signal:null,i=this._fetchService(this._get("networkLink").href,r).then((function(e){var r=(0,K.lm)(e.sublayers);t.fullExtent=z.Z.fromJSON(r),t.sourceJSON=e;var i=(0,k.se)(d.Z.ofType(n),(0,K.j5)(n,e));t.sublayers?t.sublayers.addMany(i):t.sublayers=i,t.layer.emit("sublayer-update"),t.layer&&t.layer.notifyChange("visibleSublayers")}));return this.addResolvingPromise(i),Promise.resolve(this)}}},{key:"sublayers",set:function(e){var t=this,r=this._get("sublayers");r&&(r.forEach((function(e){e.parent=null,e.layer=null})),this._sublayersHandles.forEach((function(e){return e.remove()})),this._sublayersHandles=null),e&&(e.forEach((function(e){e.parent=t,e.layer=t.layer})),this._sublayersHandles=[e.on("after-add",(function(e){var r=e.item;r.parent=t,r.layer=t.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))]),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return(0,k.se)(d.Z.ofType(n),e)}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}},{key:"readVisible",value:function(e,t){return!!t.visibility}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"_fetchService",value:function(e,t){return(0,K.CS)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((function(e){return(0,K.Cw)(e.data)}))}}]),r}(M.Z.EventedMixin((0,j.eC)(R.Z)));(0,v._)([(0,_.Cb)()],A.prototype,"description",void 0),(0,v._)([(0,_.Cb)()],A.prototype,"id",void 0),(0,v._)([(0,_.Cb)({readOnly:!0,value:null})],A.prototype,"networkLink",void 0),(0,v._)([(0,_.Cb)({json:{write:{allowNull:!0}}})],A.prototype,"parent",void 0),(0,v._)([(0,_.Cb)({value:null,json:{write:{allowNull:!0}}})],A.prototype,"sublayers",null),(0,v._)([(0,J.p)("sublayers")],A.prototype,"castSublayers",null),(0,v._)([(0,_.Cb)({value:null,json:{read:{source:"name",reader:function(e){return(0,T.Cb)(e)}}}})],A.prototype,"title",void 0),(0,v._)([(0,_.Cb)({value:!0})],A.prototype,"visible",null),(0,v._)([(0,C.r)("visible",["visibility"])],A.prototype,"readVisible",null),(0,v._)([(0,_.Cb)()],A.prototype,"sourceJSON",void 0),(0,v._)([(0,_.Cb)({value:null})],A.prototype,"layer",null),(0,v._)([(0,_.Cb)({type:z.Z})],A.prototype,"fullExtent",void 0),A=n=(0,v._)([(0,w.j)("esri.layers.support.KMLSublayer")],A);var H=A,Y=["kml","xml"],W=function(e){(0,p.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),e._visibleFolders=[],e.allSublayers=new h.Z({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.outSpatialReference=x.Z.WGS84,e.path=null,e.legendEnabled=!1,e.operationalLayerType="KML",e.sublayers=null,e.type="kml",e.url=null,e}return(0,u.Z)(r,[{key:"initialize",value:function(){var e=this;this.watch("sublayers",(function(t,r){r&&r.forEach((function(e){e.parent=null,e.layer=null})),t&&t.forEach((function(t){t.parent=e,t.layer=e}))}),!0),this.on("sublayer-update",(function(){return e.notifyChange("fullExtent")}))}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,o.Z)({url:e},t):e}},{key:"readSublayersFromItemOrWebMap",value:function(e,t){this._visibleFolders=t.visibleFolders}},{key:"readSublayers",value:function(e,t,r){return(0,K.j5)(H,t,r,this._visibleFolders)}},{key:"writeSublayers",value:function(e,t){for(var r=[],n=e.toArray();n.length;){var i=n[0];i.networkLink||(i.visible&&r.push(i.id),i.sublayers&&n.push.apply(n,(0,a.Z)(i.sublayers.toArray()))),n.shift()}t.visibleFolders=r}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?(0,S.vt)(this.url,Y)||"KML":e||""},set:function(e){this._set("title",e)}},{key:"visibleSublayers",get:function(){var e=this.sublayers,t=[],r=function e(r){r.visible&&(t.push(r),r.sublayers&&r.sublayers.forEach(e))};return e&&e.forEach(r),t}},{key:"fullExtent",get:function(){return this._recomputeFullExtent()}},{key:"load",value:function(e){var t=this,r=(0,b.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"]},e).catch(g.r9).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"destroy",value:function(){(0,y.Z)((0,f.Z)(r.prototype),"destroy",this).call(this),this.allSublayers.destroy()}},{key:"_fetchService",value:function(){var e=(0,l.Z)(regeneratorRuntime.mark((function e(t){var r,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return i.resourceInfo?{ssl:!1,data:i.resourceInfo}:(0,K.CS)(i.url,i.outSpatialReference,i.refreshInterval,t)}));case 2:r=e.sent,n=(0,K.Cw)(r.data),n&&this.read(n,{origin:"service"});case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_recomputeFullExtent",value:function(){var e=null;(0,b.pC)(this.extent)&&(e=this.extent.clone());var t=function t(r){if(r.sublayers){var n,l=(0,i.Z)(r.sublayers.items);try{for(l.s();!(n=l.n()).done;){var a=n.value;t(a),a.visible&&a.fullExtent&&((0,b.pC)(e)?e.union(a.fullExtent):e=a.fullExtent.clone())}}catch(o){l.e(o)}finally{l.f()}}};return t(this),e}}]),r}((0,I.h)((0,P.Q)((0,L.M)((0,O.q)((0,G.I)((0,m.R)(E.Z)))))));(0,v._)([(0,_.Cb)({readOnly:!0})],W.prototype,"allSublayers",void 0),(0,v._)([(0,_.Cb)({type:x.Z})],W.prototype,"outSpatialReference",void 0),(0,v._)([(0,_.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],W.prototype,"path",void 0),(0,v._)([(0,_.Cb)({readOnly:!0,json:{read:!1,write:!1}})],W.prototype,"legendEnabled",void 0),(0,v._)([(0,_.Cb)({type:["show","hide","hide-children"]})],W.prototype,"listMode",void 0),(0,v._)([(0,_.Cb)({type:["KML"]})],W.prototype,"operationalLayerType",void 0),(0,v._)([(0,_.Cb)({})],W.prototype,"resourceInfo",void 0),(0,v._)([(0,_.Cb)({type:d.Z.ofType(H),json:{write:{ignoreOrigin:!0}}})],W.prototype,"sublayers",void 0),(0,v._)([(0,C.r)(["web-map","portal-item"],"sublayers",["visibleFolders"])],W.prototype,"readSublayersFromItemOrWebMap",null),(0,v._)([(0,C.r)("service","sublayers",["sublayers"])],W.prototype,"readSublayers",null),(0,v._)([(0,Z.c)("sublayers")],W.prototype,"writeSublayers",null),(0,v._)([(0,_.Cb)({readOnly:!0,json:{read:!1}})],W.prototype,"type",void 0),(0,v._)([(0,_.Cb)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],W.prototype,"title",null),(0,v._)([(0,_.Cb)(F.HQ)],W.prototype,"url",void 0),(0,v._)([(0,_.Cb)({readOnly:!0})],W.prototype,"visibleSublayers",null),(0,v._)([(0,_.Cb)({type:z.Z})],W.prototype,"extent",void 0),(0,v._)([(0,_.Cb)()],W.prototype,"fullExtent",null),W=(0,v._)([(0,w.j)("esri.layers.KMLLayer")],W);var U=W},93641:function(e,t,r){r.d(t,{CS:function(){return m},Cw:function(){return b},Yu:function(){return C},j5:function(){return g},lm:function(){return Z}});var n=r(16198),i=r(62032),l=(r(78975),r(47042),r(51532),r(41539),r(78783),r(33948),r(54747),r(38862),r(21249),r(54560)),a=r(68224),o=r(78136),s=r(35680),u=r(40199),y=r(58476),f=r(7730),p=r(40502),c=r(75012),v=r(15041),d=r(7804),h={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function b(e){var t=e.folders||[],r=t.slice(),n=new Map,l=new Map,a=new Map,o=new Map,s=new Map,y={esriGeometryPoint:l,esriGeometryPolyline:a,esriGeometryPolygon:o};(e.featureCollection&&e.featureCollection.layers||[]).forEach((function(e){var t=(0,u.d9)(e);t.featureSet.features=[];var r=e.featureSet.geometryType;n.set(r,t);var i=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?S(l,i,e.featureSet.features):"esriGeometryPolyline"===r?S(a,i,e.featureSet.features):"esriGeometryPolygon"===r&&S(o,i,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){s.set(e.id,e)})),t.forEach((function(t){t.networkLinkIds.forEach((function(n){var i=k(n,t.id,e.networkLinks);i&&r.push(i)}))})),r.forEach((function(e){if(e.featureInfos){e.points=(0,u.d9)(n.get("esriGeometryPoint")),e.polylines=(0,u.d9)(n.get("esriGeometryPolyline")),e.polygons=(0,u.d9)(n.get("esriGeometryPolygon")),e.mapImages=[];var t,r=(0,i.Z)(e.featureInfos);try{for(r.s();!(t=r.n()).done;){var l=t.value;switch(l.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var a=y[l.type].get(l.id);a&&e[h[l.type]].featureSet.features.push(a);break;case"GroundOverlay":var o=s.get(l.id);o&&e.mapImages.push(o);break}}}catch(f){r.e(f)}finally{r.f()}e.fullExtent=Z([e])}}));var f=Z(r);return{folders:t,sublayers:r,extent:f}}function m(e,t,r,n){var i=a.id&&a.id.findCredential(e);e=(0,y.fl)(e,{token:i&&i.token});var o=l.Z.kmlServiceUrl;return(0,s["default"])(o,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=[],l={},a=t.sublayers,o=t.folders.map((function(e){return e.id}));return a.forEach((function(t){var a=new e;if(r?a.read(t,r):a.read(t),n.length&&o.indexOf(a.id)>-1&&(a.visible=-1!==n.indexOf(a.id)),l[t.id]=a,null!=t.parentFolderId&&-1!==t.parentFolderId){var s=l[t.parentFolderId];s.sublayers||(s.sublayers=[]),s.sublayers.unshift(a)}else i.unshift(a)})),i}function S(e,t,r){r.forEach((function(r){e.set(r.attributes[t],r)}))}function _(e,t){var r;return t.some((function(t){return t.id===e&&(r=t,!0)})),r}function k(e,t,r){var n=_(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}function C(e){return w.apply(this,arguments)}function w(){return w=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n,l,a,s,u,y,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=d["default"].fromJSON(t.featureSet).features,n=t.layerDefinition,l=(0,v.i)(n.drawingInfo.renderer),a=o.Z.fromJSON(t.popupInfo),s=[],u=(0,i.Z)(r),e.prev=2,u.s();case 4:if((y=u.n()).done){e.next=12;break}return f=y.value,e.next=8,l.getSymbolAsync(f);case 8:p=e.sent,f.symbol=p,f.popupTemplate=a,f.visible=!0,s.push(f);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),u.e(e.t0);case 17:return e.prev=17,u.f(),e.finish(17);case 20:return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])}))),w.apply(this,arguments)}function Z(e){var t,r=(0,p.Ue)(p.Gv),n=(0,p.Ue)(p.Gv),l=(0,i.Z)(e);try{for(l.s();!(t=l.n()).done;){var a=t.value;if(a.polygons&&a.polygons.featureSet&&a.polygons.featureSet.features){var o,s=(0,i.Z)(a.polygons.featureSet.features);try{for(s.s();!(o=s.n()).done;){var u=o.value;(0,c.Yg)(r,u.geometry),(0,p.TC)(n,r)}}catch(k){s.e(k)}finally{s.f()}}if(a.polylines&&a.polylines.featureSet&&a.polylines.featureSet.features){var y,v=(0,i.Z)(a.polylines.featureSet.features);try{for(v.s();!(y=v.n()).done;){var d=y.value;(0,c.Yg)(r,d.geometry),(0,p.TC)(n,r)}}catch(k){v.e(k)}finally{v.f()}}if(a.points&&a.points.featureSet&&a.points.featureSet.features){var h,b=(0,i.Z)(a.points.featureSet.features);try{for(b.s();!(h=b.n()).done;){var m=h.value;(0,c.Yg)(r,m.geometry),(0,p.TC)(n,r)}}catch(k){b.e(k)}finally{b.f()}}if(a.mapImages){var g,S=(0,i.Z)(a.mapImages);try{for(S.s();!(g=S.n()).done;){var _=g.value;(0,c.Yg)(r,_.extent),(0,p.TC)(n,r)}}catch(k){S.e(k)}finally{S.f()}}}}catch(k){l.e(k)}finally{l.f()}return(0,p.fS)(n,p.Gv)?null:{xmin:n[0],ymin:n[1],zmin:n[2],xmax:n[3],ymax:n[4],zmax:n[5],spatialReference:f.Z.WGS84}}}}]);