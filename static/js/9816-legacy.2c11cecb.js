"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[9816],{58837:function(e,t,r){r.d(t,{Fp:function(){return c},RL:function(){return y},UV:function(){return h},bk:function(){return m}});var i=r(2394),a=r(62032),n=(r(41539),r(82472),r(48675),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(28802)),o=r(64316),l=r(42027);function c(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":var t=e.symbolLayers;return t&&1===t.length?c(t[0]):null;case"CIMVectorMarker":var r,i=e.markerGraphics;if(!i||1!==i.length)return null;var a=i[0];if(!a)return null;var n=a.geometry;if(!n)return null;var o=a.symbol;return!o||"CIMPolygonSymbol"!==o.type&&"CIMLineSymbol"!==o.type||null!=(r=o.symbolLayers)&&r.some((function(e){return!!e.effects}))?null:{geom:n,asFill:"CIMPolygonSymbol"===o.type};case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function f(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}function s(e){var t,r=1/0,i=-1/0,n=1/0,o=-1/0,c=(0,a.Z)(e);try{for(c.s();!(t=c.n()).done;){var f,s=t.value,u=(0,a.Z)(s);try{for(u.s();!(f=u.n()).done;){var m=f.value;m[0]<r&&(r=m[0]),m[0]>i&&(i=m[0]),m[1]<n&&(n=m[1]),m[1]>o&&(o=m[1])}}catch(h){u.e(h)}finally{u.f()}}}catch(h){c.e(h)}finally{c.f()}return new l.Z(r,n,i-r,o-n)}function u(e){var t,r=1/0,i=-1/0,n=1/0,o=-1/0,l=(0,a.Z)(e);try{for(l.s();!(t=l.n()).done;){var c,f=t.value,s=(0,a.Z)(f);try{for(s.s();!(c=s.n()).done;){var u=c.value;u[0]<r&&(r=u[0]),u[0]>i&&(i=u[0]),u[1]<n&&(n=u[1]),u[1]>o&&(o=u[1])}}catch(m){s.e(m)}finally{s.f()}}}catch(m){l.e(m)}finally{l.f()}return[r,n,i,o]}function m(e){return e?e.rings?u(e.rings):e.paths?u(e.paths):(0,o.YX)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function h(e,t,r,a,n){var o=(0,i.Z)(e,4),l=o[0],c=o[1],f=o[2],s=o[3];if(f<l||s<c)return[0,0,0];var u=f-l,m=s-c,h=128,y=1,v=Math.floor(.5*(.5*h-y)),p=(h-2*(v+y))/Math.max(u,m),d=Math.round(u*p)+2*v,g=Math.round(m*p)+2*v,S=1;t&&(S=g/p/(t.ymax-t.ymin));var N=0,b=0;if(a)if(n){if(t&&r&&t.ymax-t.ymin>0){var k=(t.xmax-t.xmin)/(t.ymax-t.ymin);N=a.x/(r*k),b=a.y/r}}else N=a.x,b=a.y;return N=.5*(t.xmax+t.xmin)+N*(t.xmax-t.xmin),b=.5*(t.ymax+t.ymin)+b*(t.ymax-t.ymin),N-=l,b-=c,N*=p,b*=p,N+=v,b+=v,[S,N/d-.5,-(b/g-.5)]}function y(e){var t,r=f(e.geom),n=s(r),o=128,l=1,c=Math.floor(.5*(.5*o-l)),u=(o-2*(c+l))/Math.max(n.width,n.height),m=Math.round(n.width*u)+2*c,h=Math.round(n.height*u)+2*c,y=[],g=(0,a.Z)(r);try{for(g.s();!(t=g.n()).done;){var S=t.value;if(S&&S.length>1){var N,b=[],k=(0,a.Z)(S);try{for(k.s();!(N=k.n()).done;){var C=N.value,O=(0,i.Z)(C,2),P=O[0],x=O[1];P-=n.x,x-=n.y,P*=u,x*=u,P+=c-.5,x+=c-.5,e.asFill?b.push([P,x]):b.push([Math.round(P),Math.round(x)])}}catch(Z){k.e(Z)}finally{k.f()}if(e.asFill){var M=b.length-1;b[0][0]===b[M][0]&&b[0][1]===b[M][1]||b.push(b[0])}y.push(b)}}}catch(Z){g.e(Z)}finally{g.f()}var w=v(y,m,h,c);return e.asFill&&p(y,m,h,c,w),[d(w,c),m,h]}function v(e,t,r,i){for(var n=t*r,o=new Array(n),l=i*i+1,c=0;c<n;++c)o[c]=l;var f,s=(0,a.Z)(e);try{for(s.s();!(f=s.n()).done;)for(var u=f.value,m=u.length,h=1;h<m;++h){var y=u[h-1],v=u[h],p=void 0,d=void 0,g=void 0,S=void 0;y[0]<v[0]?(p=y[0],d=v[0]):(p=v[0],d=y[0]),y[1]<v[1]?(g=y[1],S=v[1]):(g=v[1],S=y[1]);var N=Math.floor(p)-i,b=Math.floor(d)+i,k=Math.floor(g)-i,C=Math.floor(S)+i;N<0&&(N=0),b>t&&(b=t),k<0&&(k=0),C>r&&(C=r);for(var O=v[0]-y[0],P=v[1]-y[1],x=O*O+P*P,M=N;M<b;M++)for(var w=k;w<C;w++){var Z=void 0,I=void 0,L=(M-y[0])*O+(w-y[1])*P;L<0?(Z=y[0],I=y[1]):L>x?(Z=v[0],I=v[1]):(L/=x,Z=y[0]+L*O,I=y[1]+L*P);var A=(M-Z)*(M-Z)+(w-I)*(w-I),X=(r-w-1)*t+M;A<o[X]&&(o[X]=A)}}}catch(J){s.e(J)}finally{s.f()}for(var z=0;z<n;++z)o[z]=Math.sqrt(o[z]);return o}function p(e,t,r,i,n){var o,l=(0,a.Z)(e);try{for(l.s();!(o=l.n()).done;)for(var c=o.value,f=c.length,s=1;s<f;++s){var u=c[s-1],m=c[s],h=void 0,y=void 0,v=void 0,p=void 0;u[0]<m[0]?(h=u[0],y=m[0]):(h=m[0],y=u[0]),u[1]<m[1]?(v=u[1],p=m[1]):(v=m[1],p=u[1]);var d=Math.floor(h),g=Math.floor(y)+1,S=Math.floor(v),N=Math.floor(p)+1;d<i&&(d=i),g>t-i&&(g=t-i),S<i&&(S=i),N>r-i&&(N=r-i);for(var b=S;b<N;++b)if(u[1]>b!=m[1]>b){for(var k=(r-b-1)*t,C=d;C<g;++C)C<(m[0]-u[0])*(b-u[1])/(m[1]-u[1])+u[0]&&(n[k+C]=-n[k+C]);for(var O=i;O<d;++O)n[k+O]=-n[k+O]}}}catch(P){l.e(P)}finally{l.f()}}function d(e,t){for(var r=2*t,i=e.length,a=new Uint8Array(4*i),o=0;o<i;++o){var l=.5-e[o]/r;(0,n.I)(l,a,4*o)}return a}},9816:function(e,t,r){r.d(t,{S:function(){return _},c:function(){return w}});var i=r(4367),a=r(62032),n=r(2394),o=r(1936),l=r(16198),c=(r(78975),r(41539),r(39714),r(38862),r(92222),r(57327),r(68309),r(9653),r(74916),r(4723),r(78783),r(33948),r(47038)),f=r(87441),s=r(27092),u=r(597),m=r(98035),h=r(74887),y=r(32297),v=r(58837),p=r(64880),d=r(92262),g=r(81589),S=f.Z.getLogger("esri.symbols.cim.cimAnalyzer");function N(e){switch(e){case"Butt":return 0;case"Square":return 2;default:return 1}}function b(e){switch(e){case"Bevel":return 0;case"Miter":return 2;default:return 1}}function k(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function C(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function O(e){var t="",r="";if(e){var i=e.toLowerCase();-1!==i.indexOf("italic")?t="italic":-1!==i.indexOf("oblique")&&(t="oblique"),-1!==i.indexOf("bold")?r="bold":-1!==i.indexOf("light")&&(r="lighter")}return{style:t,weight:r}}function P(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function x(e,t,r,i){var a;e[t]?a=e[t]:(a={},e[t]=a),a[r]=i}function M(e){var t=e.markerPlacement;return t&&t.angleToLine?1:0}function w(e,t,r,i,a){return Z.apply(this,arguments)}function Z(){return Z=(0,l.Z)(regeneratorRuntime.mark((function e(t,r,i,n,o){var l,c,f,s,u,m,y,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l=null!=n?n:[],t){e.next=3;break}return e.abrupt("return",l);case 3:if(s={},"CIMSymbolReference"===t.type){e.next=6;break}return e.abrupt("return",(S.error("Expect cim type to be 'CIMSymbolReference'"),l));case 6:if(c=t.symbol,f=t.primitiveOverrides,!f){e.next=14;break}u=[],m=(0,a.Z)(f);try{for(v=function(){var e=y.value,t=e.valueExpressionInfo;if(t&&r){var i=t.expression,a=(0,h.Yi)(i,r.spatialReference,r.fields).then((function(t){t&&x(s,e.primitiveName,e.propertyName,t)}));u.push(a)}else null!=e.value&&x(s,e.primitiveName,e.propertyName,e.value)},m.s();!(y=m.n()).done;)v()}catch(d){m.e(d)}finally{m.f()}if(e.t0=u.length>0,!e.t0){e.next=14;break}return e.next=14,Promise.all(u);case 14:if(p=[],K(c,i,p),e.t2=p.length>0,!e.t2){e.next=20;break}return e.next=20,Promise.all(p);case 20:e.t1=c.type,e.next="CIMPointSymbol"===e.t1||"CIMLineSymbol"===e.t1||"CIMPolygonSymbol"===e.t1?23:24;break;case 23:I(c,f,s,r,l,i,o);case 24:return e.abrupt("return",l);case 25:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function I(e,t,r,i,a,n,l){if(e){var c=e.symbolLayers;if(c){var f,s=e.effects,u=y.B$.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(f=1);for(var m=c.length;m--;){var h,v=c[m];if(v&&!1!==v.enable){var p=void 0;s&&s.length&&(p=(0,o.Z)(s));var d=v.effects;d&&d.length&&(s?(h=p).push.apply(h,(0,o.Z)(d)):p=(0,o.Z)(d));var g=[];switch(y.E0.findApplicableOverrides(v,t,g),v.type){case"CIMSolidFill":L(v,p,r,g,i,a);break;case"CIMPictureFill":A(v,p,r,g,i,n,a);break;case"CIMHatchFill":X(v,p,r,g,i,a);break;case"CIMGradientFill":z(v,p,r,g,i,a);break;case"CIMSolidStroke":J(v,p,r,g,i,a,"CIMPolygonSymbol"===e.type,u);break;case"CIMPictureStroke":Y(v,p,r,g,i,a,"CIMPolygonSymbol"===e.type,u);break;case"CIMGradientStroke":H(v,p,r,g,i,a,"CIMPolygonSymbol"===e.type,u);break;case"CIMCharacterMarker":if(R(v,p,r,g,i,a))break;break;case"CIMPictureMarker":if(R(v,p,r,g,i,a))break;"CIMLineSymbol"===e.type&&(f=M(v)),F(v,p,r,g,i,n,a,f,u);break;case"CIMVectorMarker":if(R(v,p,r,g,i,a))break;"CIMLineSymbol"===e.type&&(f=M(v)),G(v,p,r,g,i,a,n,f,u,l);break;default:S.error("Cannot analyze CIM layer",v.type)}}}}}}function L(e,t,r,i,a,o){var l=e.primitiveName,c=(0,p.NO)(e.color),f=q(i,l),s=(0,n.Z)(f,2),u=s[0],h=s[1],y=(0,m.hP)(JSON.stringify(e)+h).toString();o.push({type:"fill",templateHash:y,materialHash:u?function(){return y}:y,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:j(l,r,"Color",a,c,D),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t})}function A(e,t,r,i,a,o,l){var c=e.primitiveName,f=e.tintColor?(0,p.NO)(e.tintColor):{r:255,g:255,b:255,a:1},u=q(i,c),h=(0,n.Z)(u,2),y=h[0],v=h[1],d=(0,m.hP)(JSON.stringify(e)+v).toString(),g=(0,m.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),S=(0,p.NA)(e.scaleX);if("width"in e){var N=e.width,b=1,k=o.getResource(e.url);(0,s.pC)(k)&&(b=k.width/k.height),S/=b*(e.height/N)}l.push({type:"fill",templateHash:d,materialHash:y?function(){return g}:g,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:j(c,r,"TintColor",a,f,D),height:j(c,r,"Height",a,e.height),scaleX:j(c,r,"ScaleX",a,S),angle:j(c,r,"Rotation",a,(0,p.NA)(e.rotation)),offsetX:j(c,r,"OffsetX",a,(0,p.NA)(e.offsetX)),offsetY:j(c,r,"OffsetY",a,(0,p.NA)(e.offsetY)),url:e.url})}function X(e,t,r,i,a,o){var l=["Rotation","OffsetX","OffsetY"],c=i.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===l.indexOf(t.propertyName)})),f=e.primitiveName,s=q(i,f),u=(0,n.Z)(s,2),h=u[0],y=u[1],v=(0,m.hP)(JSON.stringify(e)+y).toString(),d=(0,m.hP)("".concat(e.separation).concat(JSON.stringify(e.lineSymbol))).toString();o.push({type:"fill",templateHash:v,materialHash:h?V(d,r,c,a):d,cim:e,materialOverrides:c,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:j(f,r,"Separation",a,e.separation),scaleX:1,angle:j(f,r,"Rotation",a,(0,p.NA)(e.rotation)),offsetX:j(f,r,"OffsetX",a,(0,p.NA)(e.offsetX)),offsetY:j(f,r,"OffsetY",a,(0,p.NA)(e.offsetY))})}function z(e,t,r,i,a,o){var l=e.primitiveName,c=q(i,l),f=(0,n.Z)(c,2),s=f[0],u=f[1],h=(0,m.hP)(JSON.stringify(e)+u).toString();o.push({type:"fill",templateHash:h,materialHash:s?V(h,r,i,a):h,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function J(e,t,r,i,a,l,c,f){var s,u,h=e.primitiveName,y=(0,p.NO)(e.color),v=void 0!==e.width?e.width:4,d=N(e.capStyle),g=b(e.joinStyle),S=e.miterLimit,k=q(i,h),C=(0,n.Z)(k,2),O=C[0],P=C[1],x=(0,m.hP)(JSON.stringify(e)+P).toString();if(t&&t.length>0){var M=t[t.length-1];if("CIMGeometricEffectDashes"===M.type&&"NoConstraint"===M.lineDashEnding){var w=(t=(0,o.Z)(e.effects)).pop();s=w.dashTemplate,u=w.scaleDash}}l.push({type:"line",templateHash:x,materialHash:O?function(){return x}:x,cim:e,materialOverrides:null,isOutline:c,colorLocked:e.colorLocked,effects:t,color:j(h,r,"Color",a,y,D),width:j(h,r,"Width",a,v),cap:j(h,r,"CapStyle",a,d),join:j(h,r,"JoinStyle",a,g),miterLimit:j(h,r,"MiterLimit",a,S),referenceWidth:f,zOrder:U(e.name),dashTemplate:s,scaleDash:u})}function Y(e,t,r,i,a,o,l,c){var f=(0,m.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),s=e.primitiveName,u=(0,p.NO)(e.tintColor),h=void 0!==e.width?e.width:4,y=N(e.capStyle),v=b(e.joinStyle),d=e.miterLimit,g=q(i,s),S=(0,n.Z)(g,2),k=S[0],C=S[1],O=(0,m.hP)(JSON.stringify(e)+C).toString();o.push({type:"line",templateHash:O,materialHash:k?function(){return f}:f,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:t,color:j(s,r,"TintColor",a,u,D),width:j(s,r,"Width",a,h),cap:j(s,r,"CapStyle",a,y),join:j(s,r,"JoinStyle",a,v),miterLimit:j(s,r,"MiterLimit",a,d),referenceWidth:c,zOrder:U(e.name),dashTemplate:null,scaleDash:!1,url:e.url})}function H(e,t,r,i,a,o,l,c){var f=e.primitiveName,s=void 0!==e.width?e.width:4,u=N(e.capStyle),h=b(e.joinStyle),y=e.miterLimit,v=q(i,f),p=(0,n.Z)(v,2),d=p[0],g=p[1],S=(0,m.hP)(JSON.stringify(e)+g).toString();o.push({type:"line",templateHash:S,materialHash:d?V(S,r,i,a):S,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:j(f,r,"Width",a,s),cap:j(f,r,"CapStyle",a,u),join:j(f,r,"JoinStyle",a,h),miterLimit:j(f,r,"MiterLimit",a,y),referenceWidth:c,zOrder:U(e.name),dashTemplate:null,scaleDash:!1})}function R(e,t,r,i,a,o){var l=e.markerPlacement;if(!l||"CIMMarkerPlacementInsidePolygon"!==l.type)return!1;var c=l,f=["Rotation","OffsetX","OffsetY"],s=i.filter((function(t){return t.primitiveName!==e.primitiveName&&-1===f.indexOf(t.propertyName)})),u="url"in e?e.url:null,h=q(i,c.primitiveName),y=(0,n.Z)(h,2),v=y[0],d=y[1],g=(0,m.hP)(JSON.stringify(e)+d).toString(),S=c.stepY,N=null,b=1;return l.shiftOddRows&&(S*=2,N=function(e){return e?2*e:0},b=.5),o.push({type:"fill",templateHash:g,materialHash:v?V(g,r,s,a):g,cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:j(c.primitiveName,r,"StepY",a,S,N),scaleX:b,angle:j(c.primitiveName,r,"GridAngle",a,c.gridAngle),offsetX:j(c.primitiveName,r,"OffsetX",a,(0,p.NA)(c.offsetX)),offsetY:j(c.primitiveName,r,"OffsetY",a,(0,p.NA)(c.offsetY)),url:u}),!0}function F(e,t,r,i,a,o,l,c,f){var u,h=e.primitiveName,y=(0,p.NA)(e.size),v=(0,p.NA)(e.scaleX),d=(0,p.NA)(e.rotation),g=(0,p.NA)(e.offsetX),S=(0,p.NA)(e.offsetY),N=e.tintColor?(0,p.NO)(e.tintColor):{r:255,g:255,b:255,a:1},b=(0,m.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),k=q(i,h),C=(0,n.Z)(k,2),O=C[0],P=C[1],x=(0,m.hP)(JSON.stringify(e)+P).toString(),M=null!=(u=e.anchorPoint)?u:{x:0,y:0};if("width"in e){var w=e.width,Z=1,I=o.getResource(e.url);(0,s.pC)(I)&&(Z=I.width/I.height),v/=Z*(y/w)}l.push({type:"marker",templateHash:x,materialHash:O?function(){return b}:b,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:!1,alignment:c,size:j(h,r,"Size",a,y),scaleX:j(h,r,"ScaleX",a,v),rotation:j(h,r,"Rotation",a,d),offsetX:j(h,r,"OffsetX",a,g),offsetY:j(h,r,"OffsetY",a,S),color:j(h,r,"TintColor",a,N,D),anchorPoint:{x:M.x,y:-M.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:1,markerPlacement:e.markerPlacement,url:e.url})}function G(e,t,r,i,n,o,l,c,f,s){var u=e.markerGraphics;if(u){var m=0;if(e.scaleSymbolsProportionally){var h=e.frame;h&&(m=h.ymax-h.ymin)}var y,v=(0,a.Z)(u);try{for(v.s();!(y=v.n()).done;){var p=y.value;if(p){var d=p.symbol;if(!d)continue;switch(d.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":E(e,t,p,i,r,n,o,l,c,f,m,s);break;case"CIMTextSymbol":B(e,t,p,r,i,n,o,c,f,m)}}}}catch(g){v.e(g)}finally{v.f()}}}function B(e,t,r,a,o,l,c,f,s,u){var h=[];y.E0.findApplicableOverrides(r,o,h);var v=r.geometry;if("x"in v&&"y"in v){var d=r.symbol,g=P(d),S=O(d.fontStyleName),N=(0,p.mA)(d.fontFamilyName);d.font=(0,i.Z)({family:N,decoration:g},S);var b=e.frame,x=v.x-.5*(b.xmin+b.xmax),M=v.y-.5*(b.ymin+b.ymax),w=e.size/u,Z=e.primitiveName,I=(0,p.NA)(d.height)*w,L=(0,p.NA)(d.angle),A=((0,p.NA)(d.offsetX)+x)*w,X=((0,p.NA)(d.offsetY)+M)*w,z=(0,p.NO)(y.B$.getFillColor(d)),J=(0,p.NO)(y.B$.getStrokeColor(d)),Y=y.B$.getStrokeWidth(d);Y||(J=(0,p.NO)(y.B$.getFillColor(d.haloSymbol)),Y=d.haloSize*w);var H=q(o,Z),R=(0,n.Z)(H,2),F=R[0],G=R[1],B=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),E=(0,m.hP)(JSON.stringify(r)+B+G).toString(),W=j(r.primitiveName,a,"TextString",l,r.textString,p.X3,d.textCase),$=d.fontStyleName,T=N+($?"-"+$.toLowerCase():"-regular"),U=T;c.push({type:"text",templateHash:E,materialHash:F||"function"==typeof W||W.match(/\[(.*?)\]/)?function(e,t,r){return U+"-"+(0,p.hf)(W,e,t,r)}:U+"-"+(0,m.hP)(W),cim:d,materialOverrides:null,colorLocked:e.colorLocked,effects:t,alignment:f,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:T,decoration:g,weight:j(Z,a,"Weight",l,S.weight),style:j(Z,a,"Size",l,S.style),size:j(Z,a,"Size",l,I),angle:j(Z,a,"Rotation",l,L),offsetX:j(Z,a,"OffsetX",l,A),offsetY:j(Z,a,"OffsetY",l,X),horizontalAlignment:k(d.horizontalAlignment),verticalAlignment:C(d.verticalAlignment),text:W,color:z,outlineColor:J,outlineSize:Y,referenceSize:s,sizeRatio:1,markerPlacement:e.markerPlacement})}}function E(e,t,r,o,l,c,f,s,u,h,g,S){var N=r.symbol,b=N.symbolLayers;if(b)if(S)$(e,t,r,l,o,c,f,s,u,h,g);else{var k=b.length;if(Q(b))W(e,r,b,o,l,c,f,u,h,g);else{var C=d.j.applyEffects(N.effects,r.geometry);if(C)for(;k--;){var O=b[k];if(O&&!1!==O.enable)switch(O.type){case"CIMSolidFill":case"CIMSolidStroke":var P,x=function(){var s=d.j.applyEffects(O.effects,C),S=(0,v.bk)(s);if(!S)return"continue";var N=(0,v.UV)(S,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),b=(0,n.Z)(N,3),k=b[0],x=b[1],M=b[2],w="CIMSolidFill"===O.type,Z={type:"sdf",geom:s,asFill:w},I=e.primitiveName,L=null!=(P=(0,p.NA)(e.size))?P:10,A=(0,p.NA)(e.rotation),X=(0,p.NA)(e.offsetX),z=(0,p.NA)(e.offsetY),J=O.path,Y=O.primitiveName,H=(0,p.NO)(w?y.B$.getFillColor(O):y.B$.getStrokeColor(O)),R=w?{r:0,g:0,b:0,a:0}:(0,p.NO)(y.B$.getStrokeColor(O)),F=y.B$.getStrokeWidth(O);if(!w&&!F)return"break";var G,B=!1,E="",W=(0,a.Z)(o);try{for(W.s();!(G=W.n()).done;){var $=G.value;$.primitiveName!==Y&&$.primitiveName!==I||(void 0!==$.value?E+="-".concat($.primitiveName,"-").concat($.propertyName,"-").concat(JSON.stringify($.value)):$.valueExpressionInfo&&(B=!0))}}catch(_){W.e(_)}finally{W.f()}var T=JSON.stringify((0,i.Z)((0,i.Z)({},e),{},{markerGraphics:null})),U=(0,m.hP)(JSON.stringify(Z)+J).toString(),V={type:"marker",templateHash:(0,m.hP)(JSON.stringify(r)+JSON.stringify(O)+T+E).toString(),materialHash:B?function(){return U}:U,cim:Z,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:u,anchorPoint:{x:x,y:M},isAbsoluteAnchorPoint:!1,size:j(e.primitiveName,l,"Size",c,L),rotation:j(e.primitiveName,l,"Rotation",c,A),offsetX:j(e.primitiveName,l,"OffsetX",c,X),offsetY:j(e.primitiveName,l,"OffsetY",c,z),scaleX:1,frameHeight:g,rotateClockwise:e.rotateClockwise,referenceSize:h,sizeRatio:k,color:j(Y,l,"Color",c,H,D),outlineColor:j(Y,l,"Color",c,R,D),outlineWidth:j(Y,l,"Width",c,F),markerPlacement:e.markerPlacement,path:J};return f.push(V),"break"}();if("continue"===x)continue;if("break"===x)break;default:$(e,t,r,l,o,c,f,s,u,h,g)}}}}}function W(e,t,r,o,l,c,f,s,u,h){var d=t.geometry,g=r[0],S=r[1],N=(0,v.bk)(d);if(N){var b,k=(0,v.UV)(N,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),C=(0,n.Z)(k,3),O=C[0],P=C[1],x=C[2],M={type:"sdf",geom:d,asFill:!0},w=e.primitiveName,Z=(0,p.NA)(e.size),I=(0,p.NA)(e.rotation),L=(0,p.NA)(e.offsetX),A=(0,p.NA)(e.offsetY),X=S.path,z=S.primitiveName,J=g.primitiveName,Y=(0,p.NO)(y.B$.getFillColor(S)),H=(0,p.NO)(y.B$.getStrokeColor(g)),R=y.B$.getStrokeWidth(g),F=!1,G="",B=(0,a.Z)(o);try{for(B.s();!(b=B.n()).done;){var E=b.value;E.primitiveName!==z&&E.primitiveName!==J&&E.primitiveName!==w||(void 0!==E.value?G+="-".concat(E.primitiveName,"-").concat(E.propertyName,"-").concat(JSON.stringify(E.value)):E.valueExpressionInfo&&(F=!0))}}catch(U){B.e(U)}finally{B.f()}var W=JSON.stringify((0,i.Z)((0,i.Z)({},e),{},{markerGraphics:null})),$=(0,m.hP)(JSON.stringify(M)+X).toString(),T={type:"marker",templateHash:(0,m.hP)(JSON.stringify(t)+JSON.stringify(S)+JSON.stringify(g)+W+G).toString(),materialHash:F?function(){return $}:$,cim:M,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:P,y:x},isAbsoluteAnchorPoint:!1,size:j(e.primitiveName,l,"Size",c,Z),rotation:j(e.primitiveName,l,"Rotation",c,I),offsetX:j(e.primitiveName,l,"OffsetX",c,L),offsetY:j(e.primitiveName,l,"OffsetY",c,A),scaleX:1,frameHeight:h,rotateClockwise:e.rotateClockwise,referenceSize:u,sizeRatio:O,color:j(z,l,"Color",c,Y,D),outlineColor:j(J,l,"Color",c,H,D),outlineWidth:j(J,l,"Width",c,R),markerPlacement:e.markerPlacement,path:X};f.push(T)}}function $(e,t,r,i,o,l,c,f,s,h,v){var d=T(e,r),g=[],S=["Rotation","OffsetX","OffsetY"];g=o.filter((function(t){return t.primitiveName!==e.primitiveName||-1===S.indexOf(t.propertyName)}));var N,b="",k=(0,a.Z)(o);try{for(k.s();!(N=k.n()).done;){var C=N.value;void 0!==C.value&&(b+="-".concat(C.primitiveName,"-").concat(C.propertyName,"-").concat(JSON.stringify(C.value)))}}catch(J){k.e(J)}finally{k.f()}var O=y.B$.getTextureAnchor(d,f),P=(0,n.Z)(O,3),x=P[0],M=P[1],w=P[2],Z=e.primitiveName,I=(0,p.NA)(e.rotation),L=(0,p.NA)(e.offsetX),A=(0,p.NA)(e.offsetY),X=(0,m.hP)(JSON.stringify(d)+b).toString(),z={type:"marker",templateHash:X,materialHash:0===g.length?X:V(X,i,g,l),cim:d,materialOverrides:g,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:x,y:M},isAbsoluteAnchorPoint:!1,size:e.size,rotation:j(Z,i,"Rotation",l,I),offsetX:j(Z,i,"OffsetX",l,L),offsetY:j(Z,i,"OffsetY",l,A),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:v,rotateClockwise:e.rotateClockwise,referenceSize:h,sizeRatio:w/(0,u.F2)(e.size),markerPlacement:e.markerPlacement};c.push(z)}function T(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}function U(e){if(e&&0===e.indexOf("Level_")){var t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function D(e){if(!e||0===e.length)return null;var t=new c.Z(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function j(e,t,r,i,a,n,o){var l=t[e];if(l){var c=l[r];if("string"==typeof c||"number"==typeof c||c instanceof Array)return n?n.call(null,c,o):c;if(null!=c&&c instanceof h.mz)return function(e,t,r){var l=(0,g.Z)(c,e,{$view:r},i.geometryType,t);return null!==l&&n&&(l=n.call(null,l,o)),null!==l?l:a}}return a}function V(e,t,r,i){var n,o=(0,a.Z)(r);try{for(o.s();!(n=o.n()).done;){var l=n.value;l.valueExpressionInfo&&function(){var e=t[l.primitiveName]&&t[l.primitiveName][l.propertyName];e instanceof h.mz&&(l.fn=function(t,r,a){return(0,g.Z)(e,t,{$view:a},i.geometryType,r)})}()}}catch(c){o.e(c)}finally{o.f()}return function(t,i,n){var o,l=(0,a.Z)(r);try{for(l.s();!(o=l.n()).done;){var f=o.value;f.fn&&(f.value=f.fn(t,i,n))}}catch(c){l.e(c)}finally{l.f()}return(0,m.hP)(e+y.E0.buildOverrideKey(r)).toString()}}function _(e,t){if(!t||0===t.length)return e;var r=JSON.parse(JSON.stringify(e));return y.E0.applyOverrides(r,t),r}function q(e,t){var r,i=!1,n="",o=(0,a.Z)(e);try{for(o.s();!(r=o.n()).done;){var l=r.value;l.primitiveName===t&&(void 0!==l.value?n+="-".concat(l.primitiveName,"-").concat(l.propertyName,"-").concat(JSON.stringify(l.value)):l.valueExpressionInfo&&(i=!0))}}catch(c){o.e(c)}finally{o.f()}return[i,n]}function K(e,t,r){if(e&&t)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var i=e.symbolLayers;if(!i)return;var n,o=(0,a.Z)(i);try{for(o.s();!(n=o.n()).done;){var l=n.value;switch(l.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in l&&l.url&&r.push(t.fetchResource(l.url,null));break;case"CIMVectorMarker":var c=l.markerGraphics;if(!c)continue;var f,s=(0,a.Z)(c);try{for(s.s();!(f=s.n()).done;){var u=f.value;if(u){var m=u.symbol;m&&K(m,t,r)}}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){o.e(h)}finally{o.f()}}}var Q=function(e){return e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&!e[0].effects&&!e[1].effects}},92262:function(e,t,r){r.d(t,{j:function(){return m}});var i=r(1936),a=r(62032),n=r(76133),o=r(92751),l=r(64316),c=r(9954),f=r(23854),s=r(21032),u=96/72,m=function(){function e(){(0,n.Z)(this,e)}return(0,o.Z)(e,null,[{key:"executeEffects",value:function(e,t){var r,i=(0,c.GP)(t),n=u,o=new f.M(i),l=(0,a.Z)(e);try{for(l.s();!(r=l.n()).done;){var m=r.value,h=(0,s.h)(m);h&&(o=h.execute(o,m,n,!0))}}catch(y){l.e(y)}finally{l.f()}return o}},{key:"next",value:function(e){var t=e.next();return(0,c.wp)(t),t}},{key:"applyEffects",value:function(e,t){if(!e)return t;var r,n=new f.M(t),o=(0,a.Z)(e);try{for(o.s();!(r=o.n()).done;){var c=r.value,u=(0,s.h)(c);u&&(n=u.execute(n,c,1,!1))}}catch(p){o.e(p)}finally{o.f()}for(var m,h=null;m=n.next();){var y,v;h?(0,l.l9)(h)?(0,l.l9)(m)&&(y=h.paths).push.apply(y,(0,i.Z)(m.paths)):(0,l.oU)(h)&&(0,l.oU)(m)&&(v=h.rings).push.apply(v,(0,i.Z)(m.rings)):h=m}return h}}]),e}()},81589:function(e,t,r){r.d(t,{Z:function(){return l}});var i=r(4367),a=(r(51532),r(41539),r(78783),r(33948),r(25585)),n=r(87441),o=r(58798);function l(e,t,r,a,o){var l=e.referencesGeometry()&&o?f(t,a,o):t,c=e.repurposeFeature(l);try{return e.evaluate((0,i.Z)((0,i.Z)({},r),{},{$feature:c}))}catch(s){return n.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",s),null}}var c=new Map;function f(e,t,r){var a=r.transform,n=r.hasZ,o=r.hasM;c.has(t)||c.set(t,s(t));var l=c.get(t)(e.geometry,a,n,o);return(0,i.Z)((0,i.Z)({},e),{},{geometry:l})}function s(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,i,a){return(0,o.U1)(r,t,e,i,a)};case"esriGeometryPolygon":return function(e,r,i,a){return(0,o.Ie)(r,t,e,i,a)};case"esriGeometryPolyline":return function(e,r,i,a){return(0,o.G6)(r,t,e,i,a)};case"esriGeometryMultipoint":return function(e,r,i,a){return(0,o.J9)(r,t,e,i,a)};default:return n.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new a.Z("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}}}]);