"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[9222],{33480:function(e,t,n){n.d(t,{Hq:function(){return T},Mk:function(){return d},P_:function(){return I},Qp:function(){return W},VO:function(){return S},_D:function(){return R},kZ:function(){return N},kr:function(){return A},nF:function(){return Z},tB:function(){return k},ut:function(){return z},vF:function(){return O},zD:function(){return w}});var r=n(4367),i=n(2394),a=n(16198),s=(n(78975),n(21249),n(57327),n(41539),n(44197),n(48675),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(75065),n(25585)),o=n(27092),l=n(19509),u=n(98267),c=n(7230),h=n(54787),f=5e-4;function d(e,t,n){return!(0,u.Up)(e,t,n)}function p(e,t,n){var r=d(e,t,n);if(r&&!(0,u.kR)())throw new s.Z("rasterprojectionhelper-project","projection engine is not loaded");return r}var x=function(e,t,n){var r=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,i=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4,a=(e[4*t.cols]-e[0]+e[4*t.cols+4]-e[4])/n[0]*.5,s=(e[4*t.cols+1]-e[1]+e[4*t.cols+5]-e[5])/n[1]*.5;return[0===a||isNaN(a)?0:Math.abs(r-e[2*t.rows+2])/Math.abs(a),0===s||isNaN(s)?0:Math.abs(i-e[2*t.rows+3])/Math.abs(s)]},y={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},m=32,v=4,g=v;function w(){return _.apply(this,arguments)}function _(){return _=(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(0,u.kR)()){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,(0,u.zD)();case 4:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function R(e,t,n){return p(e.spatialReference,t)?n?(0,u.rS)(t,e.spatialReference,e):(0,u.rS)(e.spatialReference,t,e):null}function S(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.spatialReference.equals(t))return e;p(e.spatialReference,t,r);var i=n.center,a=new c.Z({xmin:i.x-e.x/2,xmax:i.x+e.x/2,ymin:i.y-e.y/2,ymax:i.y+e.y/2,spatialReference:e.spatialReference}),s=(0,u.iV)(a,t,r);return(0,o.Wi)(s)?null:{x:s.xmax-s.xmin,y:s.ymax-s.ymin}}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;return(0,l.c9)(e)?t/(0,l.c9)(e):0}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=e.spatialReference;if(a.equals(t))return e;p(a,t,n);var s=(0,u.iV)(e,t,n);if(r&&t.isGeographic){var o=F(a,!0),l=(0,i.Z)(o,2),c=l[0],h=l[1],d=M(a);d&&null!=c&&null!=h&&(Math.abs(e.x-c)<d&&Math.abs(180-s.x)<f?s.x-=360:Math.abs(e.x-h)<d&&Math.abs(180+s.x)<f&&(s.x+=360))}return s}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e[0].spatialReference;return r.equals(t)?e:(p(r,t,n),(0,u.iV)(e,t,n))}function C(e){var t=z(e[0].spatialReference);if(e.length<2||!(0,o.pC)(t))return e[0];for(var n=e[0],r=n.xmin,i=n.xmax,a=n.ymin,s=n.ymax,l=1;l<e.length;l++){var u=e[l];i=u.xmax+t*l,a=Math.min(a,u.ymin),s=Math.max(s,u.ymax)}return new c.Z({xmin:r,xmax:i,ymin:a,ymax:s,spatialReference:e[0].spatialReference})}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.spatialReference.equals(t))return e;var i=T(e),a=z(e.spatialReference,!0);return(0,o.pC)(a)&&0!==i?C(e.clone().normalize().map((function(e){return D(e,t,n,r)}))):D(e,t,n,r)}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=e.spatialReference;if(a.equals(t))return e;p(a,t,n);var s=(0,u.iV)(e,t,n),o=F(a,!0),l=(0,i.Z)(o,2),c=l[0],d=l[1];if(s&&r&&a.isWebMercator&&t.isGeographic&&null!=c&&null!=d){var x=.001,y=1e3;if(Math.abs(e.xmin-c)<x&&Math.abs(d-e.xmax)>y&&Math.abs(180-s.xmax)<f){s.xmin=-180;var m=[];m.push(new h.Z(e.xmax,e.ymin,a)),m.push(new h.Z(e.xmax,(e.ymin+e.ymax)/2,a)),m.push(new h.Z(e.xmax,e.ymax,a));var v=m.map((function(e){return Z(e,t,n)})).filter((function(e){return!isNaN(null==e?void 0:e.x)})).map((function(e){return e.x}));s.xmax=Math.max.apply(null,v)}if(Math.abs(e.xmax-d)<x&&Math.abs(c-e.xmin)>y&&Math.abs(180+s.xmin)<f){s.xmax=180;var g=[];g.push(new h.Z(e.xmin,e.ymin,a)),g.push(new h.Z(e.xmin,(e.ymin+e.ymax)/2,a)),g.push(new h.Z(e.xmin,e.ymax,a));var w=g.map((function(e){return Z(e,t,n)})).filter((function(e){return!isNaN(null==e?void 0:e.x)})).map((function(e){return e.x}));s.xmin=Math.min.apply(null,w)}}var _=F(t,!0),R=(0,i.Z)(_,2);c=R[0],d=R[1];var S=M(t);return S&&null!=c&&null!=d&&s&&(Math.abs(s.xmin-c)<S&&(s.xmin=c),Math.abs(s.xmax-d)<S&&(s.xmax=d)),s}function z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*n:e.wkid&&e.isGeographic?360:2*y[e.wkid]||null}function F(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=z(e,t);return(0,o.pC)(r)&&(n.push(-r/2),n.push(r/2)),n}function P(e,t,n,r){var i=(e-t)/n;return i-Math.floor(i)!=0?i=Math.floor(i):r&&(i-=1),i}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=z(e.spatialReference);if(!(0,o.pC)(n))return 0;var r=t?0:-n/2;return P(e.xmax,r,n,!0)-P(e.xmin,r,n,!1)}function I(e){var t=e.storageInfo.origin.x,n=z(e.spatialReference,!0);if(!(0,o.pC)(n))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};for(var r=n/2,i=e.nativePixelSize,a=e.storageInfo,s=e.extent,l=a.maximumPyramidLevel,u=a.blockWidth,c=a.pyramidScalingFactor,h=i.x,f=[],d=(0,o.pC)(e.transform)&&"gcs-shift"===e.transform.type,p=t+(d?0:r),x=d?n-t:r-t,y=0;y<=l;y++){var m=(s.xmax-t)/h/u,v=m-Math.floor(m)==0?m:Math.ceil(m),g=x/h/u,w=g-Math.floor(g)==0?g:Math.ceil(g),_=Math.floor(p/h/u),R=Math.round(p/h)%u,S=(u-Math.round(x/h)%u)%u;f.push({resolutionX:h,blockWidth:u,datsetColumnCount:v,worldColumnCountFromOrigin:w,leftMargin:R,rightPadding:S,originColumnOffset:_}),h*=c}return{originX:t,halfWorldWidth:r,pyramidsInfo:f,hasGCSSShiftTransform:d}}function W(e){var t=e.isAdaptive&&null==e.spacing,n=e.spacing||[m,m],i=L(e),a={cols:i.size[0]+1,rows:i.size[1]+1},s=x(i.offsets,a,n),o=(s[0]+s[1])/2,l=i.outofBoundPointCount>0&&i.outofBoundPointCount<i.offsets.length/2;return t&&(l||o>g)&&(i=L((0,r.Z)((0,r.Z)({},e),{},{spacing:[v,v]})),a={cols:i.size[0]+1,rows:i.size[1]+1},s=x(i.offsets,a,n)),i.error=s,i.coefficients=j(i.offsets,a,l),i}function L(e){var t=e.projectedExtent,n=e.srcBufferExtent,r=e.pixelSize,i=e.datumTransformation,a=e.rasterTransform,s=t.spatialReference,l=n.spatialReference;p(s,l);for(var u,c=t.xmin,f=t.ymin,d=t.xmax,x=t.ymax,y=z(l),v=e.hasWrapAround||"gcs-shift"===(null==a?void 0:a.type),g=e.spacing||[m,m],w={x:g[0]*r.x,y:g[1]*r.y},_={cols:Math.ceil((d-c)/w.x-.1/g[0])+1,rows:Math.ceil((x-f)/w.y-.1/g[1])+1},R=w.x,S=w.y,M=[],Z=0,C=[],k=0;k<_.cols;k++)for(var D=0;D<_.rows;D++)C.push(new h.Z({x:c+R*k,y:x-S*D,spatialReference:s}));for(var F=b(C,l,i),P=0;P<_.cols;P++){for(var T=[],I=0;I<_.rows;I++){var W=F[P*_.rows+I];a&&(W=a.inverseTransform(W)),T.push(W),P>0&&v&&W&&u[I]&&(0,o.pC)(y)&&W.x<u[I].x&&(W.x+=y),W?(M.push((W.x-n.xmin)/(n.xmax-n.xmin)),M.push((n.ymax-W.y)/(n.ymax-n.ymin))):(M.push(NaN),M.push(NaN),Z++)}u=T}return{offsets:M,error:null,coefficients:null,outofBoundPointCount:Z,spacing:g,size:[_.cols-1,_.rows-1]}}function j(e,t,n){for(var r=t.cols,i=t.rows,a=new Float32Array((r-1)*(i-1)*2*6),s=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),o=new Float32Array([-1,1,0,0,-1,1,1,0,0]),l=0;l<r-1;l++){for(var u=0;u<i-1;u++){var c=l*i*2+2*u,h=e[c],f=e[c+1],d=e[c+2],p=e[c+3];c+=2*i;for(var x=e[c],y=e[c+1],m=e[c+2],v=e[c+3],g=0,w=12*(u*(r-1)+l),_=0;_<3;_++)a[w++]=s[g++]*h+s[g++]*d+s[g++]*m;g=0;for(var R=0;R<3;R++)a[w++]=s[g++]*f+s[g++]*p+s[g++]*v;g=0;for(var S=0;S<3;S++)a[w++]=o[g++]*h+o[g++]*x+o[g++]*m;g=0;for(var M=0;M<3;M++)a[w++]=o[g++]*f+o[g++]*y+o[g++]*v}if(n)for(var Z=0;Z<a.length;Z++)isNaN(a[Z])&&(a[Z]=-1)}return a}function N(e){var t=e.clone().normalize();return 1===t.length?t[0]:C(t)}function A(e,t,n){var r,i=t.storageInfo,a=t.pixelSize,s=!1,l=i.pyramidResolutions;if((0,o.pC)(l)&&l.length){var u=(e.x+e.y)/2,c=l[l.length-1],f=(c.x+c.y)/2,d=(a.x+a.y)/2;if(u<=d)r=0;else if(u>=f)r=l.length,s=u/f>8;else for(var p,x=d,y=1;y<=l.length;y++){if(p=(l[y-1].x+l[y-1].y)/2,u<=p){u===p?r=y:"down"===n?(r=y-1,s=u/x>8):r="up"===n||u-x>p-u||u/x>2?y:y-1;break}x=p}var m=0===r?a:l[r-1];return{pyramidLevel:r,pyramidResolution:new h.Z({x:m.x,y:m.y,spatialReference:t.spatialReference}),excessiveReading:s}}var v=Math.log(e.x/a.x)/Math.LN2,g=Math.log(e.y/a.y)/Math.LN2,w=t.storageInfo.maximumPyramidLevel||0;r="down"===n?Math.floor(Math.min(v,g)):"up"===n?Math.ceil(Math.max(v,g)):Math.round((v+g)/2),r<0?r=0:r>w&&(s=r>w+3,r=w);var _=Math.pow(2,r);return{pyramidLevel:r,pyramidResolution:new h.Z({x:_*t.nativePixelSize.x,y:_*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:s}}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.extent,a=e.spatialReference,s=e.pixelSize,o=S(new h.Z({x:s.x,y:s.y,spatialReference:a}),t,i);if(null==o)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var u=(o.x+o.y)/2,c=(0,l.c9)(t),f=u*c*96*39.37,d=t.isGeographic?256/n*295828763.7958547:256/n*591657527.591555,p="vector-magdir"===e.dataType||"vector-uv"===e.dataType,x=k(i,t);p||r&&(t.isGeographic||t.isWebMercator)&&(p=x.xmin*x.xmax<0);var y,m=f,v=1.001;if(p){m=d;var g=t.isGeographic?1341104507446289e-21:.29858214164761665,w=g*(96*c*39.37),_=t.isGeographic?4326:3857;y=S(new h.Z({x:g,y:g,spatialReference:{wkid:_}}),a,x),y.x*=m/w,y.y*=m/w}else{y={x:s.x,y:s.y};for(var R=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2),M=0;m<d*(v/2)&&M<R;)M++,m*=2,y.x*=2,y.y*=2;Math.max(m,d)/Math.min(m,d)<=v&&(m=d)}for(var Z=[m],b=[{x:y.x,y:y.y}],C=70.5310735,D=Math.min(C,f)/v;m>=D;)m/=2,y.x/=2,y.y/=2,Z.push(m),b.push({x:y.x,y:y.y});return{projectedPixelSize:o,scales:Z,srcResolutions:b,isCustomTilingScheme:!p}}},31840:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(16198),i=n(76133),a=n(92751),s=n(99418),o=n(49161),l=(n(78975),n(63825)),u=n(44171),c=n(2553),h=(n(57787),n(35425),n(90202),n(92236)),f=n(94292),d=n(1936),p=n(50460),x=n(87349),y=(n(92222),n(49204)),m=n(49026),v=n(47303),g=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),e.flowStyle=null,e}return(0,a.Z)(n,[{key:"requiresDedicatedFBO",get:function(){return!1}},{key:"doRender",value:function(e){(0,p.Z)((0,x.Z)(n.prototype),"doRender",this).call(this,e)}},{key:"prepareRenderPasses",value:function(e){var t=this,r=e.registerRenderPass({name:"flow",brushes:[y.Z],target:function(){return t.children},drawPhase:m.jx.MAP});return[].concat((0,d.Z)((0,p.Z)((0,x.Z)(n.prototype),"prepareRenderPasses",this).call(this,e)),[r])}}]),n}(v.Z),w=(n(75065),n(87441)),_=n(14937),R=n(27092),S=n(24446),M=n(54787),Z=(n(68309),w.Z.getLogger("esri.views.2d.engine.flow.FlowDisplayData")),b=function(){function e(t,n,r,a){(0,i.Z)(this,e),this.state={name:"created"},this.flowStyle=t,this.extent=n,this.size=r,this.pixelRatio=a}return(0,a.Z)(e,[{key:"load",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new AbortController,this.state={name:"loading",abortController:t},e.next=4,this.flowStyle.loadResources({extent:this.extent,size:this.size,pixelRatio:this.pixelRatio},t.signal);case 4:n=e.sent,this.state={name:"loaded",resources:n};case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"prepareForRendering",value:function(e,t,n){if("loaded"===this.state.name){var r=this.state.resources;r.prepareForRendering(e,t,n),this.state={name:"attached",resources:r}}else Z.error("Only loaded resources can be attached.")}},{key:"destroy",value:function(){if("loading"===this.state.name)return this.state.abortController.abort(),void(this.state={name:"detached"});"attached"===this.state.name&&(this.state.resources.detach(),this.state={name:"detached"})}},{key:"update",value:function(e){return!!this.flowStyle.areResourcesCompatible(e.flowStyle)&&(!(!this.extent.equals(e.extent)||this.size[0]!==e.size[0]||this.size[1]!==e.size[1]||this.pixelRatio!==e.pixelRatio)&&(this.flowStyle=e.flowStyle,!0))}}]),e}(),C=n(68491),k=n(33482),D=n(80188),z=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),e._displayData=null,e}return(0,a.Z)(n,[{key:"displayData",get:function(){return this._displayData},set:function(e){this._displayData=e,this.requestRender()}},{key:"clear",value:function(){(0,R.pC)(this._displayData)&&(this._displayData.destroy(),this._displayData=null,this.requestRender())}},{key:"setTransform",value:function(e){var t=this.displayData;if(!(0,R.Wi)(t)){var n=t.extent.xmin,r=t.extent.ymax,i=[0,0];e.toScreen(i,[n,r]);var a=(t.extent.xmax-t.extent.xmin)/t.size[0]/e.resolution,s=(0,_.Vl)(e.rotation),o=this.transforms.dvs;(0,C.b)(o),(0,C.c)(o,o,[-1,1,0]),(0,C.d)(o,o,[2/(e.size[0]*e.pixelRatio),-2/(e.size[1]*e.pixelRatio),1]),(0,C.c)(o,o,[i[0],i[1],0]),(0,C.r)(o,o,s),(0,C.d)(o,o,[a*e.pixelRatio,a*e.pixelRatio,1])}}},{key:"_createTransforms",value:function(){return{dvs:(0,k.c)()}}}]),n}(D.s),F=n(7230),P=1.15,T=w.Z.getLogger("esri.views.2d.engine.flow.FlowStrategy"),I=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),r._flowDisplayObject=new z,r._loading=null,r}return(0,a.Z)(n,[{key:"initialize",value:function(){this.flowContainer.addChild(this._flowDisplayObject)}},{key:"destroy",value:function(){this._clear(),this.flowContainer.removeAllChildren()}},{key:"updating",get:function(){return null!=this._loading}},{key:"update",value:function(e){var t=this,n=this.flowContainer.flowStyle;if((0,R.Wi)(n))this._clear();else{var r=e.state,i=r.extent,a=r.rotation,s=r.resolution,o=r.pixelRatio,l=L(i,a);l.expand(P);var u=[Math.round((l.xmax-l.xmin)/s),Math.round((l.ymax-l.ymin)/s)],c=new b(n,l,u,o);if((0,R.pC)(this._loading)){if(this._loading.update(c))return;this._loading.destroy(),this._loading=null}!(0,R.Wi)(this._flowDisplayObject.displayData)&&this._flowDisplayObject.displayData.update(c)||(c.load().then((function(){t._flowDisplayObject.clear(),t._flowDisplayObject.displayData=t._loading,t._loading=null}),(function(e){(0,S.D_)(e)||(T.error("A resource failed to load.",e),t._loading=null)})),this._loading=c)}}},{key:"_clear",value:function(){this._flowDisplayObject.clear(),(0,R.pC)(this._loading)&&(this._loading.destroy(),this._loading=null)}}]),n}(u.Z);(0,l._)([(0,c.Cb)()],I.prototype,"_loading",void 0),(0,l._)([(0,c.Cb)()],I.prototype,"flowContainer",void 0),(0,l._)([(0,c.Cb)()],I.prototype,"updating",null),I=(0,l._)([(0,h.j)("esri.views.2d.engine.flow.FlowStrategy")],I);var W=I;function L(e,t){var n=new M.Z({x:(e.xmax+e.xmin)/2,y:(e.ymax+e.ymin)/2,spatialReference:e.spatialReference}),r=e.xmax-e.xmin,i=e.ymax-e.ymin,a=Math.abs(Math.cos((0,_.Vl)(t))),s=Math.abs(Math.sin((0,_.Vl)(t))),o=a*r+s*i,l=s*r+a*i,u=new F.Z({xmin:n.x-o/2,ymin:n.y-l/2,xmax:n.x+o/2,ymax:n.y+l/2,spatialReference:e.spatialReference});return u.centerAt(n),u}var j=n(597);function N(e){var t=(0,j.F2)(e.lineWidth),n=2*t,r=Math.round((0,j.F2)(e.lineLength)/n)+1,i=t,a=10,s=e.lineColor.toRgba(),o=[s[0]/255,s[1]/255,s[2]/255,s[3]],l=e.lineSpeed,u=e.fadeDuration,c=e.density;return{lineRenderWidth:t,segmentLength:n,verticesPerLine:r,lineCollisionWidth:i,lineSpacing:a,lineColor:o,lineSpeed:l,fadeDuration:u,density:c,smoothing:(0,j.F2)(e.smoothing),velocityScale:1,minWeightThreshold:.001,minSpeedThreshold:.001,maxTurnAngle:1,mergeLines:!0,interpolate:!0,profile:!1}}var A=n(12794),O=(n(17115),n(56770),n(28383),n(15401),n(29168),n(82595)),V=function(){function e(t,n){(0,i.Z)(this,e),this._vertexData=t,this._indexData=n}return(0,a.Z)(e,[{key:"prepareForRendering",value:function(e,t,n){var r=A.Z.createVertex(e,35044,this._vertexData),i=A.Z.createIndex(e,35044,this._indexData),a=new O.Z(e,t,n,{geometry:r},i);this.vertexBuffer=r,this.indexBuffer=i,this.vertexArray=a,this._vertexData=null,this._indexData=null}},{key:"detach",value:function(){this.vertexArray.dispose(),this.vertexBuffer.dispose(),this.indexBuffer.dispose()}}]),e}(),q=function(){function e(t,n,r){(0,i.Z)(this,e),this._loadImagery=t,this._createStreamlinesMesh=n,this._rendererSettings=N(r)}return(0,a.Z)(e,[{key:"animated",get:function(){return this._rendererSettings.lineSpeed>0}},{key:"renderSettings",get:function(){return this._rendererSettings}},{key:"areResourcesCompatible",value:function(e){var t=!0;return t=t&&e._loadImagery===this._loadImagery,t=t&&e._createStreamlinesMesh===this._createStreamlinesMesh,t=t&&e._rendererSettings.verticesPerLine===this._rendererSettings.verticesPerLine,t=t&&e._rendererSettings.segmentLength===this._rendererSettings.segmentLength,t=t&&e._rendererSettings.lineSpacing===this._rendererSettings.lineSpacing,t=t&&e._rendererSettings.density===this._rendererSettings.density,t=t&&e._rendererSettings.smoothing===this._rendererSettings.smoothing,t=t&&e._rendererSettings.velocityScale===this._rendererSettings.velocityScale,t=t&&e._rendererSettings.minWeightThreshold===this._rendererSettings.minWeightThreshold,t=t&&e._rendererSettings.minSpeedThreshold===this._rendererSettings.minSpeedThreshold,t=t&&e._rendererSettings.mergeLines===this._rendererSettings.mergeLines,t=t&&e._rendererSettings.interpolate===this._rendererSettings.interpolate,t&&this._rendererSettings.mergeLines&&(t=e._rendererSettings.lineCollisionWidth===this._rendererSettings.lineCollisionWidth),!!t}},{key:"loadResources",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.extent,i=t.size,(0,S.k_)(n),e.next=4,this._loadImagery(r,i[0],i[1],n);case 4:return a=e.sent,e.next=7,this._createStreamlinesMesh(this._rendererSettings,a,n);case 7:return s=e.sent,o=s.vertexData,l=s.indexData,e.abrupt("return",new V(o,l));case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),B=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),e._loadImagery=function(t,n,r,i){return(0,f.KK)(e.layer,t,n,r,i)},e._createStreamlinesMesh=function(t,n,r){return e.layer.createStreamlinesMesh({flowData:n,rendererSettings:t},{signal:r})},e.container=null,e.layer=null,e.type="rasterAnimatedFlow",e.redrawOrRefetch=(0,r.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e._rendererChanged();case 1:case"end":return t.stop()}}),t)}))),e}return(0,a.Z)(n,[{key:"updating",get:function(){return!this._strategy||this._strategy.updating}},{key:"update",value:function(e){e.stationary?this._strategy.update(e):this.layerView.requestUpdate()}},{key:"install",value:function(e){this.container=new g,e.addChild(this.container),this._strategy=new W({flowContainer:this.container}),this._rendererChanged()}},{key:"uninstall",value:function(){this._strategy.destroy(),this.container.removeAllChildren(),this.container.remove()}},{key:"moveEnd",value:function(){}},{key:"doRefresh",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"attach",value:function(){}},{key:"_rendererChanged",value:function(){if("animated-flow"===this.layer.renderer.type){var e=new q(this._loadImagery,this._createStreamlinesMesh,this.layer.renderer);this.container.flowStyle=e,this.layerView.requestUpdate()}}}]),n}(u.Z);(0,l._)([(0,c.Cb)()],B.prototype,"_strategy",void 0),(0,l._)([(0,c.Cb)()],B.prototype,"container",void 0),(0,l._)([(0,c.Cb)()],B.prototype,"layer",void 0),(0,l._)([(0,c.Cb)()],B.prototype,"layerView",void 0),(0,l._)([(0,c.Cb)()],B.prototype,"type",void 0),(0,l._)([(0,c.Cb)()],B.prototype,"updating",null),B=(0,l._)([(0,h.j)("esri.views.2d.engine.flow.AnimatedFlowView2D")],B);var G=B},66541:function(e,t,n){n.d(t,{V:function(){return u},e:function(){return o}});var r=n(1936),i=n(16198),a=(n(78975),n(26699),n(32023),n(92222),n(41539),n(54747),n(27092)),s=n(63390);function o(e){return l.apply(this,arguments)}function l(){return l=(0,i.Z)(regeneratorRuntime.mark((function e(t){var n,i,o,l,u,c,h,f,d,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:t.popupTemplate,(0,a.pC)(n)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,n.getRequiredFields(t.fieldsIndex);case 5:if(i=e.sent,o=n.lastEditInfoEnabled,l=t.objectIdField,u=t.typeIdField,c=t.globalIdField,h=t.relationships,!i.includes("*")){e.next=13;break}return e.abrupt("return",["*"]);case 13:if(!o){e.next=19;break}return e.next=16,(0,s.CH)(t);case 16:e.t0=e.sent,e.next=20;break;case 19:e.t0=[];case 20:return f=e.t0,d=(0,s.Q0)(t.fieldsIndex,[].concat((0,r.Z)(i),(0,r.Z)(f))),e.abrupt("return",(u&&d.push(u),d&&l&&t.fieldsIndex.has(l)&&-1===d.indexOf(l)&&d.push(l),d&&c&&t.fieldsIndex.has(c)&&-1===d.indexOf(c)&&d.push(c),h&&h.forEach((function(e){var n=e.keyField;d&&n&&t.fieldsIndex.has(n)&&-1===d.indexOf(n)&&d.push(n)})),d));case 23:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e,t){return e.popupTemplate?e.popupTemplate:(0,a.pC)(t)&&t.defaultPopupTemplateEnabled&&(0,a.pC)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}}]);