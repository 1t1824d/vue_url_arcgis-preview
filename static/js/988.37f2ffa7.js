"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[988],{58798:function(e,t,n){n.d(t,{G6:function(){return R},Ie:function(){return F},J9:function(){return b},RF:function(){return P},U1:function(){return S},vY:function(){return c},ym:function(){return k}});var r=n(27092),i=n(64316);const a=(e,t,n)=>[t,n],o=(e,t,n)=>[t,n,e[2]],s=(e,t,n)=>[t,n,e[2],e[3]];function c(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,r.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function u({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function m(e,t,n){const r=[];let i,a,o,s;for(let c=0;c<n.length;c++){const m=n[c];c>0?(o=l(e,m[0]),s=u(e,m[1]),o===i&&s===a||(r.push(t(m,o-i,s-a)),i=o,a=s)):(i=l(e,m[0]),a=u(e,m[1]),r.push(t(m,i,a)))}return r.length>0?r:null}function f(e,t,n,r){return m(e,n?r?s:o:r?o:a,t)}function h(e,t,n,r){const i=[],c=n?r?s:o:r?o:a;for(let a=0;a<t.length;a++){const n=m(e,c,t[a]);n&&n.length>=3&&i.push(n)}return i.length?i:null}function y(e,t,n,r){const i=[],c=n?r?s:o:r?o:a;for(let a=0;a<t.length;a++){const n=m(e,c,t[a]);n&&n.length>=2&&i.push(n)}return i.length?i:null}function g({scale:e,translate:t},n){return n*e[0]+t[0]}function p({scale:e,translate:t},n){return t[1]-n*e[1]}function d(e,t,n){const r=new Array(n.length);if(!n.length)return r;const[i,a]=e.scale;let o=g(e,n[0][0]),s=p(e,n[0][1]);r[0]=t(n[0],o,s);for(let c=1;c<n.length;c++){const e=n[c];o+=e[0]*i,s-=e[1]*a,r[c]=t(e,o,s)}return r}function C(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=d(e,t,n[i]);return r}function M(e,t,n,r){return d(e,n?r?s:o:r?o:a,t)}function x(e,t,n,r){return C(e,n?r?s:o:r?o:a,t)}function w(e,t,n,r){return C(e,n?r?s:o:r?o:a,t)}function z(e,t,n,r,i){return t.xmin=l(e,n.xmin),t.ymin=u(e,n.ymin),t.xmax=l(e,n.xmax),t.ymax=u(e,n.ymax),t!==n&&(r&&(t.zmin=n.zmin,t.zmax=n.zmax),i&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}function I(e,t,n,r,i){return t.points=f(e,n.points,r,i),t}function P(e,t,n,r,i){return t.x=l(e,n.x),t.y=u(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function _(e,t,n,r,i){const a=h(e,n.rings,r,i);return a?(t.rings=a,t):null}function v(e,t,n,r,i){const a=y(e,n.paths,r,i);return a?(t.paths=a,t):null}function k(e,t){return e&&t?(0,i.wp)(t)?P(e,{},t,!1,!1):(0,i.l9)(t)?v(e,{},t,!1,!1):(0,i.oU)(t)?_(e,{},t,!1,!1):(0,i.aW)(t)?I(e,{},t,!1,!1):(0,i.YX)(t)?z(e,{},t,!1,!1):null:null}function b(e,t,n,i,a){return(0,r.pC)(n)&&(t.points=M(e,n.points,i,a)),t}function S(e,t,n,i,a){return(0,r.Wi)(n)||(t.x=g(e,n.x),t.y=p(e,n.y),t!==n&&(i&&(t.z=n.z),a&&(t.m=n.m))),t}function F(e,t,n,i,a){return(0,r.pC)(n)&&(t.rings=w(e,n.rings,i,a)),t}function R(e,t,n,i,a){return(0,r.pC)(n)&&(t.paths=x(e,n.paths,i,a)),t}},36308:function(e,t,n){n.d(t,{Z:function(){return c}});n(48675),n(3462);var r=n(32297),i=n(42027),a=n(58837),o=n(64880);const s=512;class c{constructor(e){this._resourceManager=e}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,t,n){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){const[n,i,a]=r.fN.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t);return{size:[i,a],image:new Uint32Array(n.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){let t,n;if("simple-line"===e.type||"esriSLS"===e.type)switch(t=(0,r.U1)(e.style,e.cap),e.cap){case"butt":n="Butt";break;case"square":n="Square";break;default:n="Round"}else t=e.dashTemplate,n=e.cim.capStyle;const[i,a,o]=r.fN.rasterizeSimpleLine(t,n);return{size:[a,o],image:new Uint32Array(i.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let o,s,c;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(o=r.B$.fromSimpleMarker(e),c=(0,a.Fp)(o)):e.cim&&"CIMHatchFill"===e.cim.type?(o=r.B$.fromCIMHatchFill(e.cim),s=new i.Z(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(o=r.B$.fromCIMInsidePolygon(e.cim),s=new i.Z(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):(o=e.cim,c=(0,a.Fp)(o)),c&&!n){const[e,t,n]=(0,a.RL)(c);return e?{size:[t,n],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[l,u,m,f,h]=r.B$.rasterize(this._rasterizationCanvas,o,s,this._resourceManager,!n);return l?{size:[u,m],image:new Uint32Array(l.buffer),sdf:!1,simplePattern:!1,anchorX:f,anchorY:h}:null}rasterizeImageResource(e,t,n,r){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext("2d");n instanceof ImageData?i.putImageData(n,0,0):(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`),i.drawImage(n,0,0,e,t));const a=i.getImageData(0,0,e,t),c=new Uint8Array(a.data);if(r)for(const o of r)if(o&&o.oldColor&&4===o.oldColor.length&&o.newColor&&4===o.newColor.length){const[e,t,n,r]=o.oldColor,[i,a,s,l]=o.newColor;if(e===i&&t===a&&n===s&&r===l)continue;for(let o=0;o<c.length;o+=4)e===c[o]&&t===c[o+1]&&n===c[o+2]&&r===c[o+3]&&(c[o]=i,c[o+1]=a,c[o+2]=s,c[o+3]=l)}let l;for(let o=0;o<c.length;o+=4)l=c[o+3]/255,c[o]=c[o]*l,c[o+1]=c[o+1]*l,c[o+2]=c[o+2]*l;let u=c,m=e,f=t;const h=s;if(m>=h||f>=h){const n=m/f;n>1?(m=h,f=Math.round(h/n)):(f=h,m=Math.round(h*n)),u=new Uint8Array(4*m*f);const r=new Uint8ClampedArray(u.buffer);(0,o.TT)(c,e,t,r,m,f,!1)}return{size:[m,f],image:new Uint32Array(u.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},20259:function(e,t,n){n.r(t),n.d(t,{previewCIMSymbol:function(){return v}});var r,i=n(597),a=(n(48675),n(3462),n(47038)),o=n(35680),s=n(24446),c=n(98035),l=n(64316),u=n(9816),m=n(5734),f=n(36308),h=n(24165),y=n(64880),g=n(86917),p=n(98244);!function(e){e.Legend="legend",e.Preview="preview"}(r||(r={}));const d=(e,t,n)=>{if(e&&e.targetSize){let r;if(n){const t=Math.max(n.frame.xmax-n.frame.xmin,n.frame.ymax-n.frame.ymin);r=e.targetSize/(0,i.F2)(t)}else r=e.targetSize/t.referenceSize;return r}return e&&e.scaleFactor?e.scaleFactor:1},C={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class M{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new h.d,this._cimResourceManager=new m.Z,this._rasterizer=new f.Z(this._cimResourceManager)}async rasterizeCIMSymbolAsync(e,t,n,r,i,a,o,s){r=r||(t?null!=t.centroid?"esriGeometryPolygon":(0,l.Ji)(t.geometry):null)||w(e);const c=await this.analyzeCIMSymbol(e,t?x(t.attributes):null,n,r,s);return this.rasterizeCIMSymbol(c,t,r,i,a,o)}async analyzeCIMSymbol(e,t,n,r,i){const a=[],o=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null;let c;await(0,u.c)(e.data,o,this._cimResourceManager,a,this._avoidSDF),(0,s.k_)(i);for(const s of a)"CIMPictureMarker"!==s.cim.type&&"CIMPictureFill"!==s.cim.type&&"CIMPictureStroke"!==s.cim.type||(c||(c=[]),c.push(this.fetchPictureMarkerResource(s,i))),n&&"text"===s.type&&"string"==typeof s.text&&s.text.indexOf("[")>-1&&(s.text=(0,y.Qs)(n,s.text,s.cim.textCase));return c&&await Promise.all(c),a}async fetchPictureMarkerResource(e,t){const n=e.materialHash;if(!this._pictureMarkerCache.get(n)){const r=(await(0,o["default"])(e.cim.url,{responseType:"image",signal:t&&t.signal})).data;this._pictureMarkerCache.set(n,r)}}rasterizeCIMSymbol(e,t,n,r,i,a){const o=[];for(const s of e){r&&"function"==typeof r.scaleFactor&&(r.scaleFactor=r.scaleFactor(t,i,a));const e=this._getRasterizedResource(s,t,n,r,i,a);if(!e)continue;let c=0,l=e.anchorX||0,u=e.anchorY||0,m=!1,f=0,h=0;if("esriGeometryPoint"===n){const e=d(r,s,null);if(f=(0,y.hf)(s.offsetX,t,i,a)*e||0,h=(0,y.hf)(s.offsetY,t,i,a)*e||0,"marker"===s.type)c=(0,y.hf)(s.rotation,t,i,a)||0,m=!!s.rotateClockwise&&s.rotateClockwise;else if("text"===s.type){if(c=(0,y.hf)(s.angle,t,i,a)||0,void 0!==s.horizontalAlignment)switch(s.horizontalAlignment){case"left":l=-.5;break;case"right":l=.5;break;default:l=0}if(void 0!==s.verticalAlignment)switch(s.verticalAlignment){case"top":u=.5;break;case"bottom":u=-.5;break;case"baseline":u=-.25;break;default:u=0}}}null!=e&&o.push({angle:c,rotateClockWise:m,anchorX:l,anchorY:u,offsetX:f,offsetY:h,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement("canvas"),n=t.getContext("2d");let r=0,a=0,o=0,s=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const u=l.size,m=t.offsetX,h=t.offsetY,y=t.anchorX,g=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,C=(0,i.F2)(m)-u[0]*(.5+y),M=(0,i.F2)(h)-u[1]*(.5+g),x=C+u[0],w=M+u[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),n=C*t-M*e,r=C*e+M*t,i=C*t-w*e,a=C*e+w*t,o=x*t-w*e,s=x*e+w*t,c=x*t-M*e,l=x*e+M*t;C=Math.min(n,i,o,c),M=Math.min(r,a,s,l),x=Math.max(n,i,o,c),w=Math.max(r,a,s,l)}r=C<r?C:r,a=M<a?M:a,o=x>o?x:o,s=w>s?w:s;const z=n.createImageData(l.size[0],l.size[1]);z.data.set(new Uint8ClampedArray(l.image.buffer));const I={offsetX:m,offsetY:h,rotateClockwise:p,angle:d,rasterizedImage:z,anchorX:y,anchorY:g};c.push(I)}t.width=o-r,t.height=s-a;const l=-r,u=s;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),r=e.rasterizedImage.width,a=e.rasterizedImage.height,o=l-r*(.5+e.anchorX),s=u-a*(.5-e.anchorY);if(e.angle){const r=(360-e.angle)*Math.PI/180;n.save(),n.translate((0,i.F2)(e.offsetX),-(0,i.F2)(e.offsetY)),n.translate(l,u),n.rotate(r),n.translate(-l,-u),n.drawImage(t,o,s),n.restore()}else n.drawImage(t,o+(0,i.F2)(e.offsetX),s-(0,i.F2)(e.offsetY))}const m=new p.Z({x:l/t.width-.5,y:u/t.height-.5});return{imageData:0!==t.width&&0!==t.height?n.getImageData(0,0,t.width,t.height):n.createImageData(1,1),anchorPosition:m}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const t=this._imageDataCanvas,n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t}_imageTo32Array(e,t,n,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const i=this._imageDataCanvas,o=i.getContext("2d");if(i.width=t,i.height=n,o.drawImage(e,0,0,t,n),r){o.save();const i=new a.Z(r);o.fillStyle=i.toHex(),o.globalCompositeOperation="multiply",o.fillRect(0,0,t,n),o.globalCompositeOperation="destination-atop",o.drawImage(e,0,0,t,n),o.restore()}return new Uint32Array(o.getImageData(0,0,t,n).data.buffer)}_getRasterizedResource(e,t,n,i,a,o){let s,l,u,m,f=null,h=null;if("esriGeometryPolyline"===n||"esriGeometryPolygon"===n){const m=i&&i.style?i.style:r.Legend,g="esriGeometryPolyline"===n?C.stroke[m]:C.fill[m];if("line"===e.type){if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){const n=(0,y.hf)(e.width,t,a,o),r=(0,y.hf)(e.color,t,a,o),{image:i,width:s,height:c}=this._getPictureResource(e,n,r);return this._rasterizePictureResource(e,i,s,c,g,n)}return null}({analyzedCIM:s,hash:u}=z(e,t,a,o)),l=this._embedCIMLayerInVectorMarker(s,g)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type)return null;if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=(0,y.hf)(e.offsetX,t,a,o),e.cim.offsetY=(0,y.hf)(e.offsetY,t,a,o),e.cim.rotation=(0,y.hf)(e.rotation,t,a,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:s}=z(e,t,a,o)),u=(0,c.hP)(JSON.stringify(s)).toString(),l=this._embedCIMLayerInVectorMarker(s,g),f=(0,y.hf)(e.size,t,a,o),h=e.path}else{if("text"===e.type)return null;if("fill"===e.type){if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){const n=e.cim.size||e.cim.height;let r,i,c;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type)({image:r,width:i,height:c}=this._getPictureResource(e,n,(0,y.hf)(e.color,t,a,o)));else{({analyzedCIM:s,hash:u}=z(e,t,a,o));const l=this._rasterizer.rasterizeJSONResource({cim:s,type:e.type,url:e.url,mosaicHash:u,size:n,path:h},1,this._avoidSDF);r=l.image,i=l.size[0],c=l.size[1]}return this._rasterizePictureResource(e,r,i,c,g,null)}if("CIMSolidFill"!==e.cim.type)return null;({analyzedCIM:s,hash:u}=z(e,t,a,o)),l=this._embedCIMLayerInVectorMarker(s,g)}}}else{if("text"===e.type)return m=this._rasterizeTextResource(e,t,i,a,o),m;({analyzedCIM:s,hash:u}=z(e,t,a,o));const n=d(i,e,null);if("CIMPictureMarker"===e.cim.type){const r=(0,y.hf)(e.size,t,a,o)*n,{image:i,width:s,height:c}=this._getPictureResource(e,r,(0,y.hf)(e.color,t,a,o));return m={image:i,size:[s,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}(0,g.FW)(s,n,{preserveOutlineWidth:!1}),l=s}u+=n,i&&(u+=JSON.stringify(i));const p=this._resourceCache;return p.has(u)?p.get(u):(m=this._rasterizer.rasterizeJSONResource({cim:l,type:e.type,url:e.url,mosaicHash:u,size:f,path:h},window.devicePixelRatio||1,this._avoidSDF),p.set(u,m),m)}_rasterizeTextResource(e,t,n,r,i){const a=d(n,e,null),o=(0,y.hf)(e.text,t,r,i);if(!o||0===o.length)return null;const s=(0,y.hf)(e.fontName,t,r,i),c=(0,y.hf)(e.style,t,r,i),l=(0,y.hf)(e.weight,t,r,i),u=(0,y.hf)(e.decoration,t,r,i),m=(0,y.hf)(e.size,t,r,i)*a,f=(0,y.hf)(e.horizontalAlignment,t,r,i),h=(0,y.hf)(e.verticalAlignment,t,r,i),g=(0,y.nn)((0,y.hf)(e.color,t,r,i)),p=(0,y.nn)((0,y.hf)(e.outlineColor,t,r,i)),C={color:g,size:m,horizontalAlignment:f,verticalAlignment:h,font:{family:s,style:c,weight:l,decoration:u},halo:{size:(0,y.hf)(e.outlineSize,t,r,i)||0,color:p,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,n,r,a,o){const s=document.createElement("canvas"),c=s.getContext("2d");s.height=(0,i.F2)(Math.max(a.frame.ymax-a.frame.ymin,o)),s.width=(0,i.F2)(a.frame.xmax-a.frame.xmin);const u=c.createImageData(n,r);u.data.set(new Uint8ClampedArray(t.buffer));const m=this._imageDataToCanvas(u),f=c.createPattern(m,"repeat"),h=Math.cos((-e.cim.rotation||0)*Math.PI/180),y=Math.sin((-e.cim.rotation||0)*Math.PI/180);f.setTransform({m11:h,m12:y,m21:-y,m22:h,m41:(0,i.F2)(e.cim.offsetX)||0,m42:(0,i.F2)(e.cim.offsetY)||0});const g=a.canvasPaths;let p,d,C;(0,l.oU)(g)?(p=g.rings,c.fillStyle=f,d=c.fill,C=["evenodd"]):(0,l.l9)(g)&&(p=g.paths,c.strokeStyle=f,c.lineWidth=o,d=c.stroke,p[0][0][1]=s.height/2,p[0][1][1]=s.height/2),c.beginPath();for(const l of p){const e=l?l.length:0;if(e>1){let t=l[0];c.moveTo((0,i.F2)(t[0]),(0,i.F2)(t[1]));for(let n=1;n<e;++n)t=l[n],c.lineTo((0,i.F2)(t[0]),(0,i.F2)(t[1]));c.closePath()}}d.apply(c,C);const M=c.getImageData(0,0,s.width,s.height),x=new Uint8Array(M.data);return{size:[s.width,s.height],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t,n){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const a=r.height/r.width,o=t?a>1?(0,i.F2)(t):(0,i.F2)(t)/a:r.width,s=t?a>1?(0,i.F2)(t)*a:(0,i.F2)(t):r.height;return{image:this._imageTo32Array(r,o,s,n),width:o,height:s}}_embedCIMLayerInVectorMarker(e,t){const n=(0,l.oU)(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol",r=t.frame;return{type:"CIMVectorMarker",frame:r,size:r.ymax-r.ymin,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:n,symbolLayers:[e]}}]}}}function x(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}function w(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function z(e,t,n,r){let i,a;return"function"==typeof e.materialHash?(i=(0,e.materialHash)(t,n,r),a=(0,u.S)(e.cim,e.materialOverrides)):(i=e.materialHash,a=e.cim),{analyzedCIM:a,hash:i}}var I=n(19610);const P=new M(null,!0),_=120;async function v(e,t={}){const{size:n,maxSize:r,node:a,opacity:o}=t,s=t.cimOptions||t,{feature:c,fieldMap:l,geometryType:u,style:m}=s,f=(0,g.kW)(e),h=Math.min(null!=n?n:f,null!=r?r:(0,i.Wz)(_));h!==f&&(e=e.clone(),(0,g.PI)(e,h,{preserveOutlineWidth:!0}));let y=3;e&&e.data&&e.data.symbol&&"CIMPointSymbol"!==e.data.symbol.type&&(y=1);const p=await P.rasterizeCIMSymbolAsync(e,c,l,u,{scaleFactor:y,style:m}),d=document.createElement("canvas");d.width=p.imageData.width,d.height=p.imageData.height,d.getContext("2d").putImageData(p.imageData,0,0);let C=d.width/y,M=d.height/y;if(null!=n&&(null==(null==t?void 0:t.scale)||(null==t?void 0:t.scale))){const e=C/M;C=e<=1?Math.ceil(h*e):h,M=e<=1?h:Math.ceil(h/e)}const x=new Image(C,M);x.src=d.toDataURL(),null!=o&&(x.style.opacity=`${o}`);let w=x;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:C,height:M,src:x.src},fill:null,stroke:null,offset:[0,0]};w=(0,I.w)([[e]],[C,M],{effectView:t.effectView})}return a&&a.appendChild(w),w}},92963:function(e,t,n){n.d(t,{$0:function(){return o},AI:function(){return r},Al:function(){return f},CQ:function(){return L},CU:function(){return R},D3:function(){return m},Ex:function(){return c},I_:function(){return a},Ic:function(){return h},Ij:function(){return p},Ip:function(){return X},Iw:function(){return l},Jc:function(){return S},Jw:function(){return M},MI:function(){return Y},QU:function(){return C},SD:function(){return H},Tz:function(){return J},Uh:function(){return T},V4:function(){return F},XJ:function(){return U},Zd:function(){return v},_6:function(){return V},a:function(){return A},aK:function(){return I},e0:function(){return G},eF:function(){return u},f2:function(){return d},fL:function(){return D},iJ:function(){return y},iV:function(){return k},kF:function(){return x},m4:function(){return P},nM:function(){return g},oK:function(){return O},ru:function(){return i},tQ:function(){return b},uG:function(){return _},xl:function(){return z},xm:function(){return s},yP:function(){return w}});const r=1e-30,i=4294967295,a=512,o=8,s=29,c=24,l=8,u={metrics:{width:15,height:17,left:0,top:-7,advance:14}},m=0,f=0,h=0,y=1,g=2,p=3,d=4,C=5,M=6,x=5,w=6,z=1,I=2,P=2,_=1,v=2,k=4,b=1.05,S=6,F=5,R=6,A=1.15,D=2,U=8,X=500,Y=10,T=2,L=0,J=1,O=4,G=8,V=4,H=1},14621:function(e,t,n){n.d(t,{Au:function(){return i},Jz:function(){return o},UJ:function(){return a}});n(48675),n(3462);const r=new Float32Array(1);new Uint32Array(r.buffer);function i(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function a(e,t){return 65535&e|t<<16}function o(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}}}]);