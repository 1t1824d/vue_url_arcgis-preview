"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[5068],{35068:function(e,t,r){r.r(t),r.d(t,{BufferObject:function(){return i.Z},FramebufferObject:function(){return n.Z},Program:function(){return a.$},ProgramCache:function(){return s.Z},Renderbuffer:function(){return o.Z},ShaderCompiler:function(){return c.Z},Texture:function(){return h.Z},VertexArrayObject:function(){return p.Z},createContextOrErrorHTML:function(){return u.s},createProgram:function(){return l.H},glslifyDefineMap:function(){return l.K}});var i=r(12794),n=r(17115),a=r(76633),s=r(48055),o=r(10643),c=r(54952),h=r(29168),p=r(82595),l=r(53012),u=r(97334)},48055:function(e,t,r){r.d(t,{Z:function(){return n}});var i=r(53012);class n{constructor(e){this._programCacheByTemplate=new Map,this._rctx=e}dispose(){this._programCacheByTemplate.forEach((e=>e.programs.forEach((e=>e.dispose())))),this._programCacheByTemplate=null}getProgram(e,t){return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,(t=>(0,i.H)(this._rctx,e,t))),this.getProgramTemplateInstance(e,t)}addProgramTemplate(e,t){this._programCacheByTemplate.set(e,{constructor:t,programs:new Map})}getProgramTemplateInstance(e,t){const r=this._programCacheByTemplate.get(e);if(r){const e=t?JSON.stringify(t):"default";if(!r.programs.has(e)){const i=r.constructor(t);r.programs.set(e,i)}return r.programs.get(e)}return null}}},54952:function(e,t,r){r.d(t,{Z:function(){return i}});r(21703);class i{constructor(e){this.readFile=e}resolveIncludes(e){return this.resolve(e)}resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this.read(e);if(!r)throw new Error(`cannot find shader file ${e}`);const i=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let n=i.exec(r);const a=[];for(;null!=n;)a.push({path:n[1],start:n.index,length:n[0].length}),n=i.exec(r);let s=0,o="";return a.forEach((e=>{o+=r.slice(s,e.start),o+=t.has(e.path)?"":this.resolve(e.path,t),s=e.start+e.length})),o+=r.slice(s),t.set(e,o),o}read(e){return this.readFile(e)}}},29168:function(e,t,r){r.d(t,{Z:function(){return h}});r(21703);var i=r(14937),n=r(27092),a=r(56770),s=r(28383),o=r(68412);const c=4;class h{constructor(e,t,r=null){this._context=e,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,e.instanceCounter.increment(s._g.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...t},34067===this._descriptor.target?this.setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(s._g.Texture,this))}release(){this.dispose()}resize(e,t){const r=this._descriptor;r.width===e&&r.height===t||(r.width=e,r.height=t,34067===this._descriptor.target?this.setDataCubeMap(null):this.setData(null))}setDataCubeMap(e=null){for(let t=34069;t<=34074;t++)this.setData(e,t)}setData(e,t=3553){if(!this._context||!this._context.gl)return;const r=this._context.gl;this._glName||(this._glName=r.createTexture()),void 0===e&&(e=null),null===e&&(this._descriptor.width=this._descriptor.width||c,this._descriptor.height=this._descriptor.height||c);const i=this._context.bindTexture(this,h.TEXTURE_UNIT_FOR_UPDATES),s=this._descriptor;h._validateTexture(this._context,s),r.pixelStorei(r.UNPACK_ALIGNMENT,s.unpackAlignment),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,s.flipped?1:0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.preMultiplyAlpha?1:0);const o=s.pixelFormat;let l=s.internalFormat?s.internalFormat:this._deriveInternalFormat(o,s.dataType);if(e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement){let i=e.width,n=e.height;e instanceof HTMLVideoElement&&(i=e.videoWidth,n=e.videoHeight),s.width&&s.height,r.texImage2D(t,0,l,o,s.dataType,e),(0,a.zu)(r),s.hasMipmap&&this.generateMipmap(),void 0===s.width&&(s.width=i),void 0===s.height&&(s.height=n)}else{null!=s.width&&s.height,r.DEPTH24_STENCIL8&&l===r.DEPTH_STENCIL&&(l=r.DEPTH24_STENCIL8);let i=s.width,c=s.height;if(p(e)){const n=Math.round(Math.log(Math.max(i,c))/Math.LN2)+1;s.hasMipmap=s.hasMipmap&&n===e.levels.length;for(let a=0;;++a){const n=e.levels[Math.min(a,e.levels.length-1)];if(r.compressedTexImage2D(t,a,l,i,c,0,n),1===i&&1===c||!s.hasMipmap)break;i=Math.max(1,i>>1),c=Math.max(1,c>>1)}}else if((0,n.pC)(e))r.texImage2D(t,0,l,i,c,0,o,s.dataType,e),(0,a.zu)(r),s.hasMipmap&&this.generateMipmap();else for(let e=0;r.texImage2D(t,e,l,i,c,0,o,s.dataType,null),(0,a.zu)(r),(1!==i||1!==c)&&s.hasMipmap;++e)i=Math.max(1,i>>1),c=Math.max(1,c>>1)}h._applySamplingMode(r,this._descriptor),h._applyWrapMode(r,this._descriptor),h._applyAnisotropicFilteringParameters(this._context,this._descriptor),(0,a.zu)(r),this._context.bindTexture(i,h.TEXTURE_UNIT_FOR_UPDATES)}updateData(e,t,r,i,n,a,s=3553){this._glName;const o=this._context.gl,c=this._descriptor,p=this._context.bindTexture(this,h.TEXTURE_UNIT_FOR_UPDATES);t<0||r<0||i>c.width||n>c.height||t+i>c.width||c.height,o.pixelStorei(o.UNPACK_ALIGNMENT,c.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha?1:0),a instanceof ImageData||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement?o.texSubImage2D(s,e,t,r,c.pixelFormat,c.dataType,a):o.texSubImage2D(s,e,t,r,i,n,c.pixelFormat,c.dataType,a),this._context.bindTexture(p,h.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;e.hasMipmap||(e.hasMipmap=!0,this._samplingModeDirty=!0,h._validateTexture(this._context,e)),9729===e.samplingMode?(this._samplingModeDirty=!0,e.samplingMode=9985):9728===e.samplingMode&&(this._samplingModeDirty=!0,e.samplingMode=9984);const t=this._context.bindTexture(this,h.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(e.target),this._context.bindTexture(t,h.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,h._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const e=this._context.gl,t=this._descriptor;this._samplingModeDirty&&(h._applySamplingMode(e,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(h._applyWrapMode(e,t),this._wrapModeDirty=!1)}_deriveInternalFormat(e,t){if("webgl"===this._context.webglVersion)return e;if(5126===t)switch(e){case 6408:return 34836;case 6407:return 34837;default:throw new Error("Unable to derive format")}return e}static _validateTexture(e,t){t.width<0||t.height;const r=(0,i.wt)(t.width)&&(0,i.wt)(t.height);(0,o.Z)(e.gl)||r||("number"==typeof t.wrapMode?t.wrapMode:33071===t.wrapMode.s&&t.wrapMode.t,t.hasMipmap)}static _applySamplingMode(e,t){let r=t.samplingMode,i=t.samplingMode;9985===r||9987===r?(r=9729,t.hasMipmap||(i=9729)):9984!==r&&9986!==r||(r=9728,t.hasMipmap||(i=9728)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,r),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,i)}static _applyWrapMode(e,t){"number"==typeof t.wrapMode?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}static _applyAnisotropicFilteringParameters(e,t){var r;const i=e.capabilities.textureFilterAnisotropic;i&&e.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,null!=(r=t.maxAnisotropy)?r:1)}}function p(e){return(0,n.pC)(e)&&"type"in e&&"compressed"===e.type}h.TEXTURE_UNIT_FOR_UPDATES=0},68412:function(e,t,r){function i(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}r.d(t,{Z:function(){return i}})},56770:function(e,t,r){r.d(t,{CG:function(){return p},hZ:function(){return h},zu:function(){return l}});r(21703);var i=r(25585),n=r(35425),a=r(87441);const s=a.Z.getLogger("esri/views/webgl");function o(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const c=!!(0,n.Z)("enable-feature:webgl-debug");function h(){return c}function p(){return c}function l(e){if(h()){const t=e.getError();if(t){const r=o(e,t),n=(new Error).stack;s.error(new i.Z("webgl-error","WebGL error occured",{message:r,stack:n}))}}}},28383:function(e,t,r){r.d(t,{Ld:function(){return i},Lu:function(){return a},_g:function(){return n}});const i=33984;var n;!function(e){e[e.Texture=0]="Texture",e[e.Buffer=1]="Buffer",e[e.VAO=2]="VAO",e[e.VertexShader=3]="VertexShader",e[e.FragmentShader=4]="FragmentShader",e[e.Program=5]="Program",e[e.Framebuffer=6]="Framebuffer",e[e.Renderbuffer=7]="Renderbuffer",e[e.COUNT=8]="COUNT"}(n||(n={}));const a=33306},53012:function(e,t,r){r.d(t,{H:function(){return a},K:function(){return n}});var i=r(76633);function n(e){let t="";for(const r in e){const i=e[r];if("boolean"==typeof i)i&&(t+=`#define ${r}\n`);else if("number"==typeof i)t+=`#define ${r} ${i.toFixed()}\n`;else if("object"==typeof i){const e=i.options;let n=0;for(const r in e)t+=`#define ${e[r]} ${(n++).toFixed()}\n`;t+=`#define ${r} ${e[i.value]}\n`}}return t}function a(e,t,r,n){r=r||{},n=n||"";const a="function"==typeof t.shaders?t.shaders(r):t.shaders;return new i.$(e,n+a.vertexShader,n+a.fragmentShader,t.attributes)}}}]);