"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[457],{80457:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(62032),u=r(16198),i=r(76133),a=r(92751),s=(r(78975),r(21249),r(68309),r(25585)),o=r(87441),c=r(27092),l=r(24446),p=r(71563),h=r(32503),f=r(125),g=r(76400),y=r(62415),d=r(66826),m=r(14685),v=r(70930),w=r(83683),_=function(){function e(){var t=this;(0,i.Z)(this,e),this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(r){var u,i,a,s,o,f,y,w,_,x,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=t._queryEngine.objectIdField,e.next=3,(0,v.Bm)(t._getFeatureUrl,t._featureType.typeName,t._getFeatureOutputFormat,{customParameters:t._customParameters,dateFields:t._queryEngine.fieldsIndex.dateFields.map((function(e){return e.name})),signal:r});case 3:return i=e.sent,e.next=6,(0,d.O3)(i);case 6:if((0,l.k_)(r),a=(0,d.lG)(i,{geometryType:t._queryEngine.geometryType,hasZ:!1,objectIdField:u}),!(0,p.fS)(t._queryEngine.spatialReference,p.Zn)){s=(0,n.Z)(a);try{for(s.s();!(o=s.n()).done;)f=o.value,(0,c.pC)(f.geometry)&&(f.geometry=(0,h.GH)((0,g.iV)((0,h.di)(f.geometry,t._queryEngine.geometryType,!1,!1),p.Zn,t._queryEngine.spatialReference)))}catch(Z){s.e(Z)}finally{s.f()}}y=1,w=(0,n.Z)(a);try{for(w.s();!(_=w.n()).done;)x=_.value,k={},(0,m.O0)(t._fieldsIndex,k,x.attributes,!0),x.attributes=k,null==x.attributes[u]&&(x.objectId=x.attributes[u]=y++)}catch(Z){w.e(Z)}finally{w.f()}return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return(0,a.Z)(e,[{key:"destroy",value:function(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=null}},{key:"load",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(t,r){var n,u,i,a,s,o,p,h,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getFeatureUrl,u=t.getFeatureOutputFormat,i=t.spatialReference,a=t.fields,s=t.geometryType,o=t.featureType,p=t.objectIdField,h=t.customParameters,this._featureType=o,this._customParameters=h,this._getFeatureUrl=n,this._getFeatureOutputFormat=u,this._fieldsIndex=new w.Z(a),e.next=8,this._checkProjection(i);case 8:return(0,l.k_)(r),this._queryEngine=new y.Z({fields:a,geometryType:s,hasM:!1,hasZ:!1,objectIdField:p,spatialReference:i,timeInfo:null,featureStore:new f.Z({geometryType:s,hasM:!1,hasZ:!1})}),e.next=12,this._snapshotFeatures((0,c.Wg)(r.signal));case 12:return g=e.sent,e.abrupt("return",(this._queryEngine.featureStore.addMany(g),{extent:this._queryEngine.fullExtent}));case 14:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"applyEdits",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new s.Z("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryFeatures",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQuery(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryFeatureCount",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForCount(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryObjectIds",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForIds(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"queryExtent",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForExtent(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"querySnapping",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this._waitSnapshotComplete();case 3:return e.abrupt("return",this._queryEngine.executeQueryForSnapping(t,r.signal));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"refresh",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(t){var r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._customParameters=t,null==(r=this._snapshotTask)||r.abort(),this._snapshotTask=(0,l.vr)(this._snapshotFeatures),this._snapshotTask.promise.then((function(e){n._queryEngine.featureStore.clear(),e&&n._queryEngine.featureStore.addMany(e)}),(function(e){n._queryEngine.featureStore.clear(),(0,l.D_)(e)||o.Z.getLogger("esri.layers.WFSLayer").error(new s.Z("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:e}))})),e.next=6,this._waitSnapshotComplete();case 6:return e.abrupt("return",{extent:this._queryEngine.fullExtent});case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_waitSnapshotComplete",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._snapshotTask||this._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,this._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return e.abrupt("return",this._waitSnapshotComplete());case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_checkProjection",value:function(){var e=(0,u.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g._W)(p.Zn,t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),new s.Z("unsupported-projection","Projection not supported",{spatialReference:t});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()},14685:function(e,t,r){r.d(t,{O0:function(){return d},av:function(){return p},b:function(){return x},d1:function(){return f},og:function(){return v}});var n=r(16198),u=r(62032),i=r(92751),a=r(76133),s=(r(78975),r(82526),r(41817),r(41539),r(70189),r(78783),r(33948),r(68309),r(21703),r(71563)),o=r(63390),c=(0,i.Z)((function e(){(0,a.Z)(this,e),this.code=null,this.description=null})),l=(0,i.Z)((function e(t){(0,a.Z)(this,e),this.error=new c,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}));function p(e){return new l(e)}var h=(0,i.Z)((function e(t){(0,a.Z)(this,e),this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}));function f(e){return new h(e)}var g,y=new Set;function d(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;for(var a in y.clear(),r){var s=e.get(a);if(s){var c=r[a],l=m(s,c);if(l!==c&&i&&i.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:s,originalValue:c,sanitizedValue:l}}),y.add(s.name),s&&(n||s.editable)){var h=(0,o.Qc)(s,l);if(h)return p((0,o.vP)(h,s,l));t[s.name]=l}}}var f,g=(0,u.Z)(e.requiredFields);try{for(g.s();!(f=g.n()).done;){var d=f.value;if(!y.has(d.name))return p('missing required field "'.concat(d.name,'"'))}}catch(v){g.e(v)}finally{g.f()}return null}function m(e,t){var r=t;return"string"==typeof t&&(0,o.H7)(e)?r=parseFloat(t):null!=t&&(0,o.qN)(e)&&"string"!=typeof t&&(r=String(t)),(0,o.Pz)(r)}function v(e,t){if(!e||!(0,s.JY)(t))return e;if("rings"in e||"paths"in e){if(!g)throw new TypeError("geometry engine not loaded");return g.simplify(t,e)}return e}function w(){return _.apply(this,arguments)}function _(){return _=(0,n.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=g,e.t0){e.next=6;break}return e.next=4,Promise.all([r.e(7419),r.e(5070)]).then(r.bind(r,45070));case 4:g=e.sent,e.t0=g;case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function x(e,t){return k.apply(this,arguments)}function k(){return k=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=!(0,s.JY)(t)||"esriGeometryPolygon"!==r&&"esriGeometryPolyline"!==r,e.t0){e.next=4;break}return e.next=4,w();case 4:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}}}]);