"use strict";(self["webpackChunkvue_url_arcgis"]=self["webpackChunkvue_url_arcgis"]||[]).push([[9026],{9026:function(e,r,t){t.r(r),t.d(r,{addOrUpdateResource:function(){return p},contentToBlob:function(){return R},fetchResources:function(){return c},getSiblingOfSameType:function(){return b},getSiblingOfSameTypeI:function(){return _},removeAllResources:function(){return m},removeResource:function(){return f},splitPrefixFileNameAndExtension:function(){return w}});var n=t(2394),a=t(16198),u=(t(78975),t(47042),t(21249),t(35680)),s=t(25585),o=t(27092),i=t(58476);function c(e){return l.apply(this,arguments)}function l(){return l=(0,a.Z)(regeneratorRuntime.mark((function e(r){var t,n,a,u,s,c,l,p,h,f,d,m,v,g=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=g.length>1&&void 0!==g[1]?g[1]:{},n=g.length>2?g[2]:void 0,e.next=4,r.load(n);case 4:return a=(0,i.v_)(r.itemUrl,"resources"),u=t.start,s=void 0===u?1:u,c=t.num,l=void 0===c?10:c,p=t.sortOrder,h=void 0===p?"asc":p,f=t.sortField,d=void 0===f?"created":f,m={query:{start:s,num:l,sortOrder:h,sortField:d,token:r.apiKey},signal:(0,o.U2)(n,"signal")},e.next=16,r.portal._request(a,m);case 16:return v=e.sent,e.abrupt("return",{total:v.total,nextStart:v.nextStart,resources:v.resources.map((function(e){var t=e.created,n=e.size,a=e.resource;return{created:new Date(t),size:n,resource:r.resourceFromPath(a)}}))});case 18:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function p(e,r,t,n){return h.apply(this,arguments)}function h(){return h=(0,a.Z)(regeneratorRuntime.mark((function e(r,t,a,u){var c,l,p,h,f,d,m,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.hasPath()){e.next=2;break}throw new s.Z("portal-item-resource-".concat(t,":invalid-path"),"Resource does not have a valid path");case 2:return c=r.portalItem,e.next=5,c.load(u);case 5:return l=(0,i.v_)(c.userItemUrl,"add"===t?"addResources":"updateResources"),p=g(r.path),h=(0,n.Z)(p,2),f=h[0],d=h[1],e.next=12,R(a);case 12:return m=e.sent,v=new FormData,f&&"."!==f&&v.append("resourcesPrefix",f),v.append("fileName",d),v.append("file",m,d),v.append("f","json"),(0,o.pC)(u)&&u.access&&v.append("access",u.access),e.next=21,c.portal._request(l,{method:"post",body:v,signal:(0,o.U2)(u,"signal")});case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function f(e,r,t){return d.apply(this,arguments)}function d(){return d=(0,a.Z)(regeneratorRuntime.mark((function e(r,t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.hasPath()){e.next=2;break}throw new s.Z("portal-item-resources-remove:invalid-path","Resource does not have a valid path");case 2:return e.next=4,r.load(n);case 4:return a=(0,i.v_)(r.userItemUrl,"removeResources"),e.next=7,r.portal._request(a,{method:"post",query:{resource:t.path},signal:(0,o.U2)(n,"signal")});case 7:t.portalItem=null;case 8:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function m(e,r){return v.apply(this,arguments)}function v(){return v=(0,a.Z)(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.load(t);case 2:return n=(0,i.v_)(r.userItemUrl,"removeResources"),e.abrupt("return",r.portal._request(n,{method:"post",query:{deleteAll:!0},signal:(0,o.U2)(t,"signal")}));case 4:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(e){var r=e.lastIndexOf("/");return-1===r?[".",e]:[e.slice(0,r),e.slice(r+1)]}function w(e){var r=x(e),t=(0,n.Z)(r,2),a=t[0],u=t[1],s=g(a),o=(0,n.Z)(s,2),i=o[0],c=o[1];return[i,c,u]}function x(e){var r=(0,i.Ml)(e);return(0,o.Wi)(r)?[e,""]:[e.slice(0,e.length-r.length-1),".".concat(r)]}function R(e){return y.apply(this,arguments)}function y(){return y=(0,a.Z)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(r instanceof Blob)){e.next=2;break}return e.abrupt("return",r);case 2:return e.next=4,(0,u["default"])(r.url,{responseType:"blob"});case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function b(e,r){if(!e.hasPath())return null;var t=w(e.path),a=(0,n.Z)(t,3),u=a[0],s=a[2];return e.portalItem.resourceFromPath((0,i.v_)(u,r+s))}function _(e,r){if(!e.hasPath())return null;var t=w(e.path),a=(0,n.Z)(t,3),u=a[0],s=a[2];return e.portalItem.resourceFromPath((0,i.v_)(u,r+s))}}}]);